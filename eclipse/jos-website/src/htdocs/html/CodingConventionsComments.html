<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 FINAL//EN">
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
    <title>CodingConventionsComments.Imported @ jos.sf.net</title>
  </head>

<body bgcolor="#FFFFFF">

<!-- The FORM encloses the entire header, because it renders better that way. !-->
<form action="/jump.php"><input type="hidden" name="PHPSESSID" value="8f7fa833e8a9200e836e6a8737b64c8d" />

<!-- The JOS logo. !-->
<table border="0" cellspacing="0" cellpadding="3" width="100%">
<tr valign="TOP" align="LEFT">
	<td><a href="../index.html"><img 
		VSPACE="0" HSPACE="0" ALIGN="MIDDLE" BORDER="0"
		SRC="image/wikiHome.gif"></a></td>
	<!-- The tab table. !-->
	<td width="100%" align="RIGHT" bgcolor="#FFFFFF" valign="BOTTOM"> 
		<table border="0" cellspacing="0" cellpadding="3" width="100%" align="RIGHT">
			<tr valign="MIDDLE" align="LEFT">

<td bgcolor="White" width="60%">&nbsp;</td>
<td bgcolor="#FFFFCC"><a href="../index.html">Home</a></td>
<td bgcolor="White">&nbsp;</td>
<td width="10%" bgcolor="#FFFFCC" align="CENTER"><a href="../info.html">Info</a></td>
<td bgcolor="White">&nbsp;</td>
<td width="10%" bgcolor="#FFFFCC" align="CENTER"><a href="../dev.html">DevZone</a></td>
<td bgcolor="White">&nbsp;</td>
<td width="10%" bgcolor="#FFCC66" align="CENTER"><a
href="../wiki.html">Wiki</a></td>
<td bgcolor="White">&nbsp;</td>
			</tr>
			<tr>
				<td bgcolor="#FFCC66" align="RIGHT" colspan="9">
					<a href="UsersWebHome.html">UsersWeb</a>
					&nbsp;|&nbsp;
					<a href="MainWebHome.html">MainWeb</a>
					&nbsp;|&nbsp;
					<a href="InfoWebHome.html">InfoWeb</a>
					&nbsp;|&nbsp;
					<a href="DevZoneWebHome.html">DevZoneWeb</a>
					&nbsp;|&nbsp;
					<a href="SupportWebHome.html">SupportWeb</a>
				</td>
			</tr>
		</table>
	</td>		
</tr>
<!-- The WikiHeader. !-->
<tr><td colspan="2">
<table border="0" cellspacing="0" cellpadding="3" width="100%">
<tr>
	<td width="25%" align="CENTER" bgcolor="#FFFFCC" valign="CENTER">
		<b>[&nbsp;<! page="">CodingConventionsComments</a>&nbsp;]</b>
	</td>
	<td width="25%" align="CENTER" bgcolor="#FFEE88" valign="CENTER">
		<b>[ not logged in ]</b>	</td>
	<td width="25%" align="CENTER" bgcolor="#FFDD77" valign="CENTER">
		<b>[ Web: <a href="ImportedWebHome.html">Imported</a> ]</b>	</td>
	<td width="25%" align="CENTER" bgcolor="#FFCC66" valign="CENTER">
		goto:&nbsp;<INPUT TYPE="TEXT" SIZE="10" NAME="topic"><!--<INPUT TYPE="IMAGE" src="/media/go.gif?PHPSESSID=8f7fa833e8a9200e836e6a8737b64c8d" border="0" VALUE="topic" ALT="goto">!-->&nbsp;<! page=""><FONT SIZE="-1">options</FONT></a>
	</td>
</tr>
</table>

<table border="0" cellspacing="0" cellpadding="3" width="100%">
	<tr>
	<td align="CENTER" bgcolor="#FFFFCC" valign="TOP">
		[&nbsp;get <! page="">info</a> on or <a href="WebHome.html">edit</a>&nbsp;]	</td>
	<td align="CENTER" bgcolor="#FFEE88" valign="TOP">
		[&nbsp;<! page="">login</a> or <! page="">new&nbsp;user</a>&nbsp;]	</td>
	<td align="CENTER" bgcolor="#FFDD77" valign="TOP">
		[&nbsp;list of <a href="Glossary.html">topics</a>, <! page="">hubs&nbsp;&amp;&nbsp;nodes</a>, or <a href="NewArticles2a.html">recent&nbsp;changes</a>&nbsp;]	</td>
	</tr>
</table>

<!-- From CommonHeader !-->
</tr></td>
</table>
</form>

<!-- start BODY page !-->
<p>
Here's my take on the two issues presented so far.
</p><p>
A) I think the former looks more compact and preserves whitespace for more important uses.  Indentation already sets off the code in the block, and <! page="">TOO</a> much whitespace (to me, at least) makes things hard to find when scanning a source file.
</p><p>
B) I think there's more important issues with applying a Hungarian-style convention here.  Although I like the concept, we need to consider...
</p><p>
<ul> <li> That differs dramatically from the core java API.  We would have 2 competing naming conventions, one for standard java and one for JOS.  It could be argued that it would help to tell when code is java/JOS, but I think it may just get confusing.
<li> A convention would have to be adopted for other classes, unless we wanted to just have them follow a different naming convention.  If I derive a class from <! page="">LayoutManager</a> called <! page="">RandomLayoutManager</a> to place components randomly on the screen, should I call an instance of it rlmLayout, or what?
<li> Potential to get "behind."  What if a central variable changes from an int to a float for some reason.  Can we guarantee someone has the patience to change the name in every place that it is used in the entire project?
</ul> 
We could develop a more meaning-oriented, more natural language convention and fix the above problems.  For instance, decide to call index variable indexVarName, boolean's isVarName, etc.  I'm still not so sure about it, though.
</p><p>
-ChrisSmith
<hr>
Re:B)
What naming system exists in Sun core Java api?
Maybe I just missed it somehow? :)
-%BK%
</p><p>
Okay.  Revise above to read "... 2 competing naming conventions (or lack thereof)..."
-ChrisSmith
<hr>
Isn't the __purpose__ of <a href="HungarianNotation.html">HungarianNotation</a> to identify types in weakly typed language?
</p><p>
If we have to use them, I vote for the ones used by the VM, just lowercased. Thus:
<ul> <li> __a__ object (don't ask me, I don't know)
<li> __b__ byte
<li> __c__ char
<li> __d__ double
<li> __f__ float
<li> __i__ int
<li> __j__ long
<li> __s__ short
<li> __z__ boolean
</ul> 
--BillRehm
</p><p>
<hr>
</p><p>
Where is this documented? And why ever is it called Hungarian?
-BK
</p><p>
<hr>
What about the naming convention for Classes, and specifically for Interfaces. Should we prefix interface defintions with the letter 'I' or just give them names that end
in 'able' (like the Java API?). 
-<a href="SimonSpringall.html">SimonSpringall</a>
</p><p>
<hr>
</p><p>
Netscape recently released their own Java coding conventions, and I think most of them are really good. I disagree with their use of tabs that are only 2 spaces, and the fact that they aren't standardizing brace styles, but it's a start:
</p><p>
<a href="http://developer.netscape.com/library/technote/java/codestyle.html">http://developer.netscape.com/library/technote/java/codestyle.html</a>
</p><p>
Of course, <a href="PrettyPrinter.html">PrettyPrinter</a> aims to solve some of these problems by allowing us to code with brackets/spacing as we see appropriate, and then view the source in any manner we want via <a href="PrettyPrinter.html">PrettyPrinter</a> at a later time. Just some thoughts...
</p><p>
--MasonZhwiti
</p><p>
<hr>
</p><p>
The extended <! page="">JTB</a> Pretty-Printer - see the <EM>bottom</EM> of page
<a href="http://www.cs.purdue.edu/homes/taokr/jtb/examples.html">http://www.cs.purdue.edu/homes/taokr/jtb/examples.html</a> - automatically
wraps lines longer than 80 characters nicely (taking operator
priority into account). It is written using the 
visitor design pattern and the source code is freely available.
</p><p>
-BrunoDaniel
</p><p>
<hr>
</p><p>
I have already written most of the perl version of the <! page="">JOS</a> <a href="PrettyPrinter.html">PrettyPrinter</a>, after evaluating both the <! page="">JTB</a> pretty printer
and another similar <a href="PrettyPrinter.html">PrettyPrinter</a> someone else had mentioned
a few months ago. 
</p><p>
The problems with those versions are that
they (1) take up way too much RAM, especially when dealing
with large source files, and (2) are hard to maintain because
of the sheer volume of visit() methods. Someone would have to
study the Visitor class for some time before being able to
understand what it does, let alone figure out to modify it.
Even though this Visitor class may be a real "OO" way of 
doing things, it seems to have gone too far in this case. As
Larry Wall might say, "To be sure, some folks hae gone to the
opposite extreme of designing ever-growing mounds of higher-level abstractions when they should have used cut-and-paste. (This is a
form of False Hubris.)"
</p><p>
Not that I think cut-and-paste would have helped the <! page="">JTB</a> pretty printer, I just think over-abstraction can hurt more than help. Anyway, I think it's safe to say that someone who knows Perl would be able to figure out how my program works, sufficiently enough. 
</p><p>
On top of that, I tested it on a 20KB file, and it only took about a second to format (including <a href="HTML.html">HTML</a> format). An example is on the <a href="PrettyPrinter.html">PrettyPrinter</a> page. I had already planned on adding wordwrap as one option, but it is not in the program yet. 
</p><p>
--MasonZhwiti
</p><p>
<hr>
</p><p>
The large memory usage of our <! page="">JTB</a> pretty-printer is mainly due to
the algorithm in the current version of <a href="JavaCC.html">JavaCC</a>. The <a href="JavaCC.html">JavaCC</a> team has promised to fix that. I have suggested a change of <! page="">JTB</a> which reduces 
the memory expense of the <! page="">JTB</a> part somewhat (see the www site above).
20k files are formatted by the pretty-printer in less than a second 
on my machine - and it's completely written in Java.
</p><p>
I can't agree on your judgement of the visitor design pattern - it 
has many advantages over traditional ways to design a project. In 
this case it allows to use the same parser for completely different
tasks. I think this pays very much. Consider a change of the Java
grammar in a new version (e.g. the introduction of inner classes in
Java 1.1). If you have used Cut and Paste, then you will have to 
hack the changes into all your projects.
</p><p>
There are tasks similar to pretty-printing which could be done: 
<ul> <li> Code transformations, e.g. automatically inserting get- and set- methods, inserting "fall through"-comments in switch statements, finding dangerous code and displaying warnings, making classes beans-compliant automatically, transforming an applet into an application...
<li> Online pretty-printing and tinting of source code in an editor
<li> Generation of a html-file containing a colorized version of the source code, all types being clickable links.
</ul> 
I'm currently working on some of these and I'm going to publish them
on JTB's examples page as soon as possible.
</p><p>
Concerning Perl, I found a class library for using Perl's extended 
regular expressions in Java:
</p><p>
<a href="http://www.oroinc.com/products/PerlTools.html">http://www.oroinc.com/products/PerlTools.html</a>	 and
<a href="http://www.oroinc.com/products/OROMatcher.html">http://www.oroinc.com/products/OROMatcher.html</a>
</p><p>
-BrunoDaniel
</p><p>
<hr>
</p><p>
Re: Visitor design pattern. I wasn't commenting on that design pattern, only on the this particular use of it. <! page="">IMO</a> it's hard to maintain a program with dozens of "visit()" methods in it, because the pattern loses clarity. 
</p><p>
Re: changes in the Java language. That is a possibility, but I don't see too much changing in the syntax of the Java language past 1.1 and 1.2. I still feel it's easier in this case to tweak a regex than to consult dozens of visit() methods throughout the program. I don't see how it pays off here.
</p><p>
You're welcome to work on a version of <a href="PrettyPrinter.html">PrettyPrinter</a> that uses <! page="">JTB</a> and all the other stuff. I started one, and it was painful to say the least. I feel this version of <a href="PrettyPrinter.html">PrettyPrinter</a>, with a few additions and bug fixes, can get the job done in the beginning. The job being fixing  everyone's source code to look similar without actually changing what the programmer wrote.
</p><p>
I am familiar with <! page="">OroMatcher</a>, but it is not GNU'd software and the source code is not available. Therefore I do not feel we can utilize it when writing JOS-related programs like this. 
</p><p>
People are more than welcome to take over the <! page="">JOS</a> <a href="PrettyPrinter.html">PrettyPrinter</a>; I just started it because no one else had and we were starting to write code. If your <! page="">JTB</a> version is able to be freely released under the same terms as <! page="">JOS</a> itself (whatever those might be), then by all means take it over.
</p><p>
--MasonZhwiti
</p><p>
<hr>
</p><p>
Tom, I didn't want to push you away. What about some friendly competition? (Hehe :)) We seem to have found two different approaches to solve the same problem. Why not presenting both of them to the users? The source code I write here is completely free, and <a href="JavaCC.html">JavaCC</a> and Kevin Tao's <a href="JavaTreeBuilder.html">JavaTreeBuilder</a> seem to be free as well.
</p><p>
-BrunoDaniel
</p><p>
<hr>
</p><p>
I think it would be a waste of someone's time if we were to both work on different approaches through to the end when only one will be used. When I first decided to get something going on PP I asked everyone there thoughts on the jos-apps list. Everyone clearly favored the approach you're taking, using Java and a real source code parser. I thought it best as well.
</p><p>
Then I started working on it, first with <a href="JavaCC.html">JavaCC</a> and JJTree, then with JTB. Both methods seemed very un-intuitive, and the first time I ever felt like I was "hacking" with Java. I mean, Visitor.java has EIGHTY-NINE visit methods last time I counted. 89! Granted, most of them wouldn't be used in a good pretty printer, but they still must all be understood by the person that is maintaining the code. 
</p><p>
The other part that concerned me was the amount of memory used, which you say will be fixed soon. So if you like working on that version of <a href="PrettyPrinter.html">PrettyPrinter</a>, and you feel it will be fairly simple to maintain and understand the code, then by all means take over the project. Like I said, <a href="PrettyPrinter.html">PrettyPrinter</a> was not a project I really wanted to work on, just one I thought needed to be done first. I would be much happier working on other parts of JOS... like <a href="FileFinder.html">FileFinder</a>, Zip, <a href="JosMail.html">JosMail</a>, etc.
</p><p>
It's up to you. If you're familiar with Perl, I could send you the code I have so far on that just for fun.
</p><p>
--MasonZhwiti
</p><p>
<hr>
</p><p>
I'm going to offer a version without Visitors, using only <a href="JavaCC.html">JavaCC</a>.
</p><p>
-BrunoDaniel
</p><p><br><br></p><!--

<table width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="737b9c">
<tr><td align="CENTER">
<! page="">login</a> or <! page="">new&nbsp;user</a><tr><td>
</table>

!-->
<!-- end BODY page !-->

<hr>

<div align="CENTER">
<table border="0" cellpadding="3" cellspacing="0" width="100%">
<tr>
	<td align="CENTER" colspan="2">
		Content of these pages are owned and copyrighted by the poster.
	</td>
</tr>
<tr>
	<td align="RIGHT" width="50%">
		Hosted by:
	</td>
	<td align="LEFT">
		<a href="http://sourceforge.net/"><img 
			SRC="http://sourceforge.net/sflogo.php?group_id=2376&type=1"
			BORDER=0 HSPACE=0 VSPACE=0></a>
	</td>
</tr>
</table>
</div>
</body>
</html>
