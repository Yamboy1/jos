<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 FINAL//EN">
<HTML>
  <HEAD>
    <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=ISO-8859-1">
    <TITLE>FileSystemProposal.Imported @ jos.sf.net</TITLE>
  </HEAD>

<BODY BGCOLOR="#FFFFFF">

<!-- The FORM encloses the entire header, because it renders better that way. !-->
<FORM ACTION="/jump.php"><input type="hidden" name="PHPSESSID" value="ce7806c0ee619f9cdb1f032e7c48a37d" />

<!-- The JOS logo. !-->
<TABLE BORDER="0" CELLSPACING="0" CELLPADDING="3" WIDTH="100%">
<TR VALIGN="TOP" ALIGN="LEFT">
	<TD><A HREF="http://cjos.sourceforge.net/archive/"><IMG 
		VSPACE="0" HSPACE="0" ALIGN="MIDDLE" BORDER="0"
		SRC="image/wikiHome.gif"></A></TD>
	<!-- The tab table. !-->
	<TD WIDTH="100%" ALIGN="RIGHT" BGCOLOR="#FFFFFF" VALIGN="BOTTOM"> 
		<TABLE BORDER="0" CELLSPACING="0" CELLPADDING="3" WIDTH="100%" ALIGN="RIGHT">
			<TR VALIGN="MIDDLE" ALIGN="LEFT">

<TD BGCOLOR="White" WIDTH="60%">&nbsp;</TD>
<TD BGCOLOR="#FFFFCC"><A HREF="http://cjos.sourceforge.net/archive/">Home</A></TD>
<TD BGCOLOR="White">&nbsp;</TD>
<TD WIDTH="10%" BGCOLOR="#FFFFCC" ALIGN="CENTER"><A HREF="http://cjos.sourceforge.net/archive/info/">Info</A></TD>
<TD BGCOLOR="White">&nbsp;</TD>
<TD WIDTH="10%" BGCOLOR="#FFFFCC" ALIGN="CENTER"><A HREF="http://cjos.sourceforge.net/archive/dev/">DevZone</A></TD>
<TD BGCOLOR="White">&nbsp;</TD>
<TD WIDTH="10%" BGCOLOR="#FFCC66" ALIGN="CENTER"><A
HREF="http://jos.sourceforge.net/">Wiki</A></TD>
<TD BGCOLOR="White">&nbsp;</TD>
			</TR>
			<TR>
				<TD BGCOLOR="#FFCC66" ALIGN="RIGHT" COLSPAN="9">
					<A HREF="UsersWebHome.html">UsersWeb</A>
					&nbsp;|&nbsp;
					<A HREF="MainWebHome.html">MainWeb</A>
					&nbsp;|&nbsp;
					<A HREF="InfoWebHome.html">InfoWeb</A>
					&nbsp;|&nbsp;
					<A HREF="DevZoneWebHome.html">DevZoneWeb</A>
					&nbsp;|&nbsp;
					<A HREF="SupportWebHome.html">SupportWeb</A>
				</TD>
			</TR>
		</TABLE>
	</TD>		
</TR>
<!-- The WikiHeader. !-->
<TR><TD COLSPAN="2">
<TABLE BORDER="0" CELLSPACING="0" CELLPADDING="3" WIDTH="100%">
<TR>
	<TD WIDTH="25%" ALIGN="CENTER" BGCOLOR="#FFFFCC" VALIGN="CENTER">
		<B>[&nbsp;<! page="">FileSystemProposal</a>&nbsp;]</B>
	</TD>
	<TD WIDTH="25%" ALIGN="CENTER" BGCOLOR="#FFEE88" VALIGN="CENTER">
		<B>[ not logged in ]</B>	</TD>
	<TD WIDTH="25%" ALIGN="CENTER" BGCOLOR="#FFDD77" VALIGN="CENTER">
		<B>[ Web: <a href="ImportedWebHome.html">Imported</a> ]</B>	</TD>
	<TD WIDTH="25%" ALIGN="CENTER" BGCOLOR="#FFCC66" VALIGN="CENTER">
		goto:&nbsp;<INPUT TYPE="TEXT" SIZE="10" NAME="topic"><!--<INPUT TYPE="IMAGE" SRC="/media/go.gif?PHPSESSID=ce7806c0ee619f9cdb1f032e7c48a37d" BORDER="0" VALUE="topic" ALT="goto">!-->&nbsp;<! page=""><FONT SIZE="-1">options</FONT></a>
	</TD>
</TR>
</TABLE>

<TABLE BORDER="0" CELLSPACING="0" CELLPADDING="3" WIDTH="100%">
	<TR>
	<TD ALIGN="CENTER" BGCOLOR="#FFFFCC" VALIGN="TOP">
		[&nbsp;get <! page="">info</a> on or <a href="WebHome.html">edit</a>&nbsp;]	</TD>
	<TD ALIGN="CENTER" BGCOLOR="#FFEE88" VALIGN="TOP">
		[&nbsp;<! page="">login</a> or <! page="">new&nbsp;user</a>&nbsp;]	</TD>
	<TD ALIGN="CENTER" BGCOLOR="#FFDD77" VALIGN="TOP">
		[&nbsp;list of <a href="Glossary.html">topics</a>, <! page="">hubs&nbsp;&amp;&nbsp;nodes</a>, or <a href="NewArticles2a.html">recent&nbsp;changes</a>&nbsp;]	</TD>
	</TR>
</TABLE>

<!-- From CommonHeader !-->
</TR></TD>
</TABLE>
</FORM>

<!-- start BODY page !-->
<P>
This is a discussion concerning the directory structure of <! page="">JOS</a> running on a computer. It is assuming that the <a href="FileSystem.html">FileSystem</a> is on one disk, or that the directories and files are appropriately mounted/linked, and that we don't care what the directory separator is.
</P><P>
System property "JOS.FS.Root" or some other string meaning the same thing will be used to determine the base directory. java.lang.System.getProperties().getProperty("JOS.FS.Root"); should return the base directory name.
</P><P>
Directory heirarchy: (directories are in _bold_)
<UL> <LI> Base
<UL> <LI> <EM>System</EM>
<UL> <LI> <EM>Configuration</EM> (holds a bunch of registry files)
<UL> <LI> Devices.reg
<LI> Services.reg
<LI> Shells.reg
<LI> Software.reg
<LI> <! page="">StartUp</a>.reg
<LI> Users.reg
</UL> <LI> <EM>Classes</EM> (holds the <! page="">JOS</a> package heirarchies)
<UL> <LI> jos.jar
<LI> org.jos.jar
</UL> <LI> <EM>Kernel</EM> (only on machines which use jos.jar)
<UL> <LI> (All native kernel binaries)
<LI> <! page="">SwapFile</a>.swp
</UL> </UL> <LI> <EM>Application</EM>
<UL> <LI> (All application directories, etc)
</UL> <LI> <EM>User</EM>
<UL> <LI> (All user directories, etc)
</UL> </UL> </UL> Goals:
<UL> <LI> Compact directory structure
<LI> Quick and Easy access to all parts of the system
<LI> Standard <! page="">ClassPath</a> settings
<LI> Text-based registry (unlike Windows...)
<LI> Separate distribution of native (jos) and support classes (org.jos)
</UL> 
-- <a href="MichaelFried.html">MichaelFried</a>
</P><P>
<HR>
</P><P>
A couple things to counter:
<OL>
	<LI> All system properties should be lowercase, like packages:
JOS.FS.Root should be jos.fs.root. 
	<LI> I'm not sure, but I remember hearing a lot of discussion about
an OO file system, where everything is an object, not necessarily a 
file. Perhaps stored in a database like system? I definitely got the
hint that the majority liked this idea, but I don't know what was
said exactly.
	<LI> Unless someone can provide really good reasons for a text-based
Registry, I say that we should use something stored in binary format. Here's why:
	 <UL>
		<LI> Faster search and retrieval of information.
		<LI> Less memory requirements if done right.
		<LI> Less hard drive storage space requirements.
	 </UL>
I do think <! page="">JOS</a> is not going to be the fastest OS, but the
most reliable. However, wherever we can make speed increases without 
many negatives, we should do it. 
</P><P>
As for how to implement a Binary registry, what about a tree structure. Create <! page="">RegistryKey</a> objects which have references to a "daughter" array of <! page="">RegistryKey</a> objects, <B>OR</B> a bit of information (String, Integer, Float, etc) instead. Implement serializable, and the Registry could be read and stored to disk very easily. 
</P><P>
There are some <STRONG><! page="">GREAT</a></STRONG> tips in the <B><A HREF="http://developer.javasoft.com/developer/javaInDepth/TechTips/techtips5.html">December 16th issue of the <! page="">JDC</a> Tech-Tips</A></B> which discuss how to get good performance from this type of structure.
</OL>
--MasonZhwiti
</P><P>
<HR>
I just recently learned the differenc between Mac and PC file systems. I think the Mac file system (data forks) should be used. The data-fork itself could be in binary and the data-file could be an object. This style would work well with a database because you have your key and your object right there.
--CavelleBenjamin
</P><P>
<HR>
 I worked a little on the structure of the <! page="">JOS</a> FS and think this would look good:
</P><P>
<UL> <LI> Base
<UL> <LI> <EM>Floppy Drive</EM> (can be renamed, disk label shows up after it?)
<LI> <EM>Other Drive</EM> (....)
<LI> <EM>Main Drive</EM> (i.e. hard drive)
<UL> <LI> <EM>Command</EM> (CLI commands not included in thee shell)
<LI> <EM>JOS Applets</EM>
<UL> <LI> <EM>Notepad</EM>
<LI> <EM>Paint</EM>
<LI> <I>etc, etc</I>
</UL> <LI> <EM>Common Files</EM> (packages <! page="">NOT</a> part of the OS)
<LI> <EM>Program Files</EM> (app-root)
</UL> <LI> <EM>Users</EM>
<UL> <LI> <EM>User A</EM>	(only visible if User A logged on)
<UL> <LI> his stuff
</UL> <LI> <EM>User B</EM>	(only visible if User B logged on)
<UL> <LI> her stuff  
</UL> </UL> <LI> <EM>cache(1)</EM>	(hidden directory internet cache/Virtual Memory)
<LI> <EM>Desktop(1)</EM>  (Mirrors the Desktop)
<UL> <LI> <EM>example dir</EM> (shows a directory on desktop)
</UL> <LI> <EM>JOS(1)</EM> (GUI/CLI files)
<LI> <EM>System(1)</EM>
<UL> <LI> mime.reg
<LI> etc, etc
<LI> <EM>Drivers</EM>  (device drivers)
<UL> <LI> monitor.drv
<LI> mouse.drv
</UL> <LI> <EM>Start Up</EM> (startup folder)
<LI> <EM>Shutdwon</EM> (shutdown folder)
<LI> <EM>Fonts</EM>  (holds all fonts)
<LI> <EM>lib</EM> (all system packages)
<UL> <LI> jos.jar				 
<LI> org.jos.jar
<LI> <EM>Java</EM>
<UL> <LI> cleanRoomJavaImpl.jar
</UL> <LI> <EM>Javax</EM>
<LI> <EM>FreeSwingSet</EM>
<LI> <EM>content</EM> (content handler root)
<UL> <LI> <EM>readers</EM>
<LI> <EM>writers</EM>
</UL> <LI> <EM>codec</EM> (codec handler root) 
<UL> <LI> <EM>readers</EM>
<LI> <EM>writers</EM>
</UL> <LI> <EM>protocol</EM> (protocol handlers)
</UL> <LI> <EM>Servlets</EM> (root for sys. servlets)
<LI> <EM>cookies</EM> (hidden: holds document cookies)
<LI> <EM>History</EM> (hitory dir for internet/"Document Menu")
<LI> <EM>newMenu</EM> (holds file templates <! page="">ShellNew</a> in win95)
<LI> <EM>sendToMenu</EM> (for send to menu)
<LI> <EM>Find</EM> (programs in find menu)
<LI> <EM>ControlPanel</EM> (duh)
</UL> </UL> </UL> 
(1) on Main Drive but appears to not be on any drive, just part of the system root (make file management easier for many people seeing the system as sepreate from hteir programs and files)
</P><P>
--DigiGod<BR><BR></P><!--

<TABLE width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="737b9c">
<TR><TD ALIGN="CENTER">
<! page="">login</a> or <! page="">new&nbsp;user</a><TR><TD>
</TABLE>

!-->
<!-- end BODY page !-->

<HR>

<DIV ALIGN="CENTER">
<TABLE BORDER="0" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR>
	<TD ALIGN="CENTER" COLSPAN="2">
		Content of these pages are owned and copyrighted by the poster.
	</TD>
</TR>
<TR>
	<TD ALIGN="RIGHT" WIDTH="50%">
		Hosted by:
	</TD>
	<TD ALIGN="LEFT">
		<A HREF="http://sourceforge.net/"><IMG 
			SRC="http://sourceforge.net/sflogo.php?group_id=2376&type=1"
			BORDER=0 HSPACE=0 VSPACE=0></A>
	</TD>
</TR>
</TABLE>
</DIV>
</BODY>
</HTML>
