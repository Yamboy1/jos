<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 FINAL//EN">
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
    <title>GCCconsiderations.Imported @ jos.sf.net</title>
  </head>

<body bgcolor="#FFFFFF">

<!-- The FORM encloses the entire header, because it renders better that way. !-->
<form action="/jump.php"><input type="hidden" name="PHPSESSID" value="a31419451f15a61986d9812b71d8cd23" />

<!-- The JOS logo. !-->
<table border="0" cellspacing="0" cellpadding="3" width="100%">
<tr valign="TOP" align="LEFT">
	<td><a href="../index.html"><img 
		VSPACE="0" HSPACE="0" ALIGN="MIDDLE" BORDER="0"
		SRC="image/wikiHome.gif"></a></td>
	<!-- The tab table. !-->
	<td width="100%" align="RIGHT" bgcolor="#FFFFFF" valign="BOTTOM"> 
		<table border="0" cellspacing="0" cellpadding="3" width="100%" align="RIGHT">
			<tr valign="MIDDLE" align="LEFT">

<td bgcolor="White" width="60%">&nbsp;</td>
<td bgcolor="#FFFFCC"><a href="../index.html">Home</a></td>
<td bgcolor="White">&nbsp;</td>
<td width="10%" bgcolor="#FFFFCC" align="CENTER"><a href="../info.html">Info</a></td>
<td bgcolor="White">&nbsp;</td>
<td width="10%" bgcolor="#FFFFCC" align="CENTER"><a href="../dev.html">DevZone</a></td>
<td bgcolor="White">&nbsp;</td>
<td width="10%" bgcolor="#FFCC66" align="CENTER"><a
href="../wiki.html">Wiki</a></td>
<td bgcolor="White">&nbsp;</td>
			</tr>
			<tr>
				<td bgcolor="#FFCC66" align="RIGHT" colspan="9">
					<a href="UsersWebHome.html">UsersWeb</a>
					&nbsp;|&nbsp;
					<a href="MainWebHome.html">MainWeb</a>
					&nbsp;|&nbsp;
					<a href="InfoWebHome.html">InfoWeb</a>
					&nbsp;|&nbsp;
					<a href="DevZoneWebHome.html">DevZoneWeb</a>
					&nbsp;|&nbsp;
					<a href="SupportWebHome.html">SupportWeb</a>
				</td>
			</tr>
		</table>
	</td>		
</tr>
<!-- The WikiHeader. !-->
<tr><td colspan="2">
<table border="0" cellspacing="0" cellpadding="3" width="100%">
<tr>
	<td width="25%" align="CENTER" bgcolor="#FFFFCC" valign="CENTER">
		<b>[&nbsp;<! page="">GCCconsiderations</a>&nbsp;]</b>
	</td>
	<td width="25%" align="CENTER" bgcolor="#FFEE88" valign="CENTER">
		<b>[ not logged in ]</b>	</td>
	<td width="25%" align="CENTER" bgcolor="#FFDD77" valign="CENTER">
		<b>[ Web: <a href="ImportedWebHome.html">Imported</a> ]</b>	</td>
	<td width="25%" align="CENTER" bgcolor="#FFCC66" valign="CENTER">
		goto:&nbsp;<INPUT TYPE="TEXT" SIZE="10" NAME="topic"><!--<INPUT TYPE="IMAGE" src="/media/go.gif?PHPSESSID=a31419451f15a61986d9812b71d8cd23" border="0" VALUE="topic" ALT="goto">!-->&nbsp;<! page=""><FONT SIZE="-1">options</FONT></a>
	</td>
</tr>
</table>

<table border="0" cellspacing="0" cellpadding="3" width="100%">
	<tr>
	<td align="CENTER" bgcolor="#FFFFCC" valign="TOP">
		[&nbsp;get <! page="">info</a> on or <a href="WebHome.html">edit</a>&nbsp;]	</td>
	<td align="CENTER" bgcolor="#FFEE88" valign="TOP">
		[&nbsp;<! page="">login</a> or <! page="">new&nbsp;user</a>&nbsp;]	</td>
	<td align="CENTER" bgcolor="#FFDD77" valign="TOP">
		[&nbsp;list of <a href="Glossary.html">topics</a>, <! page="">hubs&nbsp;&amp;&nbsp;nodes</a>, or <a href="NewArticles2a.html">recent&nbsp;changes</a>&nbsp;]	</td>
	</tr>
</table>

<!-- From CommonHeader !-->
</tr></td>
</table>
</form>

<!-- start BODY page !-->
<p>
Considering the <a href="GNU.html">GNU</a> c/c++ compiler for <! page="">JOS</a> could save a lot of work.
</p><p>
Reinventing the wheel for communication protocols or for the many file 
system drivers and hardware driver implementations hurts - <! page="">JOS</a> could
benefit from the many <a href="GNU.html">GNU</a> licensed linux sources. Of course, existing
implementations will not work without proper additional work, but this
task could surley be simplified (have a posix-layer in JOS..).
</p><p>
On the other hand, the gcc architecture with it's language front-ends
would allow more languages than only c and c++ as source languages,
objective-c, ada, pascal and more.
</p><p>
I had this idea when i came in touch with JOS, when i searched the
deja news archive i came across pete gonzalez's article to
gnu.misc.discuss from 1997/12/24, check out <a href="http://x8.dejanews.com/dnquery.xp?search=thread&amp;filter=<a href="/view.php?topic=7bdb97p6">7bdb97p6</a>20%7b%7b<! page="">7ec</a>20%7b%23*%23%20%26!<! page="">20(sex</a>20%7c%20jobs)%7d%7d%7d%7d&amp;svcclass=dncurrent&amp;threaded=1&amp;ST=PS&amp;CONTEXT=884702839.2076704814&amp;HIT_CONTEXT=884702580.2073297116&amp;HIT_NUM=22&amp;REDO=1&amp;recnum=<! page="">3cPine.LNX.3.95.971224140943.23686B-100000@gimp.jefferson.ml.org</a>3e%231/1">the whole thread</a>.
</p><p>
Basically, he had the same idea, and there was some discussion
going on on that point, read there. The big difference is, that pete
thinks about replacing the JVM, which of course fits not into the
<! page="">JOS</a> concept, but my idea was a gcc for the standard JVM.
</p><p>
I contacted pete via e-mail and told him about the <! page="">JOS</a> project.
</p><p>
Tasks/problems:
<ul> <li> Add a <! page="">JVM</a> byte code description to gcc, so that the <! page="">JVM</a> becomes a valid destination platform for gcc.
<li> Add a java frontend for gcc, allowing the javac language as a valid source language for gcc.
<li> Bring in some (complete?) <! page="">POSIX</a> functionality?
<li> Is the 'dirty' c/c++ pointer handling a problem?
</ul> 
What do you all think about that?
I don't even know if it is possible..
</p><p>
-- <a href="ChristianSchnell.html">ChristianSchnell</a>, 1998/01/13
</p><p>
<hr>
</p><p>
The idea is nice, I also once thought about it, but it's not easy to implement. One of the main problems are really the pointers, in my opinion.
</p><p>
And one comment about the languages <! page="">JOS</a> will be able to support: right now all really important languages (except Visual Basic maybe) compile to Java class files if desired, except C/C++.
</p><p>
-- <a href="MarkusPeter.html">MarkusPeter</a>
</p><p>
<hr>
</p><p>
For more information on languages that compile to Java byte codes see <a href="http://grunge.cs.tu-berlin.de/~tolk/vmlanguages.html">http://grunge.cs.tu-berlin.de/~tolk/vmlanguages.html</a>
</p><p>
-- <a href="IanDavis.html">IanDavis</a>
</p><p>
<hr>
</p><p>
I looked around a little bit and draw the following conclusions (so far, comments/corrections welcome):
</p><p>
<u><b>Java frontend for gcc</b> (.class -> .s)</u><br>
Would allow to have gcc translate <! page="">JVM</a> instructions to native processor code (for all of gccs targets, which are many..), which then would be accessed through the java native interface (JNI).
</p><p>
Cygnus is implementing this, see
<a href=http://www.cygnus.com/news/whitepapers/compiling.html>compiling java for embedded systems</a>. This kind of compiler knows two realizations: as a just-in-time (JIT) or as
a ahead-of-time-compiler.<br>
Cygnus aims at the second, which is a superset of a JIT-compiler and allows pre- and batch-compilation of existing .class files and even .java files (another javac-replacement, its really excellent what these guys are developing there..).
</p><p>
Interesting page from Cygnus for native C/C++-programs intended to run through JNI:
<a href=http://www.cygnus.com/product/javalang/native++.html>Java/C++ integration</a>.
</p><p>
<u><b>Java backend for gcc</b> (.s -> .class)</u><br>
Not possible for all of gccs frontend languages. Especially not for C/C++ due to the assumed memory model in these languages.
</p><p>
The problem is: Suns processor instruction set does not allow to interpret numerical values as address values and vice versa. So standard C-constructs like <tt><i>int x = (int)&foo;</i></tt> simply cannot be expressed with Suns virtual processor instruction set. More detailed (quoted from Cygnuss
<a href= "http://www.cygnus.com/news/whitepapers/compiling.html#sec3_1">compiling java for embedded systems</a>):
</p><p>
<cite>... The executable content of a bytecode file contains a vector of bytecode instructions for each (non-native) method. The bytecodes are instructions for an abstract machine with some local variable registers and a stack used for expression evaluation. (The first few local variables are initialized with the actual parameters.) Each local variable or stack "slot" is a word big enough for either a 32-bit integer, a float, or an object reference (pointer). (Two slots are used for 64-bits doubles and longs.) The slots are not typed; i.e., at one point, a slot might contain an integer value, and, at another point, the same slot might contain an object reference. However, you cannot store an integer in a slot, and then retrieve the same bits re-interpreted as an object reference. Moreover, at any given program point, each slot has a unique type can be determined using static data flow. (The type may be "unassigned", in which case you are not allowed to read the slots value.) These restrictions are part of Java security model, and are enforced by the Java bytecode verifier. We do a similar analysis in jc1, which lets us know for every program point, the current stack pointer, and the type of every local variable and stack slot. ...</cite>
</p><p>
This means for C/C++, that not all constructs can be compiled to <! page="">JVM</a> instructions, a certain subset is - of course - allowed, but who needs limited C/C++?
</p><p>
-- <a href="ChristianSchnell.html">ChristianSchnell</a>, 1998/01/15<br><br></p><!--

<table width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="737b9c">
<tr><td align="CENTER">
<! page="">login</a> or <! page="">new&nbsp;user</a><tr><td>
</table>

!-->
<!-- end BODY page !-->

<hr>

<div align="CENTER">
<table border="0" cellpadding="3" cellspacing="0" width="100%">
<tr>
	<td align="CENTER" colspan="2">
		Content of these pages are owned and copyrighted by the poster.
	</td>
</tr>
<tr>
	<td align="RIGHT" width="50%">
		Hosted by:
	</td>
	<td align="LEFT">
		<a href="http://sourceforge.net/"><img 
			SRC="http://sourceforge.net/sflogo.php?group_id=2376&type=1"
			BORDER=0 HSPACE=0 VSPACE=0></a>
	</td>
</tr>
</table>
</div>
</body>
</html>
