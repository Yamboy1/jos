<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [JOS-Arch] Java VGA driver on linux</TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jewel%40pixie.co.za">
   <LINK REL="Previous"  HREF="000773.html">
   <LINK REL="Next" HREF="000774.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[JOS-Arch] Java VGA driver on linux</H1>
    <B>John Leuner</B> 
    <A HREF="mailto:jewel%40pixie.co.za"
       TITLE="[JOS-Arch] Java VGA driver on linux">jewel@pixie.co.za</A><BR>
    <I>Sat, 01 Jul 2000 01:09:41 -0200 (GMT+2)</I>
    <P><UL>
        <LI> Previous message: <A HREF="000773.html">[JOS-Arch] [boot disk] byte array</A></li>
        <LI> Next message: <A HREF="000774.html">[JOS-Arch] [boot disk] byte array</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#771">[ date ]</a>
              <a href="thread.html#771">[ thread ]</a>
              <a href="subject.html#771">[ subject ]</a>
              <a href="author.html#771">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> &gt; Today I felt like working on some graphics stuff again, so I compiled some
</I>&gt;<i> &gt; native code to allow me to run Thomas Boceks' VGA driver on Linux. 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; I had to do an iopl(3) to allow the linux process to access the IO ports.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Then I telnetted to a linux box and ran the java interpreter on there as
</I>&gt;<i> &gt; root.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; The driver seems to switch the video mode, but I don't see the jos logo as
</I>&gt;<i> &gt; expected (the bitblt routine should show the logo). 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; I suspect the problem may be that the linux graphics drivers are already
</I>&gt;<i> &gt; running to enable the virtual text consoles. They are probably putting 
</I>&gt;<i> &gt; the card in some mode that the driver doesn't expect. Does anyone know how
</I>&gt;<i> &gt; I can disable these consoles, or somehow unload the graphics driver?
</I>&gt;<i> 
</I>&gt;<i> It's also possible that the driver just doesn't work right.  Todd et al
</I>&gt;<i> had stated that it was incredibly slow. 
</I>
No. I have personally tested the driver on an earlier setup (not on Linux)
and it worked consistently. It was slow, but it was also on a 486DX100. 

&gt;<i> I personally am tempted to
</I>&gt;<i> rewrite it in mostly native code, primarily for speed reasons, and also
</I>&gt;<i> because I have sample VGA code in ASM.  This kind of defeats the purpose
</I>&gt;<i> of a Java-based driver, but we all want performance too, right?
</I>
I would like to discourage you from doing that. You would just be
rewriting what has already been done many times. We might as well just
build an environment that supports drivers from an existing OS and use
those. 

With the JIT I'm working on the runtime will be able to generate fast
native code without hand-coding assembler. It will also allow you to code
something in asm if it's really necessary. But writing native JNI-type
code is really not desirable. Invoking those methods has a lot of overhead
and it is a pain to write. 

&gt;<i> 
</I>&gt;<i> &gt; Another question:
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; I have about 3 ATI RageII (mach64) graphics cards and I would love to
</I>&gt;<i> &gt; write some Java drivers to use these. Probably just enabling a 1024x768x16
</I>&gt;<i> &gt; mode would be a great achievement, but I don't really know enough about
</I>&gt;<i> &gt; video hardware to do this easily. 
</I>&gt;<i> 
</I>&gt;<i> Somewhere there has to be information on using VESA modes.  I've looked
</I>&gt;<i> around but haven't found any.  Most newer cards (like the mach64 series)
</I>&gt;<i> use the VESA API, either directly or through an executable BIOS extension.
</I>&gt;<i> It's definitely worth looking into if we want higher resolutions.
</I>
Hmm, do many cards support this? What is the name of the standard?
 
&gt;<i> &gt; I have the source code for the mach64 drivers from XFree86, but I need
</I>&gt;<i> &gt; more background knowledge about how this stuff works. Can someone
</I>&gt;<i> &gt; recommend a book or a web article that would help me out?
</I>&gt;<i> 
</I>&gt;<i> Some libraries are good about having technical information like that, but
</I>&gt;<i> many do not.  I was lucky enough to find a book about EGA/VGA programming
</I>&gt;<i> that has tons of information about the base-level architecture of graphics
</I>&gt;<i> cards.  Unfortunately, chipset-specific stuff is probably not available,
</I>&gt;<i> unless through ATI's website.  Good luck!
</I>
Well I need to get familiar with the kinds of techniques used in this type
computing. So even just understanding how a plain VGA board works will
help me a lot.

John 



</pre>




<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="000773.html">[JOS-Arch] [boot disk] byte array</A></li>
	<LI> Next message: <A HREF="000774.html">[JOS-Arch] [boot disk] byte array</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#771">[ date ]</a>
              <a href="thread.html#771">[ thread ]</a>
              <a href="subject.html#771">[ subject ]</a>
              <a href="author.html#771">[ author ]</a>
         </LI>
       </UL>
</body></html>
