<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [JOS-Kernel] Checkins (also, please read if interested in device-related issues)</TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:jm%40mak.com">
   <LINK REL="Previous"  HREF="000459.html">
   <LINK REL="Next" HREF="000462.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[JOS-Kernel] Checkins (also, please read if interested in device-related issues)</H1>
    <B>John Morrison</B> 
    <A HREF="mailto:jm%40mak.com"
       TITLE="[JOS-Kernel] Checkins (also, please read if interested in device-related issues)">jm@mak.com</A><BR>
    <I>Mon, 15 Nov 1999 07:30:27 -0500</I>
    <P><UL>
        <LI> Previous message: <A HREF="000459.html">[JOS-Kernel] GRUB (was [JOS-Arch] Binary Distribution)</A></li>
        <LI> Next message: <A HREF="000462.html">[JOS-Kernel] Checkins (also, please read if interested in device-related issues)</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#460">[ date ]</a>
              <a href="thread.html#460">[ thread ]</a>
              <a href="subject.html#460">[ subject ]</a>
              <a href="author.html#460">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi;

Well, I got a couple of free minutes, and made some minor changes
(hope I didn't break anything -- please shriek loudly if I did).

(1) I changed common/decaf/scheduler.cc.  There seemed to me to be
some code that complained if an interrupt happened that there was not
a java thread waiting on it.  I got rid of that clause, because I
think that is an OK thing -- not an error.

(2) I had been sitting on changes I had made to
common/nativecode/jbheap.cc, for which I had made an alternative
malloc/free implementation.  I just wanted to get that code into the
repository.  Hopefully, it shouldn't be used (unless you change some
#defines in the file), and thus it shouldn't break anything.  I'll
probably nuke it the next time I touch that file, but ...

(3) I added a new file, common/bytecode/TestSuite.java.  I swept all
the test* methods away from init.* and into TestSuite.*.  Obviously, I
also thus had the change init.java, and also the Makefile in that
directory to add the new file.

This change was important because I would like to start implementing
the &quot;device tree&quot; infrastructure.  Basically, the BIOS scans the
devices in the box at boot time, and is kind enough to leave a record
of what it found in the &quot;BIOS data area.&quot;  I would like to scan this
area from Java (early in the &quot;init&quot; code), and make Java &quot;device tree&quot;
data structures (as JavaOS does) so that we can load the right drivers
for the devices we actually have.  This is the analog to the /dev/*
hierarchy in UNIX.  Hopefully, after this code has finished running,
you'll (or the Java code will) be able to easily figure out what
devices are hanging off the box, and removable and hot-swappable
devices will be handled via a &quot;notification&quot; mechanism.

On a directly related note, there was recently a big discussion on the
Linux kernel lists (I don't monitor these lists, but the Linux weekly
news had a synopsis of the discussion) about how removable media, and
large numbers of networked devices raised hell with the old UNIX-style 
static device hierarchy.  I think they were headed in this general
direction (technically speaking).

As usual, problems to me...

-jm

-- 
==== John Morrison
==== MaK Technologies Inc.
==== 185 Alewife Brook Parkway, Cambridge, MA 02138
==== <A HREF="http://www.mak.com/">http://www.mak.com/</A>
==== vox:617-876-8085 x115
==== fax:617-876-9208
==== <A HREF="mailto:jm@mak.com">jm@mak.com</A>

</pre>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="000459.html">[JOS-Kernel] GRUB (was [JOS-Arch] Binary Distribution)</A></li>
	<LI> Next message: <A HREF="000462.html">[JOS-Kernel] Checkins (also, please read if interested in device-related issues)</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#460">[ date ]</a>
              <a href="thread.html#460">[ thread ]</a>
              <a href="subject.html#460">[ subject ]</a>
              <a href="author.html#460">[ author ]</a>
         </LI>
       </UL>
</body></html>
