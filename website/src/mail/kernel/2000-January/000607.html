<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [JOS-Kernel] JJOS Long Operation Patch</TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:hilarycheng%40usa.net">
   <LINK REL="Previous"  HREF="000613.html">
   <LINK REL="Next" HREF="000612.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[JOS-Kernel] JJOS Long Operation Patch</H1>
    <B>Hilary Cheng</B> 
    <A HREF="mailto:hilarycheng%40usa.net"
       TITLE="[JOS-Kernel] JJOS Long Operation Patch">hilarycheng@usa.net</A><BR>
    <I>Fri, 7 Jan 2000 22:23:47 +0800</I>
    <P><UL>
        <LI> Previous message: <A HREF="000613.html">[JOS-Kernel] CVS: etherboot &amp; cursor control</A></li>
        <LI> Next message: <A HREF="000612.html">[JOS-Kernel] CVS: etherboot &amp; cursor control</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#607">[ date ]</a>
              <a href="thread.html#607">[ thread ]</a>
              <a href="subject.html#607">[ subject ]</a>
              <a href="author.html#607">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>This is a multi-part message in MIME format.

------=_NextPart_000_0191_01BF595D.DD919740
Content-Type: multipart/alternative;
	boundary=&quot;----=_NextPart_001_0192_01BF595D.DD919740&quot;


------=_NextPart_001_0192_01BF595D.DD919740
Content-Type: text/plain;
	charset=&quot;big5&quot;
Content-Transfer-Encoding: quoted-printable

Hi All,

    I have made a patch to Long Operation of JJOS (Well It is not a =
patch, I just wrote a=20
library). Currently, These Operation are implemented.

xor
or
and
add
sub
mul
div
mod
shr
shl
neg

Please have look at it.

Regards,

Hilary

------=_NextPart_001_0192_01BF595D.DD919740
Content-Type: text/html;
	charset=&quot;big5&quot;
Content-Transfer-Encoding: quoted-printable

&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD W3 HTML//EN&quot;&gt;
&lt;HTML&gt;&lt;HEAD&gt;
&lt;META content=3Dtext/html;charset=3Dbig5 http-equiv=3DContent-Type&gt;
&lt;STYLE&gt;&lt;/STYLE&gt;

&lt;META content=3D'&quot;MSHTML 5.00.0910.1309&quot;' name=3DGENERATOR&gt;&lt;/HEAD&gt;
&lt;BODY bgColor=3D#d8d0c8&gt;
&lt;DIV&gt;&lt;FONT size=3D2&gt;&lt;FONT face=3DArial&gt;Hi All,&lt;/FONT&gt;&lt;/FONT&gt;&lt;/DIV&gt;
&lt;DIV&gt;&amp;nbsp;&lt;/DIV&gt;
&lt;DIV&gt;&lt;FONT size=3D2&gt;&lt;FONT face=3DArial&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; I have made a =
patch to=20
Long Operation of JJOS (Well It is not a patch, I just wrote a=20
&lt;/FONT&gt;&lt;/FONT&gt;&lt;/DIV&gt;
&lt;DIV&gt;&lt;FONT size=3D2&gt;&lt;FONT face=3DArial&gt;library). Currently, These =
Operation are=20
implemented.&lt;/FONT&gt;&lt;/FONT&gt;&lt;/DIV&gt;
&lt;DIV&gt;&amp;nbsp;&lt;/DIV&gt;
&lt;DIV&gt;&lt;FONT size=3D2&gt;&lt;FONT face=3DArial&gt;xor&lt;/FONT&gt;&lt;/FONT&gt;&lt;/DIV&gt;
&lt;DIV&gt;&lt;FONT size=3D2&gt;&lt;FONT face=3DArial&gt;or&lt;/FONT&gt;&lt;/FONT&gt;&lt;/DIV&gt;
&lt;DIV&gt;&lt;FONT size=3D2&gt;&lt;FONT face=3DArial&gt;and&lt;/FONT&gt;&lt;/FONT&gt;&lt;/DIV&gt;
&lt;DIV&gt;&lt;FONT size=3D2&gt;&lt;FONT face=3DArial&gt;add&lt;/FONT&gt;&lt;/FONT&gt;&lt;/DIV&gt;
&lt;DIV&gt;&lt;FONT size=3D2&gt;&lt;FONT face=3DArial&gt;sub&lt;/FONT&gt;&lt;/FONT&gt;&lt;/DIV&gt;
&lt;DIV&gt;&lt;FONT size=3D2&gt;&lt;FONT face=3DArial&gt;mul&lt;/FONT&gt;&lt;/FONT&gt;&lt;/DIV&gt;
&lt;DIV&gt;&lt;FONT size=3D2&gt;&lt;FONT face=3DArial&gt;div&lt;/FONT&gt;&lt;/FONT&gt;&lt;/DIV&gt;
&lt;DIV&gt;&lt;FONT size=3D2&gt;&lt;FONT face=3DArial&gt;mod&lt;/FONT&gt;&lt;/FONT&gt;&lt;/DIV&gt;
&lt;DIV&gt;&lt;FONT size=3D2&gt;&lt;FONT face=3DArial&gt;shr&lt;/FONT&gt;&lt;/FONT&gt;&lt;/DIV&gt;
&lt;DIV&gt;&lt;FONT size=3D2&gt;&lt;FONT face=3DArial&gt;shl&lt;/FONT&gt;&lt;/FONT&gt;&lt;/DIV&gt;
&lt;DIV&gt;&lt;FONT size=3D2&gt;&lt;FONT face=3DArial&gt;neg&lt;/FONT&gt;&lt;/FONT&gt;&lt;/DIV&gt;
&lt;DIV&gt;&amp;nbsp;&lt;/DIV&gt;
&lt;DIV&gt;&lt;FONT size=3D2&gt;&lt;FONT face=3DArial&gt;Please have look at =
it.&lt;/FONT&gt;&lt;/FONT&gt;&lt;/DIV&gt;
&lt;DIV&gt;&amp;nbsp;&lt;/DIV&gt;
&lt;DIV&gt;&lt;FONT size=3D2&gt;&lt;FONT face=3DArial&gt;Regards,&lt;/FONT&gt;&lt;/FONT&gt;&lt;/DIV&gt;
&lt;DIV&gt;&amp;nbsp;&lt;/DIV&gt;
&lt;DIV&gt;&lt;FONT face=3DArial size=3D2&gt;Hilary&lt;/FONT&gt;&lt;/DIV&gt;&lt;/BODY&gt;&lt;/HTML&gt;

------=_NextPart_001_0192_01BF595D.DD919740--

------=_NextPart_000_0191_01BF595D.DD919740
Content-Type: application/octet-stream;
	name=&quot;long64.h&quot;
Content-Transfer-Encoding: quoted-printable
Content-Disposition: attachment;
	filename=&quot;long64.h&quot;

/*=0A=
* The contents of this file are subject to the JJOS Public License=0A=
* Version 0.0 (the &quot;License&quot;); you may not use this file except in=0A=
* compliance with the License.  You may obtain a copy of the License=0A=
* at <A HREF="http://www.jos.org/=0A=">http://www.jos.org/=0A=</A>
*=0A=
* Software distributed under the License is distributed on an &quot;AS IS&quot;=0A=
* basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See=0A=
* the License for the specific language governing rights and limitations=0A=
* under the License.=0A=
*=0A=
* The Original Code is JJOS code, released August, 1999.=0A=
*=0A=
* The Initial Developer of the Original Code is Hilary Cheng.=0A=
* Portions created by Hilary Cheng are Copyright (C) 1999.=0A=
* All rights reserved.=0A=
*=0A=
* Contributor(s):=0A=
*=0A=
*/=0A=
=0A=
// value =3D value &lt;&lt; 1=0A=
void _lshl(jlong *value, int shift);=0A=
=0A=
// value =3D value &gt;&gt; shift=0A=
void _lshr(jlong *value, int shift);=0A=
=0A=
// c =3D a + b=0A=
void _ladd(jlong *c, jlong *a, jlong *b);=0A=
=0A=
// value =3D -value;=0A=
void _lneg(jlong *value);=0A=
=0A=
// c =3D a - b=0A=
void _lsub(jlong *c, jlong *a, jlong *b);=0A=
=0A=
// c =3D a &amp; b=0A=
void _land(jlong *c, jlong *a, jlong *b);=0A=
=0A=
// c =3D a ^ b=0A=
void _lxor(jlong *c, jlong *a, jlong *b);=0A=
=0A=
// c =3D a | b=0A=
void _lor(jlong *c, jlong *a, jlong *b);=0A=
=0A=
// result =3D jl2 / jl1;=0A=
void _ldiv(jlong *jl1, jlong *jl2, jlong *result);=0A=
=0A=
// lresult =3D jl2 % jl1;=0A=
void _lrem(jlong *jl1, jlong *jl2, jlong *lresult);=0A=
=0A=
// result =3D jl1 * jl2=0A=
void _lmul(jlong *jl1, jlong *jl2, jlong *result);=0A=
=0A=

------=_NextPart_000_0191_01BF595D.DD919740
Content-Type: application/octet-stream;
	name=&quot;long64.c&quot;
Content-Transfer-Encoding: quoted-printable
Content-Disposition: attachment;
	filename=&quot;long64.c&quot;

/*=0A=
* The contents of this file are subject to the JJOS Public License=0A=
* Version 0.0 (the &quot;License&quot;); you may not use this file except in=0A=
* compliance with the License.  You may obtain a copy of the License=0A=
* at <A HREF="http://www.jos.org/=0A=">http://www.jos.org/=0A=</A>
*=0A=
* Software distributed under the License is distributed on an &quot;AS IS&quot;=0A=
* basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.  See=0A=
* the License for the specific language governing rights and limitations=0A=
* under the License.=0A=
*=0A=
* The Original Code is JJOS code, released August, 1999.=0A=
*=0A=
* The Initial Developer of the Original Code is Hilary Cheng.=0A=
* Portions created by Hilary Cheng are Copyright (C) 1999.=0A=
* All rights reserved.=0A=
*=0A=
* Contributor(s):=0A=
*=0A=
*/=0A=
=0A=
#include &quot;java_object.h&quot;=0A=
#include &quot;long64.h&quot;=0A=
=0A=
// value =3D value &lt;&lt; 1=0A=
void _lshl(jlong *value, int shift) {=0A=
  int sign =3D value-&gt;myHigh32 &amp; 0x80000000;=0A=
  int lastbit =3D 0;=0A=
  if (shift &lt;=3D 0) return;=0A=
  for (int c=3D0;c &lt; shift;c++) {=0A=
    lastbit =3D value-&gt;myLow32 &amp; 0x80000000;=0A=
    value-&gt;myHigh32 =3D value-&gt;myHigh32 &lt;&lt; 1;=0A=
    value-&gt;myLow32 =3D value-&gt;myLow32 &lt;&lt; 1;=0A=
    value-&gt;myHigh32 |=3D sign;=0A=
    if (lastbit) value-&gt;myHigh32 |=3D 1;=0A=
  }=0A=
}=0A=
=0A=
// value =3D value &gt;&gt; shift=0A=
void _lshr(jlong *value, int shift) {=0A=
  int sign =3D value-&gt;myHigh32 &amp; 0x80000000;=0A=
  int lastbit =3D 0;=0A=
  if (shift &lt;=3D 0) return;=0A=
  for (int c=3D0;c &lt; shift;c++) {=0A=
    lastbit =3D value-&gt;myHigh32 &amp; 1;=0A=
    value-&gt;myHigh32 =3D value-&gt;myHigh32 &gt;&gt; 1;=0A=
    value-&gt;myLow32 =3D value-&gt;myLow32 &gt;&gt; 1;=0A=
    value-&gt;myHigh32 |=3D sign;=0A=
    if (lastbit) value-&gt;myLow32 |=3D 0x80000000;=0A=
  }=0A=
}=0A=
=0A=
// c =3D a + b=0A=
void _ladd(jlong *c, jlong *a, jlong *b) {=0A=
  int carry =3D 0;=0A=
  jlong temp;=0A=
  temp.myLow32 =3D c-&gt;myLow32; temp.myHigh32 =3D c-&gt;myHigh32;=0A=
  temp.myLow32 =3D a-&gt;myLow32 + b-&gt;myLow32;=0A=
  carry =3D (a-&gt;myLow32 &gt; temp.myLow32) | (b-&gt;myLow32 &gt; temp.myLow32);=0A=
  carry =3D carry ? 1 : 0;=0A=
  temp.myHigh32 =3D a-&gt;myHigh32 + b-&gt;myHigh32 + carry;=0A=
  c-&gt;myHigh32 =3D temp.myHigh32; c-&gt;myLow32 =3D temp.myLow32;=0A=
}=0A=
=0A=
// value =3D -value;=0A=
void _lneg(jlong *value) {=0A=
  jlong constant_one, copy;=0A=
=0A=
  constant_one.myHigh32 =3D 0; constant_one.myLow32 =3D 1;=0A=
  value-&gt;myLow32 =3D ~value-&gt;myLow32;=0A=
  copy.myLow32 =3D value-&gt;myLow32;=0A=
  value-&gt;myHigh32 =3D ~value-&gt;myHigh32;=0A=
  copy.myHigh32 =3D value-&gt;myHigh32;=0A=
  _ladd(value, &amp;copy, &amp;constant_one);=0A=
}=0A=
=0A=
// c =3D a - b=0A=
void _lsub(jlong *c, jlong *a, jlong *b) {=0A=
  jlong temp;=0A=
  temp.myHigh32 =3D b-&gt;myHigh32;=0A=
  temp.myLow32 =3D b-&gt;myLow32;=0A=
  _lneg(&amp;temp);=0A=
  _ladd(c, a, &amp;temp);=0A=
}=0A=
=0A=
// c =3D a &amp; b=0A=
void _land(jlong *c, jlong *a, jlong *b) {=0A=
  c-&gt;myLow32 =3D a-&gt;myLow32 &amp; b-&gt;myLow32;=0A=
  c-&gt;myHigh32 =3D a-&gt;myHigh32 &amp; b-&gt;myHigh32;=0A=
}=0A=
=0A=
// c =3D a ^ b=0A=
void _lxor(jlong *c, jlong *a, jlong *b) {=0A=
  c-&gt;myLow32 =3D a-&gt;myLow32 ^ b-&gt;myLow32;=0A=
  c-&gt;myHigh32 =3D a-&gt;myHigh32 ^ b-&gt;myHigh32;=0A=
}=0A=
=0A=
// c =3D a | b=0A=
void _lor(jlong *c, jlong *a, jlong *b) {=0A=
  c-&gt;myLow32 =3D a-&gt;myLow32 | b-&gt;myLow32;=0A=
  c-&gt;myHigh32 =3D a-&gt;myHigh32 | b-&gt;myHigh32;=0A=
}=0A=
=0A=
// result =3D jl2 / jl1;=0A=
void _ldiv(jlong *jl1, jlong *jl2, jlong *result)=0A=
{=0A=
  jlong jl1temp, jl2temp, jl3, scan, temp;=0A=
  int counter =3D 0;=0A=
=0A=
  jl1temp.myHigh32 =3D jl1-&gt;myHigh32;=0A=
  jl1temp.myLow32 =3D jl1-&gt;myLow32;=0A=
  jl2temp.myHigh32 =3D jl2-&gt;myHigh32;=0A=
  jl2temp.myLow32 =3D jl2-&gt;myLow32;=0A=
  scan.myHigh32 =3D 0x40000000;=0A=
  scan.myLow32 =3D 0;=0A=
  result-&gt;myHigh32 =3D 0; result-&gt;myLow32 =3D 0;=0A=
=0A=
  if (jl1-&gt;myHigh32 &amp; 0x80000000) _lneg(&amp;jl1temp);=0A=
  if (jl2-&gt;myHigh32 &amp; 0x80000000) _lneg(&amp;jl2temp);=0A=
=0A=
  while (temp.myHigh32 =3D=3D 0 &amp;&amp; temp.myLow32 =3D=3D 0) {=0A=
    _land(&amp;temp, &amp;jl1temp, &amp;scan);=0A=
    if (temp.myHigh32 =3D=3D 0 &amp;&amp; temp.myLow32 =3D=3D 0) {=0A=
      _lshr(&amp;scan, 1); counter++;=0A=
    }=0A=
  }=0A=
=0A=
  _lshl(&amp;jl1temp, counter);=0A=
=0A=
  for (int loop=3D0;loop &lt; counter + 1;loop++) {=0A=
    _lshl(result, 1);=0A=
    _lsub(&amp;temp, &amp;jl2temp, &amp;jl1temp);=0A=
    if (!(temp.myHigh32 &amp; 0x80000000)) {=0A=
      jl2temp.myHigh32 =3D temp.myHigh32;=0A=
      jl2temp.myLow32 =3D temp.myLow32;=0A=
      result-&gt;myLow32 |=3D 1;=0A=
    }=0A=
    _lshr(&amp;jl1temp, 1);=0A=
  }=0A=
=0A=
  if ((jl1-&gt;myHigh32 &amp; 0x80000000) ^ (jl2-&gt;myHigh32 &amp; 0x80000000)) {=0A=
    _lneg(result);=0A=
  }=0A=
}=0A=
=0A=
// lresult =3D jl2 % jl1;=0A=
void _lrem(jlong *jl1, jlong *jl2, jlong *lresult)=0A=
{=0A=
  jlong jl1temp, jl2temp, jl3, scan, temp;=0A=
  jlong result, lresult;=0A=
  int counter =3D 0;=0A=
=0A=
  jl1temp.myHigh32 =3D jl1-&gt;myHigh32;=0A=
  jl1temp.myLow32 =3D jl1-&gt;myLow32;=0A=
  jl2temp.myHigh32 =3D jl2-&gt;myHigh32;=0A=
  jl2temp.myLow32 =3D jl2-&gt;myLow32;=0A=
  scan.myHigh32 =3D 0x40000000;=0A=
  scan.myLow32 =3D 0;=0A=
  result.myHigh32 =3D 0; result.myLow32 =3D 0;=0A=
  lresult-&gt;myHigh32 =3D 0; lresult-&gt;myLow32 =3D 0;=0A=
=0A=
  if (jl1.myHigh32 &amp; 0x80000000) _lneg(&amp;jl1temp);=0A=
  if (jl2.myHigh32 &amp; 0x80000000) _lneg(&amp;jl2temp);=0A=
=0A=
  while (temp.myHigh32 =3D=3D 0 &amp;&amp; temp.myLow32 =3D=3D 0) {=0A=
    _land(&amp;temp, &amp;jl1temp, &amp;scan);=0A=
    if (temp.myHigh32 =3D=3D 0 &amp;&amp; temp.myLow32 =3D=3D 0) {=0A=
      _lshr(&amp;scan, 1); counter++;=0A=
    }=0A=
  }=0A=
=0A=
  _lshl(&amp;jl1temp, counter);=0A=
=0A=
  for (int loop=3D0;loop &lt; counter + 1;loop++) {=0A=
    _lsub(&amp;temp, &amp;jl2temp, &amp;jl1temp);=0A=
    _lshl(&amp;result, 1);=0A=
    if (!(temp.myHigh32 &amp; 0x80000000)) {=0A=
      jl2temp.myHigh32 =3D temp.myHigh32;=0A=
      jl2temp.myLow32 =3D temp.myLow32;=0A=
      lresult-&gt;myHigh32 =3D temp.myHigh32;=0A=
      lresult-&gt;myLow32 =3D temp.myLow32;=0A=
    }=0A=
    _lshr(&amp;jl1temp, 1);=0A=
  }=0A=
=0A=
  if (jl2.myHigh32 &amp; 0x80000000) _lneg(lresult);=0A=
      =0A=
  if ((jl1.myHigh32 &amp; 0x80000000) ^ (jl2.myHigh32 &amp; 0x80000000)) {=0A=
    _lneg(result);=0A=
  }=0A=
}=0A=
=0A=
// result =3D jl1 * jl2=0A=
void _lmul(jlong *jl1, jlong *jl2, jlong *result)=0A=
{=0A=
  jlong jl1temp, jl2temp, jl3, scan, temp;=0A=
  int counter =3D 0;=0A=
=0A=
  jl1temp.myHigh32 =3D jl1-&gt;myHigh32;=0A=
  jl1temp.myLow32 =3D jl1-&gt;myLow32;=0A=
  jl2temp.myHigh32 =3D jl2-&gt;myHigh32;=0A=
  jl2temp.myLow32 =3D jl2-&gt;myLow32;=0A=
  scan.myHigh32 =3D 0; scan.myLow32 =3D 1;=0A=
  result.myHigh32 =3D 0; result.myLow32 =3D 0;=0A=
=0A=
  if (jl1.myHigh32 &amp; 0x80000000) _lneg(&amp;jl1temp);=0A=
  if (jl2.myHigh32 &amp; 0x80000000) _lneg(&amp;jl2temp);=0A=
=0A=
  counter =3D 0;=0A=
  while (scan.myHigh32 !=3D 0x80000000 &amp;&amp; counter &lt; 63) {=0A=
    _land(&amp;temp, &amp;jl2temp, &amp;scan);=0A=
    if (!(temp.myHigh32 =3D=3D 0 &amp;&amp; temp.myLow32 =3D=3D 0)) {=0A=
	_ladd(result, result, &amp;jl1temp);=0A=
    }=0A=
    counter++; _lshl(&amp;scan, 1);=0A=
    _lshl(&amp;jl1temp, 1);=0A=
  }=0A=
=0A=
  if ((jl1.myHigh32 &amp; 0x80000000) ^ (jl2.myHigh32 &amp; 0x80000000)) {=0A=
    _lneg(result);=0A=
  }=0A=
}=0A=

------=_NextPart_000_0191_01BF595D.DD919740
Content-Type: text/plain;
	name=&quot;patch_long.txt&quot;
Content-Transfer-Encoding: quoted-printable
Content-Disposition: attachment;
	filename=&quot;patch_long.txt&quot;

bool frame::lneg(exception_to_throw &amp;e)=0A=
{=0A=
  TRACE((&quot;lneg&quot;));=0A=
  jlong jl =3D op_stack.pop_jlong();=0A=
  jlong jlneg;=0A=
=0A=
  jlneg.myHigh32 =3D jl.myHigh32;=0A=
  jlneg.myLow32 =3D jl.myLow32;=0A=
=0A=
  _lneg(&amp;jlneg);=0A=
  op_stack.push_jlong(jl);=0A=
  return(true);=0A=
}=0A=
=0A=
bool frame::ladd(exception_to_throw &amp;e)=0A=
{=0A=
  TRACE((&quot;ladd&quot;));=0A=
  jlong jl1 =3D op_stack.pop_jlong();=0A=
  jlong jl2 =3D op_stack.pop_jlong();=0A=
  jlong jl3;=0A=
=0A=
  _ladd(&amp;jl3, &amp;jl1, &amp;jl2);=0A=
=0A=
  op_stack.push_jlong(jl3);=0A=
  return(true);=0A=
}=0A=
=0A=
bool frame::lsub(exception_to_throw &amp;e)=0A=
{=0A=
  TRACE((&quot;lsub&quot;));=0A=
  jlong jl1 =3D op_stack.pop_jlong();=0A=
  jlong jl2 =3D op_stack.pop_jlong();=0A=
  jlong jl3;=0A=
=0A=
  _lsub(&amp;jl3, &amp;jl1, &amp;jl2);=0A=
=0A=
  op_stack.push_jlong(jl3);=0A=
  return(true);=0A=
}=0A=
=0A=
bool frame::lmul(exception_to_throw &amp;e)=0A=
{=0A=
  TRACE((&quot;lmul&quot;));=0A=
  jlong jl1 =3D op_stack.pop_jlong();=0A=
  jlong jl2 =3D op_stack.pop_jlong();=0A=
  jlong jl3;=0A=
=0A=
  _lmul(&amp;jl3, &amp;jl1, &amp;jl2);=0A=
=0A=
  op_stack.push_jlong(jl3);=0A=
  return(true);=0A=
}=0A=
=0A=
bool frame::ldiv(exception_to_throw &amp;e)=0A=
{=0A=
  TRACE((&quot;ldiv&quot;));=0A=
  jlong jl1 =3D op_stack.pop_jlong();=0A=
  jlong jl2 =3D op_stack.pop_jlong();=0A=
  jlong jl3;=0A=
=0A=
  _ldiv(&amp;jl3, &amp;jl1, &amp;jl2);=0A=
=0A=
  op_stack.push_jlong(jl3);=0A=
  return(true);=0A=
}=0A=
=0A=
bool frame::lrem(exception_to_throw &amp;e)=0A=
{=0A=
  TRACE((&quot;lrem&quot;));=0A=
  jlong jl1 =3D op_stack.pop_jlong();=0A=
  jlong jl2 =3D op_stack.pop_jlong();=0A=
  jlong jl3;=0A=
=0A=
  _lrem(&amp;jl3, &amp;jl1, &amp;jl2);=0A=
=0A=
  op_stack.push_jlong(jl3);=0A=
  return(true);=0A=
}=0A=
=0A=
bool frame::lshr(exception_to_throw &amp;e)=0A=
{=0A=
  TRACE((&quot;lshr&quot;));=0A=
  jint shift =3D op_stack.pop_jint();=0A=
  jlong jl =3D op_stack.pop_jlong();=0A=
//  jlong jl_shifted =3D jl &gt;&gt; shift;=0A=
  jlong jl_shifted;=0A=
=0A=
  jl_shifted.myHigh32 =3D jl.myHigh32;=0A=
  jl_shifted.myLow32 =3D jl.myLow32;=0A=
=0A=
  _lshr(&amp;jl_shifted, shift);=0A=
=0A=
  op_stack.push_jlong(jl_shifted);=0A=
  return(true);=0A=
}=0A=
=0A=
bool frame::lshl(exception_to_throw &amp;e)=0A=
{=0A=
  TRACE((&quot;lshl&quot;));=0A=
  jint shift =3D op_stack.pop_jint();=0A=
  jlong jl =3D op_stack.pop_jlong();=0A=
//  jlong jl_shifted =3D jl &gt;&gt; shift;=0A=
  jlong jl_shifted;=0A=
=0A=
  jl_shifted.myHigh32 =3D jl.myHigh32;=0A=
  jl_shifted.myLow32 =3D jl.myLow32;=0A=
=0A=
  _lshl(&amp;jl_shifted, shift);=0A=
=0A=
  op_stack.push_jlong(jl_shifted);=0A=
  return(true);=0A=
}=0A=
=0A=
bool frame::lor(exception_to_throw &amp;e)=0A=
{=0A=
  TRACE((&quot;lor&quot;));=0A=
  jlong jl1 =3D op_stack.pop_jlong();=0A=
  jlong jl2 =3D op_stack.pop_jlong();=0A=
  jlong jl3;=0A=
=0A=
  _lor(&amp;jl3, &amp;jl1, &amp;jl2);=0A=
=0A=
  op_stack.push_jlong(jl3);=0A=
  return(true);=0A=
}=0A=
=0A=
bool frame::land(exception_to_throw &amp;e)=0A=
{=0A=
  TRACE((&quot;land&quot;));=0A=
  jlong jl1 =3D op_stack.pop_jlong();=0A=
  jlong jl2 =3D op_stack.pop_jlong();=0A=
  jlong jl3;=0A=
=0A=
  _land(&amp;jl3, &amp;jl1, &amp;jl2);=0A=
=0A=
  op_stack.push_jlong(jl3);=0A=
  return(true);=0A=
}=0A=
=0A=
bool frame::lxor(exception_to_throw &amp;e)=0A=
{=0A=
  TRACE((&quot;lxor&quot;));=0A=
  jlong jl1 =3D op_stack.pop_jlong();=0A=
  jlong jl2 =3D op_stack.pop_jlong();=0A=
  jlong jl3;=0A=
=0A=
  _lxor(&amp;jl3, &amp;jl1, &amp;jl2);=0A=
=0A=
  op_stack.push_jlong(jl3);=0A=
  return(true);=0A=
}
------=_NextPart_000_0191_01BF595D.DD919740--


</pre>









<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="000613.html">[JOS-Kernel] CVS: etherboot &amp; cursor control</A></li>
	<LI> Next message: <A HREF="000612.html">[JOS-Kernel] CVS: etherboot &amp; cursor control</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#607">[ date ]</a>
              <a href="thread.html#607">[ thread ]</a>
              <a href="subject.html#607">[ subject ]</a>
              <a href="author.html#607">[ author ]</a>
         </LI>
       </UL>
</body></html>
