<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [JOS-Admin] SWAT Team</TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:DearWebby%40webby.com">
   <LINK REL="Previous"  HREF="000130.html">
   <LINK REL="Next" HREF="000135.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[JOS-Admin] SWAT Team</H1>
    <B>Dear Webby</B> 
    <A HREF="mailto:DearWebby%40webby.com"
       TITLE="[JOS-Admin] SWAT Team">DearWebby@webby.com</A><BR>
    <I>Mon, 09 Aug 1999 12:52:10 -0700</I>
    <P><UL>
        <LI> Previous message: <A HREF="000130.html">[JOS-Admin] SWAT Team</A></li>
        <LI> Next message: <A HREF="000135.html">[JOS-Admin] wiki.jos.org &amp; some thoughts.</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#131">[ date ]</a>
              <a href="thread.html#131">[ thread ]</a>
              <a href="subject.html#131">[ subject ]</a>
              <a href="author.html#131">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Clark
At 10:00 AM 8/9/99 Monday , you wrote:
&gt;<i>
</I>&gt;<i>Helmut, what Gilbert wrote here was very 
</I>&gt;<i>good.  Could you please comment?
</I>&gt;<i>
</I>&gt;<i>Clark
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>On Thu, 5 Aug 1999, Gilbert Carl Herschberger II wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> At 07:43 AM 8/5/99 -0500, you wrote:
</I>&gt;&gt;<i> &gt;Helmut,
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt;If you will tell me at what time all of this happenned...
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Late Sunday afternoon (4:00pm EDT), wiki was up and running. By Monday
</I>&gt;&gt;<i> morning (10:00am EDT), it displayed only a &quot;forbidden&quot; message. Thinking
</I>&gt;&gt;<i> that it was a temporary Internet glitch, I did not respond immediately.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Helmut should know when he changed the attribute of the CGI script. Helmut?
</I>&gt;&gt;<i> 
</I>wiki went nuts on Monday that week, at 1:30-1:40 PM EST (machine time)
Permissions were changed then to restore normal operation to the rest of
the server.

&gt;&gt;<i> This matches your analysis that a web-bot found the link to a search page
</I>&gt;&gt;<i> or all pages link _and_ started worming its way through every page on
</I>wiki. 
&gt;&gt;<i> 
</I>
No. A web-bot can not make cgi calls. A web bot only READS.

&gt;&gt;<i> &gt;02 Aug: ~15000
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> 15,000 requests is a *lot* of requests. All those requests are requests
</I>&gt;&gt;<i> from the outside, right? Those requests could not be performed from within
</I>&gt;&gt;<i> wiki. It could not have been a bug in our wiki script.
</I>&gt;&gt;<i> 
</I>
No matter whether it was a bug or accidental or malicious goofing around, 
the calls for your view and review scripts (or whatever they were, I can't
remember now)
were coming from inside wiki. 
I don't know whether they were generated BY wiki, or whether they were
allowed to enter the system THROUGH the wiki interface. All I know is that
the processor was called from wiki in a way that can not be tolerated.


&gt;&gt;<i> Helmut did the right thing, shutting down wiki the way he did. By changing
</I>&gt;&gt;<i> the attributes from execute to read-only, the wiki CGI script cannot be
</I>&gt;&gt;<i> executed. The web-bot started getting &quot;forbidden&quot; pages instead of pages
</I>&gt;&gt;<i> (with more links).
</I>&gt;&gt;<i> 
</I>
Forget the web-bot theory. Web-bots read content directly, they don't put
on glasses and generate cute HTML pages, which would hide the meta stuff
that they are primarily interested in.

&gt;&gt;<i> Helmut did the right thing, keeping wiki shut down until we understand what
</I>&gt;&gt;<i> happened. We are getting closer to understanding what happened, I think.
</I>&gt;&gt;<i> Has anyone checked to make certain that robots.txt is up-to-date? It should
</I>&gt;&gt;<i> have been updated concurrent with the search features. Otherwise, it was
</I>&gt;&gt;<i> just a matter of time before a web-bot got carried away with those search
</I>&gt;&gt;<i> pages.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> And another thing. Because Helmut changed the attribute from execute to
</I>&gt;&gt;<i> read-only, we know it was probably not a run-away CGI script. A CGI program
</I>&gt;&gt;<i> that was already running would have kept on running even after the file
</I>&gt;&gt;<i> attribute was changed. Wiki doesn't need to use recursive calls to a CGI
</I>&gt;&gt;<i> script, like other websites do.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> &gt;From the log, do we know where those request *came from*? I wouldn't be
</I>&gt;&gt;<i> surprised if 14,500 requests came from one IP address.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> This may be an accidental &quot;denial of service&quot; attack. The HTTP server
</I>&gt;&gt;<i> should pose limit the number of requests coming from a single IP address.
</I>&gt;&gt;<i> Many sites limit requests from unknown IP addresses to 300 per hour, which
</I>&gt;&gt;<i> should not get in the way of human browsers. For known IP addresses, like
</I>
&gt;&gt;<i> friendly web-bots, the limit varies based on time-of-day. This is a HTTP
</I>&gt;&gt;<i> service responsibility, neither CGI's or wiki's.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> 
</I>
300 per hour ?????????????
Forget it. You can do that on your PC.

When we can use scripts to blast out a newsletter to 200 000 subscribers
without affecting the load, or generate a Million multimedia postcards in a
day with Java and pix and music and multiple text inclusions, then why
should we restrict normal operation to everybody because ONE client has a
flakey script or insecure access to their executables ?

Keep in mind that what we do with the cards networks is like a distributed
wiki with a few extra dimensions and on a much larger scale. 
Imagine 16 000 individual wiki sites all using a central engine and central
database that allows up to 999 simultaneous users.

The users compose files by choosing Java applets, pictures, music, text
inclusion files, and they add free-form text and HTML, and they fill out a
bunch of fields which are checked for syntax and validity. Then the
composed page is generated by pulling together all the specified components
and either further edited or &quot;submitted&quot;. If submitted, a database entry is
made that will allow that page to be re-generated, then a password is
generated that has the date, time and origin encrypted into it and
retrieval info is sent to from one up to 25 people simultaneously, unless a
delayed notification is specified. If delayed notification is specified the
retrieval info is sent on that specified date. When a recipient clicks on
the retrieval link that has the password built in, he jumps directly to
that page which is then generated on the fly from the database entry. 

That generated page usually contains material which was not yet available
at the time the card was composed, for example the daily horoscope. If
&quot;Aries&quot; was specified when the card was created a month ago, only the
current Aries horoscope of the day on which the card is retrieved will be
scrolled into the page with a Java text scroller. 

If we can run SIXTEEN THOUSAND multimedia wikis simultaneously, some of
them with over 20 000 users per day,  without causing a load problem,
...........  then maybe it is time you guys used this occasion to do a
major overhaul on yours. 

Helmut


&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> Admin maillist  -  <A HREF="mailto:Admin@jos.org">Admin@jos.org</A>
</I>&gt;&gt;<i> <A HREF="http://jos.org/mailman/listinfo/admin">http://jos.org/mailman/listinfo/admin</A>
</I>&gt;&gt;<i> 
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>_______________________________________________
</I>&gt;<i>Admin maillist  -  <A HREF="mailto:Admin@jos.org">Admin@jos.org</A>
</I>&gt;<i><A HREF="http://jos.org/mailman/listinfo/admin">http://jos.org/mailman/listinfo/admin</A>
</I>&gt;<i> 
</I>DearWebby
(Helmut)

The Cardmaster's MidSummer Madness World Championship is under way
You can now vote at

<A HREF="http://cards.webby.com">http://cards.webby.com</A>
----------------------------------------------------------------------------
------
Webby, Inc  Web Marketing and high traffic web hosting
Internet postcards and other effective marketing software

</pre>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI> Previous message: <A HREF="000130.html">[JOS-Admin] SWAT Team</A></li>
	<LI> Next message: <A HREF="000135.html">[JOS-Admin] wiki.jos.org &amp; some thoughts.</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#131">[ date ]</a>
              <a href="thread.html#131">[ thread ]</a>
              <a href="subject.html#131">[ subject ]</a>
              <a href="author.html#131">[ author ]</a>
         </LI>
       </UL>
</body></html>
