<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 FINAL//EN">
<HTML>
  <HEAD>
    <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=ISO-8859-1">
    <TITLE>EmbeddedURIs.Imported @ jos.sf.net</TITLE>
  </HEAD>

<BODY BGCOLOR="#FFFFFF">

<!-- The FORM encloses the entire header, because it renders better that way. !-->
<FORM ACTION="/jump.php"><input type="hidden" name="PHPSESSID" value="6a7557917de16789debbf2feaa4cb869" />

<!-- The JOS logo. !-->
<TABLE BORDER="0" CELLSPACING="0" CELLPADDING="3" WIDTH="100%">
<TR VALIGN="TOP" ALIGN="LEFT">
	<TD><A HREF="http://cjos.sourceforge.net/archive/"><IMG 
		VSPACE="0" HSPACE="0" ALIGN="MIDDLE" BORDER="0"
		SRC="http://cjos.sourceforge.net/archive/media/jos_logo_mini.gif"></A></TD>
	<!-- The tab table. !-->
	<TD WIDTH="100%" ALIGN="RIGHT" BGCOLOR="#FFFFFF" VALIGN="BOTTOM"> 
		<TABLE BORDER="0" CELLSPACING="0" CELLPADDING="3" WIDTH="100%" ALIGN="RIGHT">
			<TR VALIGN="MIDDLE" ALIGN="LEFT">

<TD BGCOLOR="White" WIDTH="60%">&nbsp;</TD>
<TD BGCOLOR="#FFFFCC"><A HREF="http://cjos.sourceforge.net/archive/">Home</A></TD>
<TD BGCOLOR="White">&nbsp;</TD>
<TD WIDTH="10%" BGCOLOR="#FFFFCC" ALIGN="CENTER"><A HREF="http://cjos.sourceforge.net/archive/info/">Info</A></TD>
<TD BGCOLOR="White">&nbsp;</TD>
<TD WIDTH="10%" BGCOLOR="#FFFFCC" ALIGN="CENTER"><A HREF="http://cjos.sourceforge.net/archive/dev/">DevZone</A></TD>
<TD BGCOLOR="White">&nbsp;</TD>
<TD WIDTH="10%" BGCOLOR="#FFCC66" ALIGN="CENTER"><A
HREF="http://jos.sourceforge.net/">Wiki</A></TD>
<TD BGCOLOR="White">&nbsp;</TD>
			</TR>
			<TR>
				<TD BGCOLOR="#FFCC66" ALIGN="RIGHT" COLSPAN="9">
					<A HREF="/view/Users/?PHPSESSID=6a7557917de16789debbf2feaa4cb869">UsersWeb</A>
					&nbsp;|&nbsp;
					<A HREF="/view/Main/?PHPSESSID=6a7557917de16789debbf2feaa4cb869">MainWeb</A>
					&nbsp;|&nbsp;
					<A HREF="/view/Info/?PHPSESSID=6a7557917de16789debbf2feaa4cb869">InfoWeb</A>
					&nbsp;|&nbsp;
					<A HREF="/view/DevZone/?PHPSESSID=6a7557917de16789debbf2feaa4cb869">DevZoneWeb</A>
					&nbsp;|&nbsp;
					<A HREF="/view/Support/?PHPSESSID=6a7557917de16789debbf2feaa4cb869">SupportWeb</A>
				</TD>
			</TR>
		</TABLE>
	</TD>		
</TR>
<!-- The WikiHeader. !-->
<TR><TD COLSPAN="2">
<TABLE BORDER="0" CELLSPACING="0" CELLPADDING="3" WIDTH="100%">
<TR>
	<TD WIDTH="25%" ALIGN="CENTER" BGCOLOR="#FFFFCC" VALIGN="CENTER">
		<B>[&nbsp;<a href="/info//EmbeddedURIs?PHPSESSID=6a7557917de16789debbf2feaa4cb869">EmbeddedURIs</a>&nbsp;]</B>
	</TD>
	<TD WIDTH="25%" ALIGN="CENTER" BGCOLOR="#FFEE88" VALIGN="CENTER">
		<B>[ not logged in ]</B>	</TD>
	<TD WIDTH="25%" ALIGN="CENTER" BGCOLOR="#FFDD77" VALIGN="CENTER">
		<B>[ Web: <a href="/view/Imported/?PHPSESSID=6a7557917de16789debbf2feaa4cb869">Imported</a> ]</B>	</TD>
	<TD WIDTH="25%" ALIGN="CENTER" BGCOLOR="#FFCC66" VALIGN="CENTER">
		goto:&nbsp;<INPUT TYPE="TEXT" SIZE="10" NAME="topic"><!--<INPUT TYPE="IMAGE" SRC="/media/go.gif?PHPSESSID=6a7557917de16789debbf2feaa4cb869" BORDER="0" VALUE="topic" ALT="goto">!-->&nbsp;<a href="/search.php?PHPSESSID=6a7557917de16789debbf2feaa4cb869"><FONT SIZE="-1">options</FONT></a>
	</TD>
</TR>
</TABLE>

<TABLE BORDER="0" CELLSPACING="0" CELLPADDING="3" WIDTH="100%">
	<TR>
	<TD ALIGN="CENTER" BGCOLOR="#FFFFCC" VALIGN="TOP">
		[&nbsp;get <a href="/info/Imported/EmbeddedURIs?PHPSESSID=6a7557917de16789debbf2feaa4cb869">info</a> on or <a href="/edit/Imported/EmbeddedURIs?PHPSESSID=6a7557917de16789debbf2feaa4cb869">edit</a>&nbsp;]	</TD>
	<TD ALIGN="CENTER" BGCOLOR="#FFEE88" VALIGN="TOP">
		[&nbsp;<a href="/user.php?op=login&redirect=%2Fview%2F%2FEmbeddedURIs&PHPSESSID=6a7557917de16789debbf2feaa4cb869">login</a> or <a href="/user.php?op=newacct&redirect=%2Fview%2F%2FEmbeddedURIs&PHPSESSID=6a7557917de16789debbf2feaa4cb869">new&nbsp;user</a>&nbsp;]	</TD>
	<TD ALIGN="CENTER" BGCOLOR="#FFDD77" VALIGN="TOP">
		[&nbsp;list of <a href="/topics/Imported/?PHPSESSID=6a7557917de16789debbf2feaa4cb869">topics</a>, <a href="/hubsnodes/Imported/?PHPSESSID=6a7557917de16789debbf2feaa4cb869">hubs&nbsp;&amp;&nbsp;nodes</a>, or <a href="/changes/Imported/?PHPSESSID=6a7557917de16789debbf2feaa4cb869">recent&nbsp;changes</a>&nbsp;]	</TD>
	</TR>
</TABLE>

<!-- From CommonHeader !-->
</TR></TD>
</TABLE>
</FORM>

<!-- start BODY page !-->
<P>
<FONT SIZE=-1><a href="/view.php?topic=ArchitectureGroup&PHPSESSID=6a7557917de16789debbf2feaa4cb869">ArchitectureGroup</a><wikitopic ArchitectureGroup /wikitopic>; <a href="/view.php?topic=DecodingEmbeddedURI&PHPSESSID=6a7557917de16789debbf2feaa4cb869">DecodingEmbeddedURI</a><wikitopic DecodingEmbeddedURI /wikitopic></FONT>
<HR SIZE="1" NOSHADOW>
<EM>Article contributed by <a href="/view.php?topic=GilbertHerschberger&PHPSESSID=6a7557917de16789debbf2feaa4cb869">GilbertHerschberger</a><wikitopic GilbertHerschberger /wikitopic> (15 November 1999).</EM>
<H4>Introduction</H4>
<P><EM>How do I embed one <a href="/view.php?topic=URI&web=Imported&PHPSESSID=6a7557917de16789debbf2feaa4cb869">URI</a> <wikitopic URI /wikitopic>in another?</EM></P>
<P>You might have noticed the long pause between the time I asked this question and the time I figured out something that might work. I asked this question on the architecture mailing list earlier this year. While there were many thoughtful answers to the question, it has taken this long to work out the details.</P>
<P>Did I mention how much I like working on the <a href="/view.php?topic=JOS&web=Imported&PHPSESSID=6a7557917de16789debbf2feaa4cb869">JOS</a> <wikitopic JOS /wikitopic>Project? It has made me a better programmer. It helps me practice my writing. It gives me the <EM>excuse</EM> I need to work on subsystems I have never seen (or even heard of). I like working on this project because there's a lot more to it than just Java.</P>
<H4>Package compiler</H4>
<P>I wish all my programs worked this way. With other programs and other parameters, I do not have trouble with the <a href="/view.php?topic=URI&web=Imported&PHPSESSID=6a7557917de16789debbf2feaa4cb869">URI</a> <wikitopic URI /wikitopic>or the program subsystem. It is only when special characters are passed as a parameter that it doesn't work. Here is an example of a package compiler program. In this example, it is given a single parameter (package) and compiles all of the source code for the package, using a javac tool.</P>
<PRE>
  public void example() {
	 String s =
		  "run:program:PackageCompilerProgram?package=org.jos"
	 Program p = new URI( s ).getObject();
	 p.run();
  }
</PRE>
<H4>Connection program</H4>
<P>I have been stuck on a couple of programs. They are part of one puzzle. An application communicates with a subsystem using a uniform resource identifier (or URI). The subsystem runs the program. The application uses a generic dialog box, where I can type in the name of any program and any its parameters. The application forms a <a href="/view.php?topic=URI&web=Imported&PHPSESSID=6a7557917de16789debbf2feaa4cb869">URI</a> <wikitopic URI /wikitopic>for the program and its parameters. Everything is going along nicely when -- <FONT COLOR="7F0000" SIZE="+2">Splat!</FONT> -- a <a href="/view.php?topic=URI&web=Imported&PHPSESSID=6a7557917de16789debbf2feaa4cb869">URI</a> <wikitopic URI /wikitopic>cannot be decoded properly because I typed in a valid <a href="/view.php?topic=URI&web=Imported&PHPSESSID=6a7557917de16789debbf2feaa4cb869">URI</a> <wikitopic URI /wikitopic>as a parameter to a program. It doesn't work so good.</P>
<P>One of these programs opens a connection using Java Database Connectivity (or JDBC). The program opens any connection and then prints out more information about the connection. The program takes a <a href="/view.php?topic=URI&web=Imported&PHPSESSID=6a7557917de16789debbf2feaa4cb869">URI</a> <wikitopic URI /wikitopic>(or URL) as a parameter.</P>
<P>Here is an example of how I can run the program manually, without the help of a subsystem.
<PRE>
  public void example() {
	 String j =
		  "jdbc:odbc:JOSDEMO?user=ANONYMOUS&amp;password=ANONYMOUS";

	 Program p = new ConnectionProgram();
	 p.run( j );
  }
</PRE>
<P>Here is an example of what will not work, <EM>but should</EM>.
<PRE>
  public void example() {
	 String j =
		  "jdbc:odbc:JOSDEMO?user=ANONYMOUS&amp;password=ANONYMOUS";
	 String s =
		  "run:program:ConnectionProgram?uri=" + j;

	 Program p = new URI( s ).getObject();
	 p.run();
  }
</PRE>
<H4>Encoding a parameter</H4>
<P>The solution to the puzzle seems be an embedded URI. For a general purpose application to enable an end-user to type in parameters, every parameter must be encoded. Here is an example of what will work, sort of.</P>
<PRE>
  public void example() {
	 String j =
		  "jdbc:odbc:JOSDEMO?user=ANONYMOUS&amp;password=ANONYMOUS";
	 String embedded_uri = URLEncoder.encode( j );
	 String s =
		  "run:program:ConnectionProgram?uri=" + embedded_uri;

	 Program p = new URI( s ).getObject();
	 p.run();
  }
</PRE>
<P>Somewhere inside the parseArguments() method, the query string is broken into name/value pairs. It is not possible for the parseArguments() method to figure out that a <a href="/view.php?topic=URI&web=Imported&PHPSESSID=6a7557917de16789debbf2feaa4cb869">URI</a> <wikitopic URI /wikitopic>is embedded. While the program is called with the right number of parameters, the uri parameter still remains encoded.</P>
<P><nolink>ParameterList must be modified to always decode parameters to plain text. By changing <nolink>ParameterList, a <a href="/view.php?topic=URI&web=Imported&PHPSESSID=6a7557917de16789debbf2feaa4cb869">URI</a> <wikitopic URI /wikitopic>can be passed from a client to any program.</P><BR><BR></P><!--

<TABLE width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="737b9c">
<TR><TD ALIGN="CENTER">
<a href="/user.php?op=login&redirect=%2Fview%2F%2FEmbeddedURIs&PHPSESSID=6a7557917de16789debbf2feaa4cb869">login</a> or <a href="/user.php?op=newacct&redirect=%2Fview%2F%2FEmbeddedURIs&PHPSESSID=6a7557917de16789debbf2feaa4cb869">new&nbsp;user</a><TR><TD>
</TABLE>

!-->
<!-- end BODY page !-->

<HR>

<DIV ALIGN="CENTER">
<TABLE BORDER="0" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR>
	<TD ALIGN="CENTER" COLSPAN="2">
		Content of these pages are owned and copyrighted by the poster.
	</TD>
</TR>
<TR>
	<TD ALIGN="RIGHT" WIDTH="50%">
		Hosted by:
	</TD>
	<TD ALIGN="LEFT">
		<A HREF="http://sourceforge.net/"><IMG 
			SRC="http://sourceforge.net/sflogo.php?group_id=2376&type=1"
			BORDER=0 HSPACE=0 VSPACE=0></A>
	</TD>
</TR>
</TABLE>
</DIV>
</BODY>
</HTML>
