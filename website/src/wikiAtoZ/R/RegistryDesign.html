<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 FINAL//EN">
<HTML>
  <HEAD>
    <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=ISO-8859-1">
    <TITLE>RegistryDesign.Imported @ jos.sf.net</TITLE>
  </HEAD>

<BODY BGCOLOR="#FFFFFF">

<!-- The FORM encloses the entire header, because it renders better that way. !-->
<FORM ACTION="/jump.php"><input type="hidden" name="PHPSESSID" value="9fbe727a5bcf26f2cf39958a4c70d793" />

<!-- The JOS logo. !-->
<TABLE BORDER="0" CELLSPACING="0" CELLPADDING="3" WIDTH="100%">
<TR VALIGN="TOP" ALIGN="LEFT">
	<TD><A HREF="http://cjos.sourceforge.net/archive/"><IMG 
		VSPACE="0" HSPACE="0" ALIGN="MIDDLE" BORDER="0"
		SRC="http://cjos.sourceforge.net/archive/media/jos_logo_mini.gif"></A></TD>
	<!-- The tab table. !-->
	<TD WIDTH="100%" ALIGN="RIGHT" BGCOLOR="#FFFFFF" VALIGN="BOTTOM"> 
		<TABLE BORDER="0" CELLSPACING="0" CELLPADDING="3" WIDTH="100%" ALIGN="RIGHT">
			<TR VALIGN="MIDDLE" ALIGN="LEFT">

<TD BGCOLOR="White" WIDTH="60%">&nbsp;</TD>
<TD BGCOLOR="#FFFFCC"><A HREF="http://cjos.sourceforge.net/archive/">Home</A></TD>
<TD BGCOLOR="White">&nbsp;</TD>
<TD WIDTH="10%" BGCOLOR="#FFFFCC" ALIGN="CENTER"><A HREF="http://cjos.sourceforge.net/archive/info/">Info</A></TD>
<TD BGCOLOR="White">&nbsp;</TD>
<TD WIDTH="10%" BGCOLOR="#FFFFCC" ALIGN="CENTER"><A HREF="http://cjos.sourceforge.net/archive/dev/">DevZone</A></TD>
<TD BGCOLOR="White">&nbsp;</TD>
<TD WIDTH="10%" BGCOLOR="#FFCC66" ALIGN="CENTER"><A
HREF="http://jos.sourceforge.net/">Wiki</A></TD>
<TD BGCOLOR="White">&nbsp;</TD>
			</TR>
			<TR>
				<TD BGCOLOR="#FFCC66" ALIGN="RIGHT" COLSPAN="9">
					<A HREF="/view/Users/?PHPSESSID=9fbe727a5bcf26f2cf39958a4c70d793">UsersWeb</A>
					&nbsp;|&nbsp;
					<A HREF="/view/Main/?PHPSESSID=9fbe727a5bcf26f2cf39958a4c70d793">MainWeb</A>
					&nbsp;|&nbsp;
					<A HREF="/view/Info/?PHPSESSID=9fbe727a5bcf26f2cf39958a4c70d793">InfoWeb</A>
					&nbsp;|&nbsp;
					<A HREF="/view/DevZone/?PHPSESSID=9fbe727a5bcf26f2cf39958a4c70d793">DevZoneWeb</A>
					&nbsp;|&nbsp;
					<A HREF="/view/Support/?PHPSESSID=9fbe727a5bcf26f2cf39958a4c70d793">SupportWeb</A>
				</TD>
			</TR>
		</TABLE>
	</TD>		
</TR>
<!-- The WikiHeader. !-->
<TR><TD COLSPAN="2">
<TABLE BORDER="0" CELLSPACING="0" CELLPADDING="3" WIDTH="100%">
<TR>
	<TD WIDTH="25%" ALIGN="CENTER" BGCOLOR="#FFFFCC" VALIGN="CENTER">
		<B>[&nbsp;<a href="/info//RegistryDesign?PHPSESSID=9fbe727a5bcf26f2cf39958a4c70d793">RegistryDesign</a>&nbsp;]</B>
	</TD>
	<TD WIDTH="25%" ALIGN="CENTER" BGCOLOR="#FFEE88" VALIGN="CENTER">
		<B>[ not logged in ]</B>	</TD>
	<TD WIDTH="25%" ALIGN="CENTER" BGCOLOR="#FFDD77" VALIGN="CENTER">
		<B>[ Web: <a href="/view/Imported/?PHPSESSID=9fbe727a5bcf26f2cf39958a4c70d793">Imported</a> ]</B>	</TD>
	<TD WIDTH="25%" ALIGN="CENTER" BGCOLOR="#FFCC66" VALIGN="CENTER">
		goto:&nbsp;<INPUT TYPE="TEXT" SIZE="10" NAME="topic"><!--<INPUT TYPE="IMAGE" SRC="/media/go.gif?PHPSESSID=9fbe727a5bcf26f2cf39958a4c70d793" BORDER="0" VALUE="topic" ALT="goto">!-->&nbsp;<a href="/search.php?PHPSESSID=9fbe727a5bcf26f2cf39958a4c70d793"><FONT SIZE="-1">options</FONT></a>
	</TD>
</TR>
</TABLE>

<TABLE BORDER="0" CELLSPACING="0" CELLPADDING="3" WIDTH="100%">
	<TR>
	<TD ALIGN="CENTER" BGCOLOR="#FFFFCC" VALIGN="TOP">
		[&nbsp;get <a href="/info/Imported/RegistryDesign?PHPSESSID=9fbe727a5bcf26f2cf39958a4c70d793">info</a> on or <a href="/edit/Imported/RegistryDesign?PHPSESSID=9fbe727a5bcf26f2cf39958a4c70d793">edit</a>&nbsp;]	</TD>
	<TD ALIGN="CENTER" BGCOLOR="#FFEE88" VALIGN="TOP">
		[&nbsp;<a href="/user.php?op=login&redirect=%2Fview%2F%2FRegistryDesign&PHPSESSID=9fbe727a5bcf26f2cf39958a4c70d793">login</a> or <a href="/user.php?op=newacct&redirect=%2Fview%2F%2FRegistryDesign&PHPSESSID=9fbe727a5bcf26f2cf39958a4c70d793">new&nbsp;user</a>&nbsp;]	</TD>
	<TD ALIGN="CENTER" BGCOLOR="#FFDD77" VALIGN="TOP">
		[&nbsp;list of <a href="/topics/Imported/?PHPSESSID=9fbe727a5bcf26f2cf39958a4c70d793">topics</a>, <a href="/hubsnodes/Imported/?PHPSESSID=9fbe727a5bcf26f2cf39958a4c70d793">hubs&nbsp;&amp;&nbsp;nodes</a>, or <a href="/changes/Imported/?PHPSESSID=9fbe727a5bcf26f2cf39958a4c70d793">recent&nbsp;changes</a>&nbsp;]	</TD>
	</TR>
</TABLE>

<!-- From CommonHeader !-->
</TR></TD>
</TABLE>
</FORM>

<!-- start BODY page !-->
<P>
<FONT SIZE=-1><a href="/view.php?topic=RegistryPages&PHPSESSID=9fbe727a5bcf26f2cf39958a4c70d793">RegistryPages</a><wikitopic RegistryPages /wikitopic>; <a href="/view.php?topic=StartupSequence&PHPSESSID=9fbe727a5bcf26f2cf39958a4c70d793">StartupSequence</a><wikitopic StartupSequence /wikitopic>; <a href="/view.php?topic=StartupSequencePart2&PHPSESSID=9fbe727a5bcf26f2cf39958a4c70d793">StartupSequencePart2</a><wikitopic StartupSequencePart2 /wikitopic>; <a href="/view.php?topic=DeviceArchitecture&PHPSESSID=9fbe727a5bcf26f2cf39958a4c70d793">DeviceArchitecture</a><wikitopic DeviceArchitecture /wikitopic></FONT>
<HR SIZE="1" NOSHADOW>
<h1>System-wide Registry</h1>
<EM>Last updated 21-MAY-1999</EM>
</P><P>
Ok, I've mentioned before about the registry, but not really <em>why</em> we need one.  I've started listing the whys below:
</P><P>
<h2>Configurations</h2>
A registry dedicated to just the system is one way to store system configurations. Configurations include which files to load at startup, such as the default shell.  It also stores the devices and their associated drivers and driver settings.
</P><P>
We could take the Linux model and require that the only native methods are in the kernel, compiled with the JVM. Then the <a href="/view.php?topic=JVM&web=Imported&PHPSESSID=9fbe727a5bcf26f2cf39958a4c70d793">JVM</a> <wikitopic JVM /wikitopic>only needs to load the primitive classes (bundled with the kernel, of course), and call <code>Shell.main( null )</code>.  In this way device access is direct and there would be very little thought into bootup sequences (and I'd be out of a job :-) ). However, there is no room for flexibility in this model. Every time a driver needs to be changed, or there is a modification in the hardware, the kernel would need to be recompiled. I call this "the hard way." (Although it would be a good starting point to get <a href="/view.php?topic=JOS&web=Imported&PHPSESSID=9fbe727a5bcf26f2cf39958a4c70d793">JOS</a> <wikitopic JOS /wikitopic>off the ground...)
</P><P>
Instead, we can store this information in a configuration, such as a registry, and minimize the kernel builds. 
</P><P>
<h2>Archives</h2>
If a system configuration is stored in a persistant manner, multiple configurations can be saved, and possibly selected from at boot-up time.
</P><P>
This allows for stable configurations to be saved, while others are experimented with.  This can help out plenty with video problems (anyone who's dealt with OS/2 video will probably know what I'm talking about).
</P><P>
<h2>Dynamic System Architecture</h2>
Through storing objects as well as text, the registry allows us to store a reference point through which drivers are accessed (a "driver gate").
</P><P>
For example, java.io.File is altered so that all its calls are directed to the object registered at "/static/java/io/File".  This object, then, would have a dynamic reference to, say, a jos.driver.FileSystem implementation. That file system would then be the system-wide architecture for file access.
</P><P>
In this way, a driver gate can alter its driver reference to point to a different driver on the fly, without announcements to applications.
</P><P>
So the access redirection looks something like this:
<PRE>
	  java core class -&gt; registry driver gate -&gt; architecture front end
</pre>
</P><P>
These architecture front end would need to query the registry for the actual drivers, and would need to be able to dynamically alter this list, and at the same time be able to correctly route java core class calls in a safe manner.
</P><P>
<h2>Chainable Registries</h2>
We can also allow our registry trees to be chained together; that is, request for entries can recurse through parent registries.  This creates the possibility of customized registries on a process-by-process basis, and also application-level registries, without fear of damaging other processes states or the system integrety.
</P><P>
With this, the above listed architecture can (hopefully) be safely switched from one application to another by changing the driver gateways, if the application has the appropriate security level. The switch would not affect other applications if the architectures are correctly implemented.
</P><P>
We would need to be able to specify which application registry(s) to use before the process begins executing, and the <a href="/view.php?topic=JVM&web=Imported&PHPSESSID=9fbe727a5bcf26f2cf39958a4c70d793">JVM</a> <wikitopic JVM /wikitopic>reloads the java core classes in that process.
</P><P>
-MattAlbrecht<br>
12-MAY-1999, 21-MAY-1999
<HR>
</P><P>
Here's my current wish-list for such a directory:
<UL> <LI> Able to store Java objects with a name-object binding
<LI> Names are referenced in a tree-like structure (ala Unix path names, or something similar)
<LI> Each Entry (a bounded Java object) can have a set of attributes, which are themselves objects.
<LI> Able to search the directory by several keys:
<UL> <LI> Exact Name
<LI> wild-card name (ala Unix again)
<LI> object class (ala Jini - may not need this, though?)
<LI> attributes (again, maybe?)
</UL> <LI> If an entry is queried and not found in this registry, then the parent  registry is queried as well. Wild-card queries would recurse to the parents as well, but child entries with identical names override the parent object bindings, similar to methods of a subclass overriding the super class.
<LI> Each entry has the option to be persistent, remote, both, or neither. This would specify which objects can be remotely downloaded, and saved for reloading on future reboots and directory restores.
<LI> The base directory class is an interface, so any number of implementations can be made compatible.
<LI> Probably an event system to announce new or removed entries, or changes in entries' object binding or attributes.
</UL> 
I envision the directory to replace the classic idea of a Kernel <a href="/view.php?topic=API&web=Imported&PHPSESSID=9fbe727a5bcf26f2cf39958a4c70d793">API</a> <wikitopic API /wikitopic>with a configurable framework.  Sure, the other "kernel" parts will have their <a href="/view.php?topic=API&web=Imported&PHPSESSID=9fbe727a5bcf26f2cf39958a4c70d793">API</a> <wikitopic API /wikitopic>being static (such as the direct hardware access and process features),
since these are the built-in basic operations.  I also see the directory having several "static" entries which act as gateways between the Java
"static" APIs (core, Java Media, whatever), and these entries are then tied
to the directory's other entries.
</P><P>
To support this framework idea, the middle-tier in the architecture would
need methods to change its directory entry references, and possibly listen
to the directory events for changes in its referenced entries.
</P><P>
For the "static" gateways, we would need to define interfaces for each part, and implement, at a minimum, an adapter object which accepts all calls but does nothing.
</P><P>
In this way a system architecture can be user-defined.  We would only supply (as the kernel) several foundation utilities to make it possible.  And even these kernel utilities are configurable with the right interfaces.
</P><P>
Just to show that this isn't all wish with no thought, here are some example architectures a system architect could create:
</P><P>
<UL> <LI> A Plain-Jane architecture with nothing fancy. Drivers would be registered in the directory, then the basic layers are added on these (file system to link the disk drivers together, protocol stacks built on the network drivers, and so on).  Then the "static" entries are assigned to the entry points for these layers (java.io.File is linked to "/static/java/io/File" for File I/O, java.net.Socket is linked to "/static/java/net/TCPIPSocket", and so on).  After this initial setup, each application only knows about the Java <a href="/view.php?topic=API&web=Imported&PHPSESSID=9fbe727a5bcf26f2cf39958a4c70d793">API</a> <wikitopic API /wikitopic>and acts as if it is in a standard jvm.
<LI> A research group works with per-process architecture. They design the directory interface so that each process inherits a copy of the directory, which can be configured such that each process can make its directory optimized for its own task, without affecting the parent directories.  Each process spawns off a configuration task which restructures the directory, adding its own entries to optimize the to-driver layers.
<LI> A network computer sets up the directory so that it directly references a Jini lookup server on the network.  All directory calls would be translated into Jini remote requests and calls, and all located drivers would be <a href="/view.php?topic=RMI&web=Imported&PHPSESSID=9fbe727a5bcf26f2cf39958a4c70d793">RMI</a> <wikitopic RMI /wikitopic>stubs.
</UL> 
-MattAlbrecht<br>
07-MAY-1999<br>
<HR>
<h1>Comments:</h1>
</P><P>
The lookup should be done with a simple <a href="/view.php?topic=URL&web=Imported&PHPSESSID=9fbe727a5bcf26f2cf39958a4c70d793">URL</a> <wikitopic URL /wikitopic>scheme: reg://users/acl. And the internals of the registry should be XML:
<XMP>
</P><P>
<Registry>
 <RegEntry Name="entry-xmp">
  <Entry Type="string">blah blah</Entry>
  <RegEntry Name="entry-xmp-2">
	<Entry Type="string>You get the idea</Entry>
  </RegEntry>
 </RegEntry>
</Registry>
</P><P>
</XMP>
</P><P>
Why we should use the <a href="/view.php?topic=URL&web=Imported&PHPSESSID=9fbe727a5bcf26f2cf39958a4c70d793">URL</a> <wikitopic URL /wikitopic>format is pretty simple, but XML, being new, isnt as self explanatory. Hence:
<UL> <LI> <a href="/view.php?topic=XML&web=Imported&PHPSESSID=9fbe727a5bcf26f2cf39958a4c70d793">XML</a> <wikitopic XML /wikitopic>is flexible enough to be the standard non-binary format for JOS, and would cut down on the code needed
<LI> Its tree/node structure would be perfect for a registry, and it would be simple to take a branch, slap a Registry tag around it and save it to a file (eg for backup)
<LI> People love buzzwords to latch onto, some new-user can proudly say "my computer has XML" without any fear of him comprehending it.
<LI> Im sure they're are more, I just cant think of any.
</UL> 
<a href="/view.php?topic=DigiGod&PHPSESSID=9fbe727a5bcf26f2cf39958a4c70d793">DigiGod</a><wikitopic DigiGod /wikitopic> 99.05.12
<HR>
</P><P>
I think that one big <a href="/view.php?topic=XML&web=Imported&PHPSESSID=9fbe727a5bcf26f2cf39958a4c70d793">XML</a> <wikitopic XML /wikitopic>file with say 4000 entries would be far too slow to parse. We'd need an indexed fileformat like dbm. <a href="/view.php?topic=XML&web=Imported&PHPSESSID=9fbe727a5bcf26f2cf39958a4c70d793">XML</a> <wikitopic XML /wikitopic>is nice, but <a href="/view.php?topic=IMHO&web=Imported&PHPSESSID=9fbe727a5bcf26f2cf39958a4c70d793">IMHO</a> <wikitopic IMHO /wikitopic>only for data exchange not storage.
</P><P>
<a href="/view.php?topic=MarkAMeyer&PHPSESSID=9fbe727a5bcf26f2cf39958a4c70d793">MarkAMeyer</a><wikitopic MarkAMeyer /wikitopic> 12-May-1999
</P><P>
<HR>
</P><P>
One big <a href="/view.php?topic=XML&web=Imported&PHPSESSID=9fbe727a5bcf26f2cf39958a4c70d793">XML</a> <wikitopic XML /wikitopic>file would be near useless but one of the nice things about <a href="/view.php?topic=XML&web=Imported&PHPSESSID=9fbe727a5bcf26f2cf39958a4c70d793">XML</a> <wikitopic XML /wikitopic>is you can split it up into many files easily:
</P><P>
<XMP>
</P><P>
<Registry>
 <RegEntry Name="Applications">
  <RegEntry Name="Notepad" URL="file://apps/notepad/notepad.reg.xml">
  </RegEntry>
  .
  .
  .
 </RegEntry>
 .
 .
 .
</Registry>
</P><P>
</XMP>
</P><P>
then apps/notepad/notepad.reg.xml would look like:
<XMP>
</P><P>
<Registry>
 <RegEntry Name="lastfile">
  <Data Type="url">
	file://users/DigiGod/personal/secrets.rtf
  </Data>
 </RegEntry>
 .
 .
 .
</Registry>
</P><P>
</XMP>
</P><P>
this lets the registry be fragmented into useful pieces (the main registry would have no data at all, only links to other files) but the registry editor would make the tree like:
</P><P>
<PRE>

+ (root)
 Applications
  Notepad
	lastfile="file://..."

</PRE>
</P><P>
each user would have his preferences stored in his directory, each driver would have its info stored with it, each app would have its configuration at hand (and it could alter it with out the danger of messing up a giant file) and it would all be seamlessly put together by the registry editor so no one would have to know
</P><P>
<a href="/view.php?topic=DigiGod&PHPSESSID=9fbe727a5bcf26f2cf39958a4c70d793">DigiGod</a><wikitopic DigiGod /wikitopic> 99.05.13
<HR>
I have been having some concerns with the architecture swapping. This would definitely <a href="/view.php?topic=NOT&web=Imported&PHPSESSID=9fbe727a5bcf26f2cf39958a4c70d793">NOT</a> <wikitopic NOT /wikitopic>be a good thing for many applications. For instance, one File System reads and writes the harddrives as FAT-16, while another one in a separate process views those harddrives as HPFS; this would quickly result in a system-wide crash, recoverable only by reformatting the harddrives. It could be implemented in a safe way if somehow the File System could be assigned to unique, independent hardware. This may be a driver-level problem.
</P><P>
As another example, if one process uses the modem for a <a href="/view.php?topic=PPP&web=Imported&PHPSESSID=9fbe727a5bcf26f2cf39958a4c70d793">PPP</a> <wikitopic PPP /wikitopic>internet connection, while another process uses the modem for <a href="/view.php?topic=BBS&web=Imported&PHPSESSID=9fbe727a5bcf26f2cf39958a4c70d793">BBS</a> <wikitopic BBS /wikitopic>access, the modem line would have corrupted data from shared useage. This could be easily solved by an "in-use" driver flag, or a method to register with a driver to gain access, such as by retrieving a handle, which can restrict the number of users.
</P><P>
-MattAlbrecht <br>
21-MAY-1999
<HR>
firstly, I agree. Secondly if anyone thinks <a href="/view.php?topic=XML&web=Imported&PHPSESSID=9fbe727a5bcf26f2cf39958a4c70d793">XML</a> <wikitopic XML /wikitopic>is a good idea I think these should be the tags:
<DL>
<DT>&lt;Registry&gt;
<DD>root<BR>
<DT>&lt;Node&gt;
<DD>a node in the registry, has the required attribute Name<BR>
<DT>&lt;LinkNode&gt;
<DD>a node that points to another file, has the required attribs. Name and URL<BR>
<DT>&lt;Entry&gt;
<DD>a data leaf, has the required attrib. Type<BR>
</DL>
</P><P>
This allows for the creation of a handful of small, fast-to-parse, files. 
I think the registry should be an abstract interface so it can be <a href="/view.php?topic=XML&web=Imported&PHPSESSID=9fbe727a5bcf26f2cf39958a4c70d793">XML</a> <wikitopic XML /wikitopic>or binary, although I think <a href="/view.php?topic=XML&web=Imported&PHPSESSID=9fbe727a5bcf26f2cf39958a4c70d793">XML</a> <wikitopic XML /wikitopic>should be the "default" and only people who require a fast registry would have to go through the bother of having a binary registry.
</P><P>
<a href="/view.php?topic=DigiGod&PHPSESSID=9fbe727a5bcf26f2cf39958a4c70d793">DigiGod</a><wikitopic DigiGod /wikitopic> 99.05.21
<HR>
First, I like the direction this discussion is going. There should be a common registry interface. There should be a common registry format. Should it be XML? Probably so. Each named registry is maintained through the registry interface. This registry interface should be used to maintain the system-wide registry used by <a href="/view.php?topic=JOS&web=Imported&PHPSESSID=9fbe727a5bcf26f2cf39958a4c70d793">JOS</a> <wikitopic JOS /wikitopic>itself. Even when there are many applications reading and writing a registry, there must be only one registry object for each registry. A registry becomes distributed among many applications.
</P><P>
For storing all kinds of data, a registry must cross the <a href="/view.php?topic=PersistanceBarrier&PHPSESSID=9fbe727a5bcf26f2cf39958a4c70d793">PersistanceBarrier</a><wikitopic PersistanceBarrier /wikitopic> [sic], too.  I've been working on distributing a network-wide registry. This was part of a special interest project inside <a href="/view.php?topic=XDC&PHPSESSID=9fbe727a5bcf26f2cf39958a4c70d793">XDC</a><wikitopic XDC /wikitopic>.
</P><P>
For example, part of the registry interface should be a mechanism to get/create an registry based on a URL. When a <a href="/view.php?topic=URL&web=Imported&PHPSESSID=9fbe727a5bcf26f2cf39958a4c70d793">URL</a> <wikitopic URL /wikitopic>indicates a registry that's dormant on disk, a new registry object must be created to "open" that registry. When all of the references to a registry are lost, the registry object "closes" that registry. Subsequent requests for that <a href="/view.php?topic=URL&web=Imported&PHPSESSID=9fbe727a5bcf26f2cf39958a4c70d793">URL</a> <wikitopic URL /wikitopic>must return a proxy for <a href="/view.php?topic=THE&web=Imported&PHPSESSID=9fbe727a5bcf26f2cf39958a4c70d793">THE</a> <wikitopic THE /wikitopic>registry object.
</P><P>
When a <a href="/view.php?topic=URL&web=Imported&PHPSESSID=9fbe727a5bcf26f2cf39958a4c70d793">URL</a> <wikitopic URL /wikitopic>indicates host and domain, there should be no problem reading and writing to a registry on another machine. - <a href="/view.php?topic=GilbertHerschberger&PHPSESSID=9fbe727a5bcf26f2cf39958a4c70d793">GilbertHerschberger</a><wikitopic GilbertHerschberger /wikitopic> (21 May 1999)
<HR>
Well, what I think would be best was if the registry interface was abstract and hid the implementation so <a href="/view.php?topic=XML&web=Imported&PHPSESSID=9fbe727a5bcf26f2cf39958a4c70d793">XML</a> <wikitopic XML /wikitopic>would be less the common (although I think it will be) and more the <I>default</I> format.
</P><P>
One of the numerous reasons I think <a href="/view.php?topic=XML&web=Imported&PHPSESSID=9fbe727a5bcf26f2cf39958a4c70d793">XML</a> <wikitopic XML /wikitopic>would be the best choice is the inherit tree structure, and I may just be misinterrpreting you <a href="/view.php?topic=GilbertHerschberger&PHPSESSID=9fbe727a5bcf26f2cf39958a4c70d793">GilbertHerschberger</a><wikitopic GilbertHerschberger /wikitopic> but what I infer from your comments is you want many little registries with no central hub that are loaded by the registry singelton. What I suggested was a central (but basically empty information-wise) "starting point", if you will, that links out to all the little subregs (and is the default loaded by our regEdit) that at the very least adds a sense of order. This does not preclude distributing the registry, the <a href="/view.php?topic=LinkNode&PHPSESSID=9fbe727a5bcf26f2cf39958a4c70d793">LinkNode</a><wikitopic LinkNode /wikitopic> I proposed should except any type of <a href="/view.php?topic=URL&web=Imported&PHPSESSID=9fbe727a5bcf26f2cf39958a4c70d793">URL</a> <wikitopic URL /wikitopic>(ftp:, http:, file:, whatever). The registry singleton should never unload the root file (as I will refer to it from now on (possibly: jos.registry.reg.xml ?)) and should load all the subregistries, connected via <a href="/view.php?topic=LinkNode&PHPSESSID=9fbe727a5bcf26f2cf39958a4c70d793">LinkNode</a><wikitopic LinkNode /wikitopic>'s, into its tree and unload them when they're no longer needed (much like you said).
</P><P>
As far as the registry singelton is concerned the <a href="/view.php?topic=LinkNode&PHPSESSID=9fbe727a5bcf26f2cf39958a4c70d793">LinkNode</a><wikitopic LinkNode /wikitopic>'s should be proccesed transparently so the registry has the apperance of being one big happy family, er, tree.
</P><P>
As long as we've brought it up, and it does seem to be a seperate issue lets start another thread entitled: <a href="/view.php?topic=RegistryStructure&PHPSESSID=9fbe727a5bcf26f2cf39958a4c70d793">RegistryStructure</a><wikitopic RegistryStructure /wikitopic> To deal with how the registry, regardless of implementation or interface, should be ordered.
</P><P>
<a href="/view.php?topic=DigiGod&PHPSESSID=9fbe727a5bcf26f2cf39958a4c70d793">DigiGod</a><wikitopic DigiGod /wikitopic> 99.05.24
</P><P>
<HR>
I want a system-wide registry <STRONG>and</STRONG> many little registries. The system-wide registry serves as a central hub. The system-wide registry provides a logical view of the registry like a <a href="/view.php?topic=URL&web=Imported&PHPSESSID=9fbe727a5bcf26f2cf39958a4c70d793">URL</a> <wikitopic URL /wikitopic>provides a logical view of <a href="/view.php?topic=HTML&web=Imported&PHPSESSID=9fbe727a5bcf26f2cf39958a4c70d793">HTML</a> <wikitopic HTML /wikitopic>documents. I want some registries to participate in a system-wide registry and some that do not. There should be a choice.
<BLOCKQUOTE><P><EM>this lets the registry be fragmented into useful pieces (the main registry would have no data at all, only links to other files)...each user would have his preferences stored in his directory, each driver would have its info stored with it, each app would have its configuration at hand (and it could alter it with out the danger of messing up a giant file) and it would all be seamlessly put together by the registry editor so no one would have to know</EM> -- <a href="/view.php?topic=DigiGod&PHPSESSID=9fbe727a5bcf26f2cf39958a4c70d793">DigiGod</a><wikitopic DigiGod /wikitopic></P>
<P><EM>This allows for the creation of a handful of small, fast-to-parse, files.</EM> -- <a href="/view.php?topic=DigiGod&PHPSESSID=9fbe727a5bcf26f2cf39958a4c70d793">DigiGod</a><wikitopic DigiGod /wikitopic></P></BLOCKQUOTE>
<P>While you say there should be many little registry <EM>files</EM>, I agree with you, and extend this. I say there should be many little registry objects, each registry object with its corresponding file and file format. When loading the system-wide registry, it should not resolve all of the links. If there's 2MB worth of data in all of the registry files, 2MB worth of data should not be loaded immediately by a system-wide registry. It should have the ability to load registry data <EM>as needed</EM>.</P>
<P>Here's why. There are many situations where a registry is useful within an application. Anytime you have data to store, the registry interface might be a viable alternative. A registry interface could be used to store all kinds of data, not just system-specific configuration data. Since the registry interface is a kind of data store, I want to store all kinds of data.</P>
<P>Imagine this: My configuration program creates an OS file called XConfig.002, using the registry <nolink>API. It asks for an independent registry object. When I confirm, it goes to the system-wide registry and (quickly) links XConfig to the new XConfig.002 file. Now, I can have more than one configuration for X and switch between them.</P>
<P>Imagine this, too: My backup program copies part of the registry into an independent registry file. It uses the registry <nolink>API to get a proxy for <a href="/view.php?topic=THE&web=Imported&PHPSESSID=9fbe727a5bcf26f2cf39958a4c70d793">THE</a> <wikitopic THE /wikitopic>system-wide registry <EM>and</EM> it uses the registry <nolink>API to get an independent registry object. The registry <nolink>API should provide a method to bulk copy data from one registry object to another. -- <a href="/view.php?topic=GilbertHerschberger&PHPSESSID=9fbe727a5bcf26f2cf39958a4c70d793">GilbertHerschberger</a><wikitopic GilbertHerschberger /wikitopic> (26 May 1999)</P>
</P><P>
<HR>
I dont think the registry interface should be aware of multiple files (as the implementation may only have one) rather the <a href="/view.php?topic=XML&web=Imported&PHPSESSID=9fbe727a5bcf26f2cf39958a4c70d793">XML</a> <wikitopic XML /wikitopic>implementation seamlessly handles the file loading, parsing, unloading on a demand basis; It would treat a <a href="/view.php?topic=LinkNode&PHPSESSID=9fbe727a5bcf26f2cf39958a4c70d793">LinkNode</a><wikitopic LinkNode /wikitopic> just like a Node as far as building the registry tree goes. I never thought of multiple configurations, thats a great idea and should be easy enough using XML. An application could open its own registry file by going behind the interfacs back and using the XMLImplementation code directly or the interface could have a method to prune part of its data tree and hand it over as a new registry (preferable).
</P><P>
I also dont think their should be a choice wheter registry files are part of the system registry or not (if we use <a href="/view.php?topic=XML&web=Imported&PHPSESSID=9fbe727a5bcf26f2cf39958a4c70d793">XML</a> <wikitopic XML /wikitopic>and my schema each file would look like a seperate registry so it doesnt matter) if they are all linked <EM>from</EM> the systemwide hub they can all be accesed via the editor (assuming access) and that makes it easier to find and fix a problem.
</P><P>
<a href="/view.php?topic=DigiGod&PHPSESSID=9fbe727a5bcf26f2cf39958a4c70d793">DigiGod</a><wikitopic DigiGod /wikitopic> 99.05.26
<HR>
<P>On Monday, May 31, 1999, I went through my research on the purpose of a registry. For more information, see also <a href="/view.php?topic=RegistryPurpose&PHPSESSID=9fbe727a5bcf26f2cf39958a4c70d793">RegistryPurpose</a><wikitopic RegistryPurpose /wikitopic>. What is a registry going to do for us? I found that there are two abstractions we should use for a registry in JOS.</P>
<P>The registry <STRONG>interface</STRONG> should not assume anything about where the registry data is stored. Registry data can be stored in so many different formats that this must be deferred to an <STRONG>implementation</STRONG> decision. In other words, there should be at least one registry implementation for each of <nolink>.ser (Serialization), <nolink>XML, <nolink>.ini, <nolink>.conf, <nolink>SQL, etc. The default implementation for the system-wide registry should be whatever turns out to be the most reliable, rugged, and stable implementation.</P>
<P>The registry package must provide a registry factory mechanism. It must not be based on package names. It must be based on a dynamic master registry factory.</P>
<P>The registry editor should be just like other editors. You should choose which registry you want to view and edit. Why? Because there is more than one. If you create a private registry for a device driver, I should be able to copy it to my computer. If my registry is broken, I should be able to send it to you for repair.</P>
<P>If we apply the <STRONG>e-mail proof</STRONG>, a registry editor must be able to edit independent registry files. The e-mail proof explains how I must be able to export a copy of my registry and send it to you through e-mail. Once you recieve a copy of my registry, your registry editor must be able to let you see my registry on your machine, just as I see it on mine.</P>
<P>We should provide classic mechanisms for the registry such as copy, rename, delete, merge, extract, combine, split and join. All of these mechanisms should be developed once to work with any implementation of the registry interface.</P>
<P>With this architecture, anyone can copy from .conf to .ini to <nolink>XML to <nolink>SQL and back--without losing any data. - <a href="/view.php?topic=GilbertHerschberger&PHPSESSID=9fbe727a5bcf26f2cf39958a4c70d793">GilbertHerschberger</a><wikitopic GilbertHerschberger /wikitopic> (1 June 1999)</P>
</P><P>
<HR>
</P><P>
This is a very interesting problem. I have actually implemented something much simpler in order to provide a common "Registry" for my applications.
The two parts consist of:
</P><P>
<UL> <LI> Singleton Registry Manager
<UL> <LI> Provides facilities to "get" and "set" a registry.
<LI> Each class requests a "Registry" using its type, so each registry is named for the class that uses it.
<LI> A Class can get an "additionl" registry, by requesting one with the type and a key.
<LI> The Manager keeps a reference to all open registries, and applications act upon the registry <EM>(to load/store)</EM> through the manager. This prevents (or allows for handeling of) more that one application trying to access the same stored file.
<LI> The manager knows if a Registry has changed, and locks it.
<LI> Registries can be "detached" from the registry manager, in that case, they can not be saved again. This is to provide an application with a version that can be independantly modified at runtime, and have the original backup safe for other instances, or executions.
</UL> </UL> 
<UL> <LI> Registry Interface
<UL> <LI> Provides the common way of accessing any registry.
<LI> The interface means that the actual data can be stored in any way an implementation can think of.
<LI> All get parameters may be passed a defalt value <EM>(or null)</EM>. If the value is non-null and no key exists in the registry for that value, it is added to the registry. This allows any application running for the first time, to automatically create its own registry. There is no mussing with property files.
<LI> I've also expanded the Registry interface to provide properties as boolean, int, etc. This ensure that any special writing of a property, is correctly stored.
</UL> </UL> 
The great thing about this model, is that it can be implemented in just about any way you can think of. Adding infoBus, or Jini behind the thing would allow multi-VM usage, or networked usage... Currently, I use a simple version that stores standard property in a special directory. I am also working on a version that is serialized, so actual objects can be stored... Ultimatly, I think that is the way to go. <EM>(and may mean <a href="/view.php?topic=XML&web=Imported&PHPSESSID=9fbe727a5bcf26f2cf39958a4c70d793">XML</a> <wikitopic XML /wikitopic>is not the best solution, though very inticing.)</EM>
</P><P>
Anyway, after reading the stuff here, I've got a few more ideas for it, an its clear that a more robust Registry is required not just here, but by many people.
</P><P>
<a href="/view.php?topic=BrillPappin&PHPSESSID=9fbe727a5bcf26f2cf39958a4c70d793">BrillPappin</a><wikitopic BrillPappin /wikitopic> 23-JUN-1999
<HR>
<P>Simplicity is the key. When you said <EM>something much simpler</EM>, it reminds me of why I started working on the <a href="/view.php?topic=JOS&web=Imported&PHPSESSID=9fbe727a5bcf26f2cf39958a4c70d793">JOS</a> <wikitopic JOS /wikitopic>registry in the first place. Something much simpler is what we need across the board. 
</P><P>
Like you, I think it is very important to programmers everywhere for a registry <nolink>API to include primative Java types. Take a look at <a href="/view.php?topic=RegistryInterface&PHPSESSID=9fbe727a5bcf26f2cf39958a4c70d793">RegistryInterface</a><wikitopic RegistryInterface /wikitopic>. Are you aware of this and other <a href="/view.php?topic=RegistryPages&PHPSESSID=9fbe727a5bcf26f2cf39958a4c70d793">RegistryPages</a><wikitopic RegistryPages /wikitopic>? -- <a href="/view.php?topic=GilbertHerschberger&PHPSESSID=9fbe727a5bcf26f2cf39958a4c70d793">GilbertHerschberger</a><wikitopic GilbertHerschberger /wikitopic> (23 June 1999).<BR><BR></P><!--

<TABLE width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="737b9c">
<TR><TD ALIGN="CENTER">
<a href="/user.php?op=login&redirect=%2Fview%2F%2FRegistryDesign&PHPSESSID=9fbe727a5bcf26f2cf39958a4c70d793">login</a> or <a href="/user.php?op=newacct&redirect=%2Fview%2F%2FRegistryDesign&PHPSESSID=9fbe727a5bcf26f2cf39958a4c70d793">new&nbsp;user</a><TR><TD>
</TABLE>

!-->
<!-- end BODY page !-->

<HR>

<DIV ALIGN="CENTER">
<TABLE BORDER="0" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR>
	<TD ALIGN="CENTER" COLSPAN="2">
		Content of these pages are owned and copyrighted by the poster.
	</TD>
</TR>
<TR>
	<TD ALIGN="RIGHT" WIDTH="50%">
		Hosted by:
	</TD>
	<TD ALIGN="LEFT">
		<A HREF="http://sourceforge.net/"><IMG 
			SRC="http://sourceforge.net/sflogo.php?group_id=2376&type=1"
			BORDER=0 HSPACE=0 VSPACE=0></A>
	</TD>
</TR>
</TABLE>
</DIV>
</BODY>
</HTML>
