<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 FINAL//EN">
<HTML>
  <HEAD>
    <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=ISO-8859-1">
    <TITLE>RegistryWrappers.Imported @ jos.sf.net</TITLE>
  </HEAD>

<BODY BGCOLOR="#FFFFFF">

<!-- The FORM encloses the entire header, because it renders better that way. !-->
<FORM ACTION="/jump.php"><input type="hidden" name="PHPSESSID" value="8748035d5fa15de29175ff6fbe0114d5" />

<!-- The JOS logo. !-->
<TABLE BORDER="0" CELLSPACING="0" CELLPADDING="3" WIDTH="100%">
<TR VALIGN="TOP" ALIGN="LEFT">
	<TD><A HREF="http://cjos.sourceforge.net/archive/"><IMG 
		VSPACE="0" HSPACE="0" ALIGN="MIDDLE" BORDER="0"
		SRC="http://cjos.sourceforge.net/archive/media/jos_logo_mini.gif"></A></TD>
	<!-- The tab table. !-->
	<TD WIDTH="100%" ALIGN="RIGHT" BGCOLOR="#FFFFFF" VALIGN="BOTTOM"> 
		<TABLE BORDER="0" CELLSPACING="0" CELLPADDING="3" WIDTH="100%" ALIGN="RIGHT">
			<TR VALIGN="MIDDLE" ALIGN="LEFT">

<TD BGCOLOR="White" WIDTH="60%">&nbsp;</TD>
<TD BGCOLOR="#FFFFCC"><A HREF="http://cjos.sourceforge.net/archive/">Home</A></TD>
<TD BGCOLOR="White">&nbsp;</TD>
<TD WIDTH="10%" BGCOLOR="#FFFFCC" ALIGN="CENTER"><A HREF="http://cjos.sourceforge.net/archive/info/">Info</A></TD>
<TD BGCOLOR="White">&nbsp;</TD>
<TD WIDTH="10%" BGCOLOR="#FFFFCC" ALIGN="CENTER"><A HREF="http://cjos.sourceforge.net/archive/dev/">DevZone</A></TD>
<TD BGCOLOR="White">&nbsp;</TD>
<TD WIDTH="10%" BGCOLOR="#FFCC66" ALIGN="CENTER"><A
HREF="http://jos.sourceforge.net/">Wiki</A></TD>
<TD BGCOLOR="White">&nbsp;</TD>
			</TR>
			<TR>
				<TD BGCOLOR="#FFCC66" ALIGN="RIGHT" COLSPAN="9">
					<A HREF="/view/Users/?PHPSESSID=8748035d5fa15de29175ff6fbe0114d5">UsersWeb</A>
					&nbsp;|&nbsp;
					<A HREF="/view/Main/?PHPSESSID=8748035d5fa15de29175ff6fbe0114d5">MainWeb</A>
					&nbsp;|&nbsp;
					<A HREF="/view/Info/?PHPSESSID=8748035d5fa15de29175ff6fbe0114d5">InfoWeb</A>
					&nbsp;|&nbsp;
					<A HREF="/view/DevZone/?PHPSESSID=8748035d5fa15de29175ff6fbe0114d5">DevZoneWeb</A>
					&nbsp;|&nbsp;
					<A HREF="/view/Support/?PHPSESSID=8748035d5fa15de29175ff6fbe0114d5">SupportWeb</A>
				</TD>
			</TR>
		</TABLE>
	</TD>		
</TR>
<!-- The WikiHeader. !-->
<TR><TD COLSPAN="2">
<TABLE BORDER="0" CELLSPACING="0" CELLPADDING="3" WIDTH="100%">
<TR>
	<TD WIDTH="25%" ALIGN="CENTER" BGCOLOR="#FFFFCC" VALIGN="CENTER">
		<B>[&nbsp;<a href="/info//RegistryWrappers?PHPSESSID=8748035d5fa15de29175ff6fbe0114d5">RegistryWrappers</a>&nbsp;]</B>
	</TD>
	<TD WIDTH="25%" ALIGN="CENTER" BGCOLOR="#FFEE88" VALIGN="CENTER">
		<B>[ not logged in ]</B>	</TD>
	<TD WIDTH="25%" ALIGN="CENTER" BGCOLOR="#FFDD77" VALIGN="CENTER">
		<B>[ Web: <a href="/view/Imported/?PHPSESSID=8748035d5fa15de29175ff6fbe0114d5">Imported</a> ]</B>	</TD>
	<TD WIDTH="25%" ALIGN="CENTER" BGCOLOR="#FFCC66" VALIGN="CENTER">
		goto:&nbsp;<INPUT TYPE="TEXT" SIZE="10" NAME="topic"><!--<INPUT TYPE="IMAGE" SRC="/media/go.gif?PHPSESSID=8748035d5fa15de29175ff6fbe0114d5" BORDER="0" VALUE="topic" ALT="goto">!-->&nbsp;<a href="/search.php?PHPSESSID=8748035d5fa15de29175ff6fbe0114d5"><FONT SIZE="-1">options</FONT></a>
	</TD>
</TR>
</TABLE>

<TABLE BORDER="0" CELLSPACING="0" CELLPADDING="3" WIDTH="100%">
	<TR>
	<TD ALIGN="CENTER" BGCOLOR="#FFFFCC" VALIGN="TOP">
		[&nbsp;get <a href="/info/Imported/RegistryWrappers?PHPSESSID=8748035d5fa15de29175ff6fbe0114d5">info</a> on or <a href="/edit/Imported/RegistryWrappers?PHPSESSID=8748035d5fa15de29175ff6fbe0114d5">edit</a>&nbsp;]	</TD>
	<TD ALIGN="CENTER" BGCOLOR="#FFEE88" VALIGN="TOP">
		[&nbsp;<a href="/user.php?op=login&redirect=%2Fview%2F%2FRegistryWrappers&PHPSESSID=8748035d5fa15de29175ff6fbe0114d5">login</a> or <a href="/user.php?op=newacct&redirect=%2Fview%2F%2FRegistryWrappers&PHPSESSID=8748035d5fa15de29175ff6fbe0114d5">new&nbsp;user</a>&nbsp;]	</TD>
	<TD ALIGN="CENTER" BGCOLOR="#FFDD77" VALIGN="TOP">
		[&nbsp;list of <a href="/topics/Imported/?PHPSESSID=8748035d5fa15de29175ff6fbe0114d5">topics</a>, <a href="/hubsnodes/Imported/?PHPSESSID=8748035d5fa15de29175ff6fbe0114d5">hubs&nbsp;&amp;&nbsp;nodes</a>, or <a href="/changes/Imported/?PHPSESSID=8748035d5fa15de29175ff6fbe0114d5">recent&nbsp;changes</a>&nbsp;]	</TD>
	</TR>
</TABLE>

<!-- From CommonHeader !-->
</TR></TD>
</TABLE>
</FORM>

<!-- start BODY page !-->
<P>
<FONT SIZE=-1><a href="/view.php?topic=RegistryPages&PHPSESSID=8748035d5fa15de29175ff6fbe0114d5">RegistryPages</a><wikitopic RegistryPages /wikitopic></FONT>
<HR SIZE="1" NOSHADOW>
<EM>Article contributed by <a href="/view.php?topic=GilbertHerschberger&PHPSESSID=8748035d5fa15de29175ff6fbe0114d5">GilbertHerschberger</a><wikitopic GilbertHerschberger /wikitopic> (9 Jul 1999).</EM>
<H4>Introduction</H4>
<P>It took me a while to see it clearly. <a href="/view.php?topic=RegistryIterator&PHPSESSID=8748035d5fa15de29175ff6fbe0114d5">RegistryIterator</a><wikitopic RegistryIterator /wikitopic> is a kind of registry wrapper. There are potentially many registry wrappers, not just a registry iterator.</P>
<H4>Example from <CODE>java.io</CODE></H4>
<P><CODE>java.io.DataInputStream</CODE> is a wrapper for <CODE>java.io.InputStream</CODE>s, like this:</P>
<TABLE WIDTH="100%" BGCOLOR="#EFEFEF">
<TR>
<TD>
<PRE>
  public void example() {
	 String OSFileName = "/usr/local/example" );
	 FileInputStream f = new FileInputStream( OSFileName );
	 BufferedInputStream b =
		  new BufferedInputStream( f );
	 DataInputStream d =
		  new DataInputStream( b );
  }
</PRE>
</TD>
</TR>
</TABLE>
<P>A pipeline can be created by chaining different streams together. Standard streams might be combined with custom streams to do more with fewer components.</P>
<H4>Wrappers</H4>
<P>When we build wrappers around a registry interface, a pipeline can be created by chaining registry objects together. Standard wrappers might be combined with custom wrappers to do more things with fewer components, too.</P>
<H4>Key translation</H4>
<P>An application may require a key translation wrapper. A custom wrapper could be constructed to provide an alias service. An alias service translates a given key to some internal key. A requestor uses the alias; but, the actual registry uses some other key.</P>
<PRE>
  public void example() {
	 String url = "x-registry:new:";
	 Registry r =
		  RegistryFactory.getFactory().getRegistry( url );
	 Registry t = 
		  new CustomKeyTranslator( r );
	 r.setString( "name" );
	 String v = t.getString( "alias" );
  }
</PRE>
<H4>Alternative/search</H4>
<P>When there are "default" and "override" values for a registry key, it is possible to create a registry wrapper to provide default values when real values are missing. A custom wrapper might provide an alternative value for each key as a key is requested.</P>
<P>The search results may be returned by a registry based on a given key. When a virtual value is provided for a registry key, a registry wrapper can perform a search. The search may be within a registry's child registry nodes. Or, a search may read registries based on a list of registry directories on an OS file subsystem.</P>
<PRE>
  public void example() {
	 String url = "x-registry:xml:file:/usr/local/example";
	 Registry r =
		  RegistryFactory.getFactory().getRegistry( url );
	 Registry t = 
		  new SearchRegistry( r );
	 String v = t.getString( "browser?name=joe" );
  }
</PRE>
<H4>Case sensitive</H4>
<P>All registry keys are case sensitive. "name" is not equal to "NAME". In order to make any registry case-insensitive, we can create a single registry wrapper.
<PRE>
  public void example() {
	 String url = "x-registry:new:";
	 Registry r =
		  RegistryFactory.getFactory().getRegistry( url );
	 Registry t = 
		  new CaseInsensitiveTranslator( r );
	 r.setString( "name" );
	 String v = t.getString( "NAME" );
  }
</PRE>
<H4>Forward or backward?</H4>
<P>The registry iterator uses a slash as its separator. All this time, I have been assuming a registry should use a forward slash (/) in the style consistent with the uniform resource locator (URL). I still think this is a good idea. Would it be appropriate to provide <CODE>RegistryIterator.setSeparator()</CODE>?. The separator could be changed to something else when a slash is significant to a custom registry.</P>
<P>It is possible to use a OS filename or <nolink>URL <STRONG>as a key</STRONG> into a registry to collect additional data about each file/URL. If the filename itself contains a slash, a registry iterator would get confused when a slash isn't a separator. According to my notes on <nolink>URLs, a slash is supposed to be encoded (something like &slash;) in a case like this.</P> 
<H4>Example for registry</H4>
<P>A registry is responsible for storing and retrieving data. A simple registry is a data store, nothing more. It is not responsible for conversion.</P>
<P>Which component is responsible for conversion? We can create a standard conversion wrapper. A conversion wrapper implements the registry interface and uses another registry.
<TABLE WIDTH="100%" BGCOLOR="#EFEFEF">
<TR>
<TD>
<PRE>
public class ConversionRegistry
	 implements Registry {
  public ConversionRegistry( Registry v ) {
	 peer = v;
  }
:
  private Registry peer;
}
</PRE>
</TD>
</TR>
</TABLE>
<H4>Change to registry iterator</H4>
<P>With a conversion class, <a href="/view.php?topic=RegistryIterator&PHPSESSID=8748035d5fa15de29175ff6fbe0114d5">RegistryIterator</a><wikitopic RegistryIterator /wikitopic> changes slightly to provide full conversion capability:</P>
<TABLE WIDTH="100%" BGCOLOR="#EFEFEF">
<TR>
<P><EM>before:</EM></P>
<TD>
<PRE>
:
	 pcurr = pcurr.getRegistry( key );
:
</PRE>
</TD>
</TR>
<TR>
<TD>
<P><EM>after:</EM></P>
<PRE>
:
	 _setCurrent( pcurr.getRegistry( key ) );
:
  private _setCurrent( Registry v ) {
	 if ( v instanceof ConversionRegistry ) {
		pcurr = v;
	 }
	 else {
		pcurr = new ConversionRegistry( v );
	 }
  }
:
</PRE>
</TD>
</TR>
</TABLE><BR><BR></P><!--

<TABLE width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="737b9c">
<TR><TD ALIGN="CENTER">
<a href="/user.php?op=login&redirect=%2Fview%2F%2FRegistryWrappers&PHPSESSID=8748035d5fa15de29175ff6fbe0114d5">login</a> or <a href="/user.php?op=newacct&redirect=%2Fview%2F%2FRegistryWrappers&PHPSESSID=8748035d5fa15de29175ff6fbe0114d5">new&nbsp;user</a><TR><TD>
</TABLE>

!-->
<!-- end BODY page !-->

<HR>

<DIV ALIGN="CENTER">
<TABLE BORDER="0" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR>
	<TD ALIGN="CENTER" COLSPAN="2">
		Content of these pages are owned and copyrighted by the poster.
	</TD>
</TR>
<TR>
	<TD ALIGN="RIGHT" WIDTH="50%">
		Hosted by:
	</TD>
	<TD ALIGN="LEFT">
		<A HREF="http://sourceforge.net/"><IMG 
			SRC="http://sourceforge.net/sflogo.php?group_id=2376&type=1"
			BORDER=0 HSPACE=0 VSPACE=0></A>
	</TD>
</TR>
</TABLE>
</DIV>
</BODY>
</HTML>
