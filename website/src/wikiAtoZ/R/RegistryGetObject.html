<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 FINAL//EN">
<HTML>
  <HEAD>
    <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=ISO-8859-1">
    <TITLE>RegistryGetObject.Imported @ jos.sf.net</TITLE>
  </HEAD>

<BODY BGCOLOR="#FFFFFF">

<!-- The FORM encloses the entire header, because it renders better that way. !-->
<FORM ACTION="/jump.php"><input type="hidden" name="PHPSESSID" value="246abf824fae035b695b4599230e637f" />

<!-- The JOS logo. !-->
<TABLE BORDER="0" CELLSPACING="0" CELLPADDING="3" WIDTH="100%">
<TR VALIGN="TOP" ALIGN="LEFT">
	<TD><A HREF="http://cjos.sourceforge.net/archive/"><IMG 
		VSPACE="0" HSPACE="0" ALIGN="MIDDLE" BORDER="0"
		SRC="http://cjos.sourceforge.net/archive/media/jos_logo_mini.gif"></A></TD>
	<!-- The tab table. !-->
	<TD WIDTH="100%" ALIGN="RIGHT" BGCOLOR="#FFFFFF" VALIGN="BOTTOM"> 
		<TABLE BORDER="0" CELLSPACING="0" CELLPADDING="3" WIDTH="100%" ALIGN="RIGHT">
			<TR VALIGN="MIDDLE" ALIGN="LEFT">

<TD BGCOLOR="White" WIDTH="60%">&nbsp;</TD>
<TD BGCOLOR="#FFFFCC"><A HREF="http://cjos.sourceforge.net/archive/">Home</A></TD>
<TD BGCOLOR="White">&nbsp;</TD>
<TD WIDTH="10%" BGCOLOR="#FFFFCC" ALIGN="CENTER"><A HREF="http://cjos.sourceforge.net/archive/info/">Info</A></TD>
<TD BGCOLOR="White">&nbsp;</TD>
<TD WIDTH="10%" BGCOLOR="#FFFFCC" ALIGN="CENTER"><A HREF="http://cjos.sourceforge.net/archive/dev/">DevZone</A></TD>
<TD BGCOLOR="White">&nbsp;</TD>
<TD WIDTH="10%" BGCOLOR="#FFCC66" ALIGN="CENTER"><A
HREF="http://jos.sourceforge.net/">Wiki</A></TD>
<TD BGCOLOR="White">&nbsp;</TD>
			</TR>
			<TR>
				<TD BGCOLOR="#FFCC66" ALIGN="RIGHT" COLSPAN="9">
					<A HREF="/view/Users/?PHPSESSID=246abf824fae035b695b4599230e637f">UsersWeb</A>
					&nbsp;|&nbsp;
					<A HREF="/view/Main/?PHPSESSID=246abf824fae035b695b4599230e637f">MainWeb</A>
					&nbsp;|&nbsp;
					<A HREF="/view/Info/?PHPSESSID=246abf824fae035b695b4599230e637f">InfoWeb</A>
					&nbsp;|&nbsp;
					<A HREF="/view/DevZone/?PHPSESSID=246abf824fae035b695b4599230e637f">DevZoneWeb</A>
					&nbsp;|&nbsp;
					<A HREF="/view/Support/?PHPSESSID=246abf824fae035b695b4599230e637f">SupportWeb</A>
				</TD>
			</TR>
		</TABLE>
	</TD>		
</TR>
<!-- The WikiHeader. !-->
<TR><TD COLSPAN="2">
<TABLE BORDER="0" CELLSPACING="0" CELLPADDING="3" WIDTH="100%">
<TR>
	<TD WIDTH="25%" ALIGN="CENTER" BGCOLOR="#FFFFCC" VALIGN="CENTER">
		<B>[&nbsp;<a href="/info//RegistryGetObject?PHPSESSID=246abf824fae035b695b4599230e637f">RegistryGetObject</a>&nbsp;]</B>
	</TD>
	<TD WIDTH="25%" ALIGN="CENTER" BGCOLOR="#FFEE88" VALIGN="CENTER">
		<B>[ not logged in ]</B>	</TD>
	<TD WIDTH="25%" ALIGN="CENTER" BGCOLOR="#FFDD77" VALIGN="CENTER">
		<B>[ Web: <a href="/view/Imported/?PHPSESSID=246abf824fae035b695b4599230e637f">Imported</a> ]</B>	</TD>
	<TD WIDTH="25%" ALIGN="CENTER" BGCOLOR="#FFCC66" VALIGN="CENTER">
		goto:&nbsp;<INPUT TYPE="TEXT" SIZE="10" NAME="topic"><!--<INPUT TYPE="IMAGE" SRC="/media/go.gif?PHPSESSID=246abf824fae035b695b4599230e637f" BORDER="0" VALUE="topic" ALT="goto">!-->&nbsp;<a href="/search.php?PHPSESSID=246abf824fae035b695b4599230e637f"><FONT SIZE="-1">options</FONT></a>
	</TD>
</TR>
</TABLE>

<TABLE BORDER="0" CELLSPACING="0" CELLPADDING="3" WIDTH="100%">
	<TR>
	<TD ALIGN="CENTER" BGCOLOR="#FFFFCC" VALIGN="TOP">
		[&nbsp;get <a href="/info/Imported/RegistryGetObject?PHPSESSID=246abf824fae035b695b4599230e637f">info</a> on or <a href="/edit/Imported/RegistryGetObject?PHPSESSID=246abf824fae035b695b4599230e637f">edit</a>&nbsp;]	</TD>
	<TD ALIGN="CENTER" BGCOLOR="#FFEE88" VALIGN="TOP">
		[&nbsp;<a href="/user.php?op=login&redirect=%2Fview%2F%2FRegistryGetObject&PHPSESSID=246abf824fae035b695b4599230e637f">login</a> or <a href="/user.php?op=newacct&redirect=%2Fview%2F%2FRegistryGetObject&PHPSESSID=246abf824fae035b695b4599230e637f">new&nbsp;user</a>&nbsp;]	</TD>
	<TD ALIGN="CENTER" BGCOLOR="#FFDD77" VALIGN="TOP">
		[&nbsp;list of <a href="/topics/Imported/?PHPSESSID=246abf824fae035b695b4599230e637f">topics</a>, <a href="/hubsnodes/Imported/?PHPSESSID=246abf824fae035b695b4599230e637f">hubs&nbsp;&amp;&nbsp;nodes</a>, or <a href="/changes/Imported/?PHPSESSID=246abf824fae035b695b4599230e637f">recent&nbsp;changes</a>&nbsp;]	</TD>
	</TR>
</TABLE>

<!-- From CommonHeader !-->
</TR></TD>
</TABLE>
</FORM>

<!-- start BODY page !-->
<P>
<FONT SIZE=-1><a href="/view.php?topic=RegistryPages&PHPSESSID=246abf824fae035b695b4599230e637f">RegistryPages</a><wikitopic RegistryPages /wikitopic></FONT>
<HR>
<EM>Article contributed by <a href="/view.php?topic=GilbertHerschberger&PHPSESSID=246abf824fae035b695b4599230e637f">GilbertHerschberger</a><wikitopic GilbertHerschberger /wikitopic> (8 June 1999).</EM>
<H4>Introduction</H4>
<P>There are many outstanding issues about a registry-like interface. One of the issues comes from the use of the get/set object methods.</P>
<H4>Goal</H4>
<P>Our goal for <a href="/view.php?topic=JOS&web=Imported&PHPSESSID=246abf824fae035b695b4599230e637f">JOS</a> <wikitopic JOS /wikitopic>is to build a masterpiece. We want a great registry <nolink>API. A good registry <nolink>API is not good enough. We want to innovate, not immitate. The registy <nolink>API must have diversity and flexibility designed into every class and every method. We must start over from the ground up.</P>
<P>A good registry <nolink>API is flexible. A great registry <nolink>API is <EM>as flexible as possible</EM>. Anything that limits the use of the <nolink>API becomes an obsticle to flexibility.</P>
<P>We want to challenge our assumptions about an <nolink>API, a registry, and a registry <nolink>API. Assumptions are bad, very bad. Many programmers have assumptions about a registry. Many programmers are influenced by designs of poor quality registries from other operating systems. Since there are many things we don't like about other operating systems, we have decided to build our own. If we use bad designs in our operating system, we are no better off than when we started.</P>
<H4>Interface</H4>
<P>The registry is an interface, <EM>and should be</EM>. Here are some of the reasons why a registry is an interface.</P>
<UL>
<LI>As an interface, a registry supports diversity. Potentially, there are many different kinds of registries, each with different strengths and weaknesses. An application programmer can match the needs of an application with the strengths and weaknesses of an implementation to find the best tool for the job.
<LI>Any object can behave like a registry. Any class, any class at all, can implement the methods of a registry interface. This makes it possible to implement different kinds of proxies for different kinds of distributed computing.
<LI>Any object can provide a registry interface to its own properties.
<LI>As an interface, a registry supports competition. Each author, with a different set of priorities and skills, can build many different implementations of a registry interface. It is a contest among many different teams to build the smallest registry, the fastest registry, the most robust registry, etc.
<LI>As an interface, a registry <nolink>API supports different versions of a registry implementation. In parallel testing, both the old version of a registry and a new version can be compared, feature for feature, without needless complexity.
<LI>The optimization of a registry is determined by its implementation.
<LI>A preferrence of distributing computing should be a choice of the customer. A registry should be able to embrace all forms of distributed computing. Nothing within the registry <nolink>API should suggest a preferrence for one form of distributed computing over another.
</UL>
<H4>Optional</H4>
<P>As with any interface, each method of the registry interface is optional. A method can throw an appropriate exception when it can't do the function requested. As an application programming interface, the registry <nolink>API does not make an assumption that every method of the registry interface will be appropriate for every implementation. Like the <CODE>registry.RegistryAdapter</CODE>, the methods of the registry interface may simply throw an appropriate exception.</P>
<UL>
<LI>A simple registry, for example, may support the storage of Strings and nothing but Strings. What about all those other methods? They always throw an appropriate exception.
<PRE>
public class StringRegistry
	 extends RegistryAdapter {
  public StringRegistry() {
  }

  public String getString( String key )
		throws AccessorException {
	 Object o = cache.get( key );
	 if ( o == null ) {
		throw new AccessorException( key );
	 }

	 if ( !( o instanceof String ) ) {
		throw new AccessorException( key );
	 }

	 return (String) key;
  }

  public void setString( String key, String v )
		throws ModifierException {
	 cache.put( key, v );
  }

  private Hashtable cache = new Hashtable();
}
</PRE>
</UL>
<H4>Custom registries</H4>
<P>An object can provide a custom registry.
<PRE>
public class ExampleBean {
:
  public void setRow( int v ) {
	 row = v;
  }

  public void setColumn( int v ) {
	 column = v;
  }

  public void setHeight( int v ) {
	 height = v;
  }

  public void setWidth( int v ) {
	 width = v;
  }

  public Registry getRegistry() {
	 return new ExampleBeanRegistry( this );
  }
:
}
</PRE>
<H4>About setObject()</H4>
<P>Both of these designs are valid. There are (at least) two alternatives to look at setObject(). The implementation of setObject() is determined by each implementation of the registry interface.
<OL>
<LI><STRONG>Easy for requestor</STRONG>
<P>In order to make it very easy on a requestor, the registry interface provides a unique accessor and modifier for each primative type. The requestor does not have to be concerned with how the primative is stored within an implementation. For many implementations of the registry interface, a <CODE>boolean</CODE> will be stored as a <CODE>boolean</CODE>, not a <CODE>java.lang.Boolean</CODE>. The way a boolean is stored is at the discretion of the implementation, not the <nolink>API. When setObject() method is implemented, it might convert a <CODE>java.lang.Boolean</CODE> to a <CODE>boolean</CODE>.
<PRE>
public class ExampleBeanRegistry
	 extends RegistryAdapter {
  public ExampleBeanRegistry( ExampleBean v ) {
	 parent = v;
  }

  public String[] getKeys() {
	 return new String[] {
		  "row", 
		  "column",
		  "height",
		  "width" 
		  };
  }

  public String getType( String key )
		throws AccessorException {
	 if ( key.equals( "row" ) ||
			key.equals( "column" ) ||
			key.equals( "height" ) ||
			key.equals( "width" ) ) {
		return "int";
	 }

	 throw new AccessorException( key );
  }
:
  public void setObject( String key, Object v ) 
		throws ModifierException {
	 if ( v instanceof Integer ) {
		setInt( key, ((Integer)v).intValue() );
	 }

	 throw new ModifierException( key );
  }

  public void setInt( String key, int v ) 
		throws ModifierException {
	 if ( key.equals( "row" ) ) {
		parent.setRow( v );
		return;
	 }

	 if ( key.equals( "column" ) ) {
		parent.setColumn( v );
		return;
	 }

	 if ( key.equals( "height" ) ) {
		parent.setHeight( v );
		return;
	 }

	 if ( key.equals( "width" ) ) {
		parent.setWidth( v );
		return;
	 }

	 throw new ModifierException( key );
  }

  private ExampleBean parent;
}
</PRE>
<LI><STRONG>Easy for responder</STRONG>
<P>The registry interface also provides a setObject() method. In order to make it easy on an implementation of a registry, it is possible to let the requestor convert primative data to objects or implement secondary methods. When the setObject() method is implemented as a primary method, the other setXXX() methods are simple calls to setObject().
<PRE>
public class ObjectRegistry {
:
  public void setObject( String key, Object v ) {
	 cache.put( key, v )
  }

  public void setBoolean( String key, boolean v ) {
	 setObject( key, new Boolean( v ) );
  }

  public void setChar( String key, char v ) {
	 setObject( key, new Char( v ) );
  }

  public void setShort( String key, short v ) {
	 setObject( key, new Short( v ) );
  }

  public void setInt( String key, int v ) {
	 setObject( key, new Integer( v ) );
  }

  public void setLong( String key, long v ) {
	 setObject( key, new Long( v ) );
  }

  public void setFloat( String key, float v ) {
	 setObject( key, new Float( v ) );
  }

  public void setDouble( String key, double v ) {
	 setObject( key, new Double( v ) );
  }
:
  private Hashtable cache = new Hashtable();
}
</PRE>
</OL>
<H4>getObject()</H4>
<P>The getObject() method has two possible implementations, too.</P>
<OL>
<LI><STRONG>Easy on the requestor</STRONG>
<P>When making it easy on the requestor, the getObject() method is implemented as a secondary method.
<PRE>
  public Object getObject( String key ) 
		throws AccessorException {
	 String t = getType( key );

	 if ( t.equals( "boolean" ) ) {
		return new Boolean( getBoolean( key ) );
	 }
	 if ( t.equals( "byte" ) ) {
		return new Byte( getByte( key ) );
	 }
	 if ( t.equals( "char" ) ) {
		return new Char( getChar( key ) );
	 }
	 if ( t.equals( "short" ) ) {
		return new Short( getShort( key ) );
	 }
	 if ( t.equals( "int" ) ) {
		return new Integer( getInt( key ) );
	 }
	 if ( t.equals( "long" ) ) {
		return new Long( getLong( key ) );
	 }
	 if ( t.equals( "float" ) ) {
		return new Float( getFloat( key ) );
	 }
	 if ( t.equals( "double" ) ) {
		return new Double( getDouble( key ) );
	 }
	 if ( t.equals( "String" ) ) {
		return getString( key );
	 }
	 if ( t.equals( "Registry" ) ) {
		return getRegistry( key );
	 }
	 if ( t.equals( "boolean[]" ) ) {
		return getBooleanArray( key );
	 }
	 if ( t.equals( "byte[]" ) ) {
		return getByteArray( key );
	 }
	 if ( t.equals( "char[]" ) ) {
		return getCharArray( key );
	 }
	 if ( t.equals( "short[]" ) ) {
		return getShortArray( key );
	 }
	 if ( t.equals( "int[]" ) ) {
		return getIntArray( key );
	 }
	 if ( t.equals( "long[]" ) ) {
		return getLongArray( key );
	 }
	 if ( t.equals( "float[]" ) ) {
		return getBooleanArray( key );
	 }
	 if ( t.equals( "double[]" ) ) {
		return getBooleanArray( key );
	 }
	 if ( t.equals( "String[]" ) ) {
		return getStringArray( key );
	 }
	 if ( t.equals( "Registry[]" ) ) {
		return getRegistryArray( key );
	 }

	 throw new AccessorException( key );
  }
</PRE>
<LI><STRONG>Easy on the responder</STRONG>
<P>When a registry is implemented to store objects, not primatives, the other getXXX() methods are implemented something like this:
<PRE>
  public Object getObject( String key ) 
		throws AccessorException {
	 Object o = cache.get( key );
	 if ( o == null ) {
		throw new AccessorException( key );
	 }
	 return o;
  }

  public boolean getBoolean( String key ) 
		throws AccessorException {
	 Object o = getObject( key );
	 if ( !( o instanceof Boolean ) ) {
		throw new AccessorException( key );
	 }
	 return ((Boolean)o).booleanValue(); [?]
  }

  public byte getByte( String key ) 
		throws AccessorException {
	 Object o = getObject( key );
	 if ( !( o instanceof Byte ) ) {
		throw new AccessorException( key );
	 }
	 return ((Byte)o).byteValue(); [?]
  }

  public char getChar( String key ) 
		throws AccessorException {
	 Object o = getObject( key );
	 if ( !( o instanceof Char ) ) {
		throw new AccessorException( key );
	 }
	 return ((Char)o).charValue(); [?]
  }

  public short getShort( String key ) 
		throws AccessorException {
	 Object o = getObject( key );
	 if ( !( o instanceof Short ) ) {
		throw new AccessorException( key );
	 }
	 return ((Short)o).shortValue(); [?]
  }

  public int getInt( String key ) 
		throws AccessorException {
	 Object o = getObject( key );
	 if ( !( o instanceof Integer ) ) {
		throw new AccessorException( key );
	 }
	 return ((Integer)o).intValue(); [?]
  }

  public long getLong( String key ) 
		throws AccessorException {
	 Object o = getObject( key );
	 if ( !( o instanceof Byte ) ) {
		throw new AccessorException( key );
	 }
	 return ((Long)o).longValue(); [?]
  }

  public float getFloat( String key ) 
		throws AccessorException {
	 Object o = getObject( key );
	 if ( !( o instanceof Float ) ) {
		throw new AccessorException( key );
	 }
	 return ((Float)o).floatValue(); [?]
  }

  public double getDouble( String key ) 
		throws AccessorException {
	 Object o = getObject( key );
	 if ( !( o instanceof Double ) ) {
		throw new AccessorException( key );
	 }
	 return ((Double)o).doubleValue(); [?]
  }

  public String getString( String key ) 
		throws AccessorException {
	 Object o = getObject( key );
	 if ( !( o instanceof String ) ) {
		throw new AccessorException( key );
	 }
	 return (String) o;
  }

  public Registry getRegistry( String key ) 
		throws AccessorException {
	 Object o = getObject( key );
	 if ( !( o instanceof Registry ) ) {
		throw new AccessorException( key );
	 }
	 return (Registry) o;
  }

  public boolean[] getBooleanArray( String key ) 
		throws AccessorException {
	 Object o = getObject( key );
	 if ( !( o instanceof boolean[] ) ) {
		throw new AccessorException( key );
	 }
	 return (boolean[]) o;
  }

  public byte[] getBooleanArray( String key ) 
		throws AccessorException {
	 Object o = getObject( key );
	 if ( !( o instanceof byte[] ) ) {
		throw new AccessorException( key );
	 }
	 return (byte[]) o;
  }

  public char[] getCharArray( String key ) 
		throws AccessorException {
	 Object o = getObject( key );
	 if ( !( o instanceof char[] ) ) {
		throw new AccessorException( key );
	 }
	 return (char[]) o;
  }

  public short[] getShortArray( String key ) 
		throws AccessorException {
	 Object o = getObject( key );
	 if ( !( o instanceof short[] ) ) {
		throw new AccessorException( key );
	 }
	 return (short[]) o;
  }

  public int[] getIntArray( String key ) 
		throws AccessorException {
	 Object o = getObject( key );
	 if ( !( o instanceof int[] ) ) {
		throw new AccessorException( key );
	 }
	 return (int[]) o;
  }

  public long[] getLongArray( String key ) 
		throws AccessorException {
	 Object o = getObject( key );
	 if ( !( o instanceof long[] ) ) {
		throw new AccessorException( key );
	 }
	 return (long[]) o;
  }

  public float[] getFloatArray( String key ) 
		throws AccessorException {
	 Object o = getObject( key );
	 if ( !( o instanceof float[] ) ) {
		throw new AccessorException( key );
	 }
	 return (float[]) o;
  }

  public double[] getDoubleArray( String key ) 
		throws AccessorException {
	 Object o = getObject( key );
	 if ( !( o instanceof double[] ) ) {
		throw new AccessorException( key );
	 }
	 return (double[]) o;
  }

  public String[] getStringArray( String key ) 
		throws AccessorException {
	 Object o = getObject( key );
	 if ( !( o instanceof String[] ) ) {
		throw new AccessorException( key );
	 }
	 return (String[]) o;
  }

  public Registry[] getRegistryArray( String key ) 
		throws AccessorException {
	 Object o = getObject( key );
	 if ( !( o instanceof Registry[] ) ) {
		throw new AccessorException( key );
	 }
	 return (Registry[]) o;
  }
</PRE>
</OL><BR><BR></P><!--

<TABLE width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="737b9c">
<TR><TD ALIGN="CENTER">
<a href="/user.php?op=login&redirect=%2Fview%2F%2FRegistryGetObject&PHPSESSID=246abf824fae035b695b4599230e637f">login</a> or <a href="/user.php?op=newacct&redirect=%2Fview%2F%2FRegistryGetObject&PHPSESSID=246abf824fae035b695b4599230e637f">new&nbsp;user</a><TR><TD>
</TABLE>

!-->
<!-- end BODY page !-->

<HR>

<DIV ALIGN="CENTER">
<TABLE BORDER="0" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR>
	<TD ALIGN="CENTER" COLSPAN="2">
		Content of these pages are owned and copyrighted by the poster.
	</TD>
</TR>
<TR>
	<TD ALIGN="RIGHT" WIDTH="50%">
		Hosted by:
	</TD>
	<TD ALIGN="LEFT">
		<A HREF="http://sourceforge.net/"><IMG 
			SRC="http://sourceforge.net/sflogo.php?group_id=2376&type=1"
			BORDER=0 HSPACE=0 VSPACE=0></A>
	</TD>
</TR>
</TABLE>
</DIV>
</BODY>
</HTML>
