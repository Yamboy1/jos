<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 FINAL//EN">
<HTML>
  <HEAD>
    <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=ISO-8859-1">
    <TITLE>BulkMake.Main @ jos.sf.net</TITLE>
  </HEAD>

<BODY BGCOLOR="#FFFFFF">

<!-- The FORM encloses the entire header, because it renders better that way. !-->
<FORM ACTION="/jump.php"><input type="hidden" name="PHPSESSID" value="59100d6c9a810090b358b68bf137570b" />

<!-- The JOS logo. !-->
<TABLE BORDER="0" CELLSPACING="0" CELLPADDING="3" WIDTH="100%">
<TR VALIGN="TOP" ALIGN="LEFT">
	<TD><A HREF="http://cjos.sourceforge.net/archive/"><IMG 
		VSPACE="0" HSPACE="0" ALIGN="MIDDLE" BORDER="0"
		SRC="http://cjos.sourceforge.net/archive/media/jos_logo_mini.gif"></A></TD>
	<!-- The tab table. !-->
	<TD WIDTH="100%" ALIGN="RIGHT" BGCOLOR="#FFFFFF" VALIGN="BOTTOM"> 
		<TABLE BORDER="0" CELLSPACING="0" CELLPADDING="3" WIDTH="100%" ALIGN="RIGHT">
			<TR VALIGN="MIDDLE" ALIGN="LEFT">

<TD BGCOLOR="White" WIDTH="60%">&nbsp;</TD>
<TD BGCOLOR="#FFFFCC"><A HREF="http://cjos.sourceforge.net/archive/">Home</A></TD>
<TD BGCOLOR="White">&nbsp;</TD>
<TD WIDTH="10%" BGCOLOR="#FFFFCC" ALIGN="CENTER"><A HREF="http://cjos.sourceforge.net/archive/info/">Info</A></TD>
<TD BGCOLOR="White">&nbsp;</TD>
<TD WIDTH="10%" BGCOLOR="#FFFFCC" ALIGN="CENTER"><A HREF="http://cjos.sourceforge.net/archive/dev/">DevZone</A></TD>
<TD BGCOLOR="White">&nbsp;</TD>
<TD WIDTH="10%" BGCOLOR="#FFCC66" ALIGN="CENTER"><A
HREF="http://jos.sourceforge.net/">Wiki</A></TD>
<TD BGCOLOR="White">&nbsp;</TD>
			</TR>
			<TR>
				<TD BGCOLOR="#FFCC66" ALIGN="RIGHT" COLSPAN="9">
					<A HREF="/view/Users/?PHPSESSID=59100d6c9a810090b358b68bf137570b">UsersWeb</A>
					&nbsp;|&nbsp;
					<A HREF="/view/Main/?PHPSESSID=59100d6c9a810090b358b68bf137570b">MainWeb</A>
					&nbsp;|&nbsp;
					<A HREF="/view/Info/?PHPSESSID=59100d6c9a810090b358b68bf137570b">InfoWeb</A>
					&nbsp;|&nbsp;
					<A HREF="/view/DevZone/?PHPSESSID=59100d6c9a810090b358b68bf137570b">DevZoneWeb</A>
					&nbsp;|&nbsp;
					<A HREF="/view/Support/?PHPSESSID=59100d6c9a810090b358b68bf137570b">SupportWeb</A>
				</TD>
			</TR>
		</TABLE>
	</TD>		
</TR>
<!-- The WikiHeader. !-->
<TR><TD COLSPAN="2">
<TABLE BORDER="0" CELLSPACING="0" CELLPADDING="3" WIDTH="100%">
<TR>
	<TD WIDTH="25%" ALIGN="CENTER" BGCOLOR="#FFFFCC" VALIGN="CENTER">
		<B>[&nbsp;<a href="/info//BulkMake?PHPSESSID=59100d6c9a810090b358b68bf137570b">BulkMake</a>&nbsp;]</B>
	</TD>
	<TD WIDTH="25%" ALIGN="CENTER" BGCOLOR="#FFEE88" VALIGN="CENTER">
		<B>[ not logged in ]</B>	</TD>
	<TD WIDTH="25%" ALIGN="CENTER" BGCOLOR="#FFDD77" VALIGN="CENTER">
		<B>[ Web: <a href="/view/Main/?PHPSESSID=59100d6c9a810090b358b68bf137570b">Main</a> ]</B>	</TD>
	<TD WIDTH="25%" ALIGN="CENTER" BGCOLOR="#FFCC66" VALIGN="CENTER">
		goto:&nbsp;<INPUT TYPE="TEXT" SIZE="10" NAME="topic"><!--<INPUT TYPE="IMAGE" SRC="/media/go.gif?PHPSESSID=59100d6c9a810090b358b68bf137570b" BORDER="0" VALUE="topic" ALT="goto">!-->&nbsp;<a href="/search.php?PHPSESSID=59100d6c9a810090b358b68bf137570b"><FONT SIZE="-1">options</FONT></a>
	</TD>
</TR>
</TABLE>

<TABLE BORDER="0" CELLSPACING="0" CELLPADDING="3" WIDTH="100%">
	<TR>
	<TD ALIGN="CENTER" BGCOLOR="#FFFFCC" VALIGN="TOP">
		[&nbsp;get <a href="/info/Main/BulkMake?PHPSESSID=59100d6c9a810090b358b68bf137570b">info</a> on or <a href="/edit/Main/BulkMake?PHPSESSID=59100d6c9a810090b358b68bf137570b">edit</a>&nbsp;]	</TD>
	<TD ALIGN="CENTER" BGCOLOR="#FFEE88" VALIGN="TOP">
		[&nbsp;<a href="/user.php?op=login&redirect=%2Fview%2F%2FBulkMake&PHPSESSID=59100d6c9a810090b358b68bf137570b">login</a> or <a href="/user.php?op=newacct&redirect=%2Fview%2F%2FBulkMake&PHPSESSID=59100d6c9a810090b358b68bf137570b">new&nbsp;user</a>&nbsp;]	</TD>
	<TD ALIGN="CENTER" BGCOLOR="#FFDD77" VALIGN="TOP">
		[&nbsp;list of <a href="/topics/Main/?PHPSESSID=59100d6c9a810090b358b68bf137570b">topics</a>, <a href="/hubsnodes/Main/?PHPSESSID=59100d6c9a810090b358b68bf137570b">hubs&nbsp;&amp;&nbsp;nodes</a>, or <a href="/changes/Main/?PHPSESSID=59100d6c9a810090b358b68bf137570b">recent&nbsp;changes</a>&nbsp;]	</TD>
	</TR>
</TABLE>

<!-- From CommonHeader !-->
</TR></TD>
</TABLE>
</FORM>

<!-- start BODY page !-->
<P>
<nolink>DownloadBulkMake; <a href="/view.php?topic=PackageOriented&PHPSESSID=59100d6c9a810090b358b68bf137570b">PackageOriented</a><wikitopic PackageOriented /wikitopic>
<HR>
Article contributed by <a href="/view.php?topic=GilbertHerschberger&PHPSESSID=59100d6c9a810090b358b68bf137570b">GilbertHerschberger</a><wikitopic GilbertHerschberger /wikitopic> (31 May 2000, updated 17 August 2003).</EM>
<H4>Introduction</H4>
<nolink>BulkMake(tm) is a package-oriented tool for building programs written in the Java programming language. It copies, compiles and archives large Java programs.
<UL> <LI> When given a directory and package name, the package copier tool searched for <CODE>.java</CODE> files. If a <CODE>.java</CODE> file has changed, it is copied to the current directory using the same package name.
<LI> When given a directory and package name, the package compiler tool searches for <CODE>.java</CODE> files. If a <CODE>.class</CODE> file is out-of-sync with its corresponding <CODE>.java</CODE> file, it runs an external <CODE>javac</CODE> tool.
<LI> When given an archive name, the package archive tool (1) searches for <CODE>.java</CODE> files and adds them to a source archive and (2) searches for <CODE>.class</CODE> files and adds them to a jar.
</UL> 
<H4>Version 2a</H4>
With version 2a, this product depends on the <a href="/view.php?topic=SmartAPI&PHPSESSID=59100d6c9a810090b358b68bf137570b">SmartAPI</a><wikitopic SmartAPI /wikitopic>. It uses <EM>Finder</EM> to search for subdirectories.
</P><P>
<H4>Procedure 1</H4>
This step-by-step procedure illustrates how to compile a product.
<OL> <LI> Uncompress the source code for a product from its release archive. This step should put <CODE>.java</CODE> files in a directory tree, with a directory for each package.
<LI> Start <nolink>BulkMake. The current directory must be the <EM>root</EM> directory of the source tree. To start this application using the java tool, use a command something like the following: <CODE>$ java gchii.tools.bulkmake2a.BulkMake</CODE>. To start this application using the <a href="/view.php?topic=UniversalBrowser&PHPSESSID=59100d6c9a810090b358b68bf137570b">UniversalBrowser</a><wikitopic UniversalBrowser /wikitopic>, type in the following location into the <nolink>Universal Browser and press the Run button: <CODE>run:program:gchii.tools.packagecompiler2a.PackageCompiler</CODE>.
<LI> To start the package compiler, press the Compiler button.
<LI> Run the package compiler. Type in an extra path, if necessary. Type in a package name, if necessary. Press the Run button.
</OL> 
<H4>Procedure 2</H4>
Here is a step-by-step procedure for distributing your product using <nolink>BulkMake(tm).
<OL> <LI> Create a 'release' directory for your product. A release directory is created on another programmer's machine. Typically, it has a release number suffix, like <CODE>-1</CODE>, <CODE>-2</CODE>, etc..
<LI> Use the package copier to import <CODE>.java</CODE> files into your product's release directory.
<LI> Type in the name of a directory, the name of a package and press the Run button.
<LI> Use the package compiler to compile your product, using the steps in procedure 1.
<LI> Use the package archive tool to archive your product. Type in the name of an archive and press the Run button.
<LI> Use an archive tool to add license information, product information, documentation to the archive you intend to distribute. Upload your distribution archive to your website and share it with other programmers.
</OL> 
<H4>Starting a compiler</H4>
Indirectly, the package compiler uses the <CODE>exec()</CODE> method of <CODE>java.lang.Runtime</CODE> to start a new compiler. It waits on the spawned process to finish before moving on to the next package.
</P><P>
The package compiler must be configured with the name of a compiler, such as the <CODE>javac</CODE> tool. It must also be configured with the name of a corresponding <CODE>CLASSPATH</CODE> for each compiler.
</P><P>
Configuration makes it easier to switch from one compiler to another. The package compiler simultaneously supports compilers for two platforms: <CODE>java0</CODE> and <CODE>java1</CODE>.
</P><P>
The <CODE>CLASSPATH</CODE> for the package compiler itself is different than the <CODE>CLASSPATH</CODE> for the product it compiles. The <CODE>CLASSPATH</CODE> for Bulk Make(tm) is passed to the <CODE>java</CODE> tool or calculated by the <CODE>eric</CODE> tool. The compiler <CODE>CLASSPATH</CODE> is passed as a command line parameter to the <CODE>javac</CODE> tool. The "extra path" is appended to the compiler <CODE>CLASSPATH</CODE>.
</P><P>
Bulk Make(tm) depends upon an off-the-shelf virtual machine and a machine code process of a foreign operating system.
<HR>
<H4>4 August 2000</H4>
<UL> <LI> With release 2, the <CODE>BorderGUIApplication</CODE> already has the functionality for border layout, configuration, and invoking another program. The <CODE>BorderGUIApplication</CODE> replaces <CODE>GUIApplication</CODE> as the base class for the following tools:
<OL> <LI> <CODE>PackageCopier</CODE>
<LI> <CODE>PackageCompiler</CODE>
<LI> <CODE>PackageArchive</CODE>
</OL> <LI> With release 2, the package archive program is more efficient. Instead of passing individual files to the <CODE>jar</CODE> tool, it uses a wildcard for each directory. The <CODE>org.jos.demo</CODE> package, for example, may contain many classes with corresponding source code. These files are archives with something like this: <CODE>$ jar cvf demo-src.jar org/jos/demo/<STRONG>.java; jar cvf demo.jar org/jos/demo/</STRONG>.class</CODE>.
<LI> The <CODE>gchii.tools.bulkmake2a</CODE> package is new. It contains a simple application with buttons for other <nolink>BulkMake(tm) applications. Run the <nolink>BulkMake(tm) application with the <CODE>java</CODE> tool:
</UL> <CODE>$ java gchii.tools.bulkmake2a.BulkMake</CODE>.
</P><P>
The next version of <nolink>BulkMake(tm) is planned. It moves the functionality of tools to panels, like the <a href="/view.php?topic=UniversalBrowser&PHPSESSID=59100d6c9a810090b358b68bf137570b">UniversalBrowser</a><wikitopic UniversalBrowser /wikitopic>. -- <a href="/view.php?topic=GilbertHerschberger&PHPSESSID=59100d6c9a810090b358b68bf137570b">GilbertHerschberger</a><wikitopic GilbertHerschberger /wikitopic>
<HR>
<H4>7 August 2000</H4>
Release 1 of '<nolink>BulkMake(tm) 2b' is now available. For more information, see also <nolink>DownloadBulkMake.
<UL> <LI> The <CODE>gchii.tools.bulkmake2b</CODE> package is new. It contains a viewer environment application, with buttons to switch from one tool to another. Run the <nolink>BulkMake(tm) application with the <CODE>java</CODE> tool:
</UL> <CODE>$ java gchii.tools.bulkmake2b.BulkMake</CODE>. With <a href="/view.php?topic=UniversalBrowser&PHPSESSID=59100d6c9a810090b358b68bf137570b">UniversalBrowser</a><wikitopic UniversalBrowser /wikitopic>, start the <nolink>BulkMake(tm) application with the following location: <CODE>run:program:java gchii.tools.bulkmake2b.BulkMake</CODE>.
<UL> <LI> This version is organized more like the Universal Browser. It moves functionality to reusable panels, or viewers. <CODE>PackageCopier</CODE> becomes <CODE>CopierViewer</CODE>; <CODE>PackageCompiler</CODE> becomes <CODE>CompilerViewer</CODE>; and <CODE>PackageArchive</CODE> becomes <CODE>ArchiveViewer</CODE>.
<LI> This version is backward compatible with version 2a. It uses shares configuration files. In fact, this version invokes the following programs directly from version 2a: <CODE>PackageCopierProgram</CODE>, <CODE>PackageCompilerProgram</CODE> and <CODE>PackageArchiveProgram</CODE>.
</UL> 
Unlike previous versions, this version provides an interactive configuration program (called setup) to configure an external java tool and external jar tool. -- <a href="/view.php?topic=GilbertHerschberger&PHPSESSID=59100d6c9a810090b358b68bf137570b">GilbertHerschberger</a><wikitopic GilbertHerschberger /wikitopic>
<HR>
<H4>8 August 2000</H4>
Release 1 of '<nolink>BulkMake(tm) 2b' contains a known bug. This bug might explain why source code and classes were missing from the most recent distributions of certain products, like <a href="/view.php?topic=BootDisk&PHPSESSID=59100d6c9a810090b358b68bf137570b">BootDisk</a><wikitopic BootDisk /wikitopic>. The <CODE>PackageArchive</CODE> program mistakenly limits the number of archived files to STEP, or 20. The code should be changed to archive more than 20 files or directories.
</P><P>
from this:
<PRE>
  try {
	 javaList[ javaSize ] = item;
	 javaSize++;
  }
  catch( ArrayIndexOutOfBoundsException e ) {
	 String[] temp = new String[ javaSize + STEP ];
	 System.arraycopy( javaList, 0, temp, 0, javaSize );
	 javaList[ javaSize ] = item;
	 javaSize++;
  }
</PRE>
</P><P>
to this:
<PRE>
  try {
	 javaList[ javaSize ] = item;
	 javaSize++;
  }
  catch( ArrayIndexOutOfBoundsException e ) {
	 String[] temp = new String[ javaSize + STEP ];
	 System.arraycopy( javaList, 0, temp, 0, javaSize );
	 &lt;STRONG&gt;javaList = temp;&lt;/STRONG&gt;
	 javaList[ javaSize ] = item;
	 javaSize++;
  }
</PRE>
</P><P>
and from this:
<PRE>
  try {
	 classList[ classSize ] = item;
	 classSize++;
  }
  catch( ArrayIndexOutOfBoundsException e ) {
	 String[] temp = new String[ classSize + 20 ];
	 System.arraycopy( classList, 0, temp, 0, classSize );
	 classList[ classSize ] = item;
	 classSize++;
  }
</PRE>
</P><P>
to this:
<PRE>
  try {
	 classList[ classSize ] = item;
	 classSize++;
  }
  catch( ArrayIndexOutOfBoundsException e ) {
	 String[] temp = new String[ classSize + &lt;STRONG&gt;STEP&lt;/STRONG&gt; ];
	 System.arraycopy( classList, 0, temp, 0, classSize );
	 &lt;STRONG&gt;classList = temp;&lt;/STRONG&gt;
	 classList[ classSize ] = item;
	 classSize++;
  }
</PRE>
</P><P>
This bug only affects the package archiver. It may only affect recent distributions of a few products, since I personally upgraded from '<nolink>BulkMake(tm) 1a' to '<nolink>BulkMake(tm) 2a/2b' within the last few weeks. I switched from file-at-a-time to directory-at-a-time because <CODE>PackageArchive</CODE> would not archive a very large product I'm working on. Now I know why. I will create new releases of any affected products. -- <a href="/view.php?topic=GilbertHerschberger&PHPSESSID=59100d6c9a810090b358b68bf137570b">GilbertHerschberger</a><wikitopic GilbertHerschberger /wikitopic>
<HR>
Release 2 of '<nolink>BulkMake(tm) 2b' fixes a bug in <CODE>PackageArchiveProgram</CODE> 2a, which mistakenly limited an archive to the first 20 directories. My research has shown that this bug has been in <CODE>PackageArchiveProgram</CODE> since version 1a. In versions 1a and 1b, it limited an archive to the first 100 files. [A47] <a href="http://cjos.sourceforge.net/redist/mail/apps/2000-August/000047.html">http://cjos.sourceforge.net/redist/mail/apps/2000-August/000047.html</a> -- <a href="/view.php?topic=GilbertHerschberger&PHPSESSID=59100d6c9a810090b358b68bf137570b">GilbertHerschberger</a><wikitopic GilbertHerschberger /wikitopic> (9 August 2000).
<HR>
Release 3 of '<nolink>BulkMake(tm) 2b' is now available. In this version, the <a href="/view.php?topic=PackageArchive&PHPSESSID=59100d6c9a810090b358b68bf137570b">PackageArchive</a><wikitopic PackageArchive /wikitopic> tool has been upgraded to include a patch option. In patch mode, the package archive tool adds files which have changed to an archive. -- <a href="/view.php?topic=GilbertHerschberger&PHPSESSID=59100d6c9a810090b358b68bf137570b">GilbertHerschberger</a><wikitopic GilbertHerschberger /wikitopic> (18 August 2000).<BR><BR></P><!--

<TABLE width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="737b9c">
<TR><TD ALIGN="CENTER">
<a href="/user.php?op=login&redirect=%2Fview%2F%2FBulkMake&PHPSESSID=59100d6c9a810090b358b68bf137570b">login</a> or <a href="/user.php?op=newacct&redirect=%2Fview%2F%2FBulkMake&PHPSESSID=59100d6c9a810090b358b68bf137570b">new&nbsp;user</a><TR><TD>
</TABLE>

!-->
<!-- end BODY page !-->

<HR>

<DIV ALIGN="CENTER">
<TABLE BORDER="0" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR>
	<TD ALIGN="CENTER" COLSPAN="2">
		Content of these pages are owned and copyrighted by the poster.
	</TD>
</TR>
<TR>
	<TD ALIGN="RIGHT" WIDTH="50%">
		Hosted by:
	</TD>
	<TD ALIGN="LEFT">
		<A HREF="http://sourceforge.net/"><IMG 
			SRC="http://sourceforge.net/sflogo.php?group_id=2376&type=1"
			BORDER=0 HSPACE=0 VSPACE=0></A>
	</TD>
</TR>
</TABLE>
</DIV>
</BODY>
</HTML>
