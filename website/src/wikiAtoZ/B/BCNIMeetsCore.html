<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 FINAL//EN">
<HTML>
  <HEAD>
    <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=ISO-8859-1">
    <TITLE>BCNIMeetsCore.Imported @ jos.sf.net</TITLE>
  </HEAD>

<BODY BGCOLOR="#FFFFFF">

<!-- The FORM encloses the entire header, because it renders better that way. !-->
<FORM ACTION="/jump.php"><input type="hidden" name="PHPSESSID" value="d3ff4907cf83c9e96eecb2989a1f1d2c" />

<!-- The JOS logo. !-->
<TABLE BORDER="0" CELLSPACING="0" CELLPADDING="3" WIDTH="100%">
<TR VALIGN="TOP" ALIGN="LEFT">
	<TD><A HREF="http://cjos.sourceforge.net/archive/"><IMG 
		VSPACE="0" HSPACE="0" ALIGN="MIDDLE" BORDER="0"
		SRC="http://cjos.sourceforge.net/archive/media/jos_logo_mini.gif"></A></TD>
	<!-- The tab table. !-->
	<TD WIDTH="100%" ALIGN="RIGHT" BGCOLOR="#FFFFFF" VALIGN="BOTTOM"> 
		<TABLE BORDER="0" CELLSPACING="0" CELLPADDING="3" WIDTH="100%" ALIGN="RIGHT">
			<TR VALIGN="MIDDLE" ALIGN="LEFT">

<TD BGCOLOR="White" WIDTH="60%">&nbsp;</TD>
<TD BGCOLOR="#FFFFCC"><A HREF="http://cjos.sourceforge.net/archive/">Home</A></TD>
<TD BGCOLOR="White">&nbsp;</TD>
<TD WIDTH="10%" BGCOLOR="#FFFFCC" ALIGN="CENTER"><A HREF="http://cjos.sourceforge.net/archive/info/">Info</A></TD>
<TD BGCOLOR="White">&nbsp;</TD>
<TD WIDTH="10%" BGCOLOR="#FFFFCC" ALIGN="CENTER"><A HREF="http://cjos.sourceforge.net/archive/dev/">DevZone</A></TD>
<TD BGCOLOR="White">&nbsp;</TD>
<TD WIDTH="10%" BGCOLOR="#FFCC66" ALIGN="CENTER"><A
HREF="http://jos.sourceforge.net/">Wiki</A></TD>
<TD BGCOLOR="White">&nbsp;</TD>
			</TR>
			<TR>
				<TD BGCOLOR="#FFCC66" ALIGN="RIGHT" COLSPAN="9">
					<A HREF="/view/Users/?PHPSESSID=d3ff4907cf83c9e96eecb2989a1f1d2c">UsersWeb</A>
					&nbsp;|&nbsp;
					<A HREF="/view/Main/?PHPSESSID=d3ff4907cf83c9e96eecb2989a1f1d2c">MainWeb</A>
					&nbsp;|&nbsp;
					<A HREF="/view/Info/?PHPSESSID=d3ff4907cf83c9e96eecb2989a1f1d2c">InfoWeb</A>
					&nbsp;|&nbsp;
					<A HREF="/view/DevZone/?PHPSESSID=d3ff4907cf83c9e96eecb2989a1f1d2c">DevZoneWeb</A>
					&nbsp;|&nbsp;
					<A HREF="/view/Support/?PHPSESSID=d3ff4907cf83c9e96eecb2989a1f1d2c">SupportWeb</A>
				</TD>
			</TR>
		</TABLE>
	</TD>		
</TR>
<!-- The WikiHeader. !-->
<TR><TD COLSPAN="2">
<TABLE BORDER="0" CELLSPACING="0" CELLPADDING="3" WIDTH="100%">
<TR>
	<TD WIDTH="25%" ALIGN="CENTER" BGCOLOR="#FFFFCC" VALIGN="CENTER">
		<B>[&nbsp;<a href="/info//BCNIMeetsCore?PHPSESSID=d3ff4907cf83c9e96eecb2989a1f1d2c">BCNIMeetsCore</a>&nbsp;]</B>
	</TD>
	<TD WIDTH="25%" ALIGN="CENTER" BGCOLOR="#FFEE88" VALIGN="CENTER">
		<B>[ not logged in ]</B>	</TD>
	<TD WIDTH="25%" ALIGN="CENTER" BGCOLOR="#FFDD77" VALIGN="CENTER">
		<B>[ Web: <a href="/view/Imported/?PHPSESSID=d3ff4907cf83c9e96eecb2989a1f1d2c">Imported</a> ]</B>	</TD>
	<TD WIDTH="25%" ALIGN="CENTER" BGCOLOR="#FFCC66" VALIGN="CENTER">
		goto:&nbsp;<INPUT TYPE="TEXT" SIZE="10" NAME="topic"><!--<INPUT TYPE="IMAGE" SRC="/media/go.gif?PHPSESSID=d3ff4907cf83c9e96eecb2989a1f1d2c" BORDER="0" VALUE="topic" ALT="goto">!-->&nbsp;<a href="/search.php?PHPSESSID=d3ff4907cf83c9e96eecb2989a1f1d2c"><FONT SIZE="-1">options</FONT></a>
	</TD>
</TR>
</TABLE>

<TABLE BORDER="0" CELLSPACING="0" CELLPADDING="3" WIDTH="100%">
	<TR>
	<TD ALIGN="CENTER" BGCOLOR="#FFFFCC" VALIGN="TOP">
		[&nbsp;get <a href="/info/Imported/BCNIMeetsCore?PHPSESSID=d3ff4907cf83c9e96eecb2989a1f1d2c">info</a> on or <a href="/edit/Imported/BCNIMeetsCore?PHPSESSID=d3ff4907cf83c9e96eecb2989a1f1d2c">edit</a>&nbsp;]	</TD>
	<TD ALIGN="CENTER" BGCOLOR="#FFEE88" VALIGN="TOP">
		[&nbsp;<a href="/user.php?op=login&redirect=%2Fview%2F%2FBCNIMeetsCore&PHPSESSID=d3ff4907cf83c9e96eecb2989a1f1d2c">login</a> or <a href="/user.php?op=newacct&redirect=%2Fview%2F%2FBCNIMeetsCore&PHPSESSID=d3ff4907cf83c9e96eecb2989a1f1d2c">new&nbsp;user</a>&nbsp;]	</TD>
	<TD ALIGN="CENTER" BGCOLOR="#FFDD77" VALIGN="TOP">
		[&nbsp;list of <a href="/topics/Imported/?PHPSESSID=d3ff4907cf83c9e96eecb2989a1f1d2c">topics</a>, <a href="/hubsnodes/Imported/?PHPSESSID=d3ff4907cf83c9e96eecb2989a1f1d2c">hubs&nbsp;&amp;&nbsp;nodes</a>, or <a href="/changes/Imported/?PHPSESSID=d3ff4907cf83c9e96eecb2989a1f1d2c">recent&nbsp;changes</a>&nbsp;]	</TD>
	</TR>
</TABLE>

<!-- From CommonHeader !-->
</TR></TD>
</TABLE>
</FORM>

<!-- start BODY page !-->
<P>
<FONT SIZE="-1"><a href="/view.php?topic=PlatformAPIPages&PHPSESSID=d3ff4907cf83c9e96eecb2989a1f1d2c">PlatformAPIPages</a><wikitopic PlatformAPIPages /wikitopic>; <a href="/view.php?topic=BytecodeNativeInterface&PHPSESSID=d3ff4907cf83c9e96eecb2989a1f1d2c">BytecodeNativeInterface</a><wikitopic BytecodeNativeInterface /wikitopic></FONT>
<HR SIZE="1" NOSHADOW>
<P><EM>Article contributed by <a href="/view.php?topic=GilbertHerschberger&PHPSESSID=d3ff4907cf83c9e96eecb2989a1f1d2c">GilbertHerschberger</a><wikitopic GilbertHerschberger /wikitopic> (7 December 1999).</EM></P>
<H4>Introduction</H4>
<P>When implementing the <CODE>java.<STRONG></CODE> packages, it is not necessary to clone the <CODE>native</CODE> attribute for any method. Every method in a perfect clone can be non-native. The <CODE>org.jos.core.</STRONG></CODE> package might be used to implement a <a href="/view.php?topic=BytecodeNativeInterface&PHPSESSID=d3ff4907cf83c9e96eecb2989a1f1d2c">BytecodeNativeInterface</a><wikitopic BytecodeNativeInterface /wikitopic> (BCNI) extension of the <CODE>java.*</CODE> packages.</P>
<P><EM>What does that mean?</EM></P>
<P>It means that a virtual machine has total freedom to implement any mixture of bytecode and machine code. Once the <CODE>java.<STRONG></CODE> packages are implemented without native methods (and without native fields), all virtual machines everywhere can use the <CODE>java.</STRONG></CODE> packages without modification. Instead of bundling the <CODE>java.<STRONG></CODE> packages with a specific virtual machine, they can be unbundled. One group, such as the <a href="/view.php?topic=ClasspathProject&PHPSESSID=d3ff4907cf83c9e96eecb2989a1f1d2c">ClasspathProject</a><wikitopic ClasspathProject /wikitopic>, can implement the <CODE>java.</STRONG></CODE> packages for everyone. Extreme software reuse includes the notion that free-license software should be useable by everyone.</P>
<H4>Core Test Project</H4>
<P>I would like to think there is a way to rework the <CODE>java.*</CODE> packages from the <a href="/view.php?topic=ClasspathProject&PHPSESSID=d3ff4907cf83c9e96eecb2989a1f1d2c">ClasspathProject</a><wikitopic ClasspathProject /wikitopic> to use <nolink>BCNI. I have restarted my project like this.</P>
<UL>
<LI><P><STRONG>Start with <a href="/view.php?topic=JDK&web=Imported&PHPSESSID=d3ff4907cf83c9e96eecb2989a1f1d2c">JDK</a> <wikitopic JDK /wikitopic>1.0.2 and work up</STRONG></P>
<P>Start at the beginning. Think small. Think long-term. It is ambitious enough to think we could implement a Java-based operating system. It is far better to have a fully functional Java 0 Platform than a non-functional Java 2 Platform. Reduce the complexity of the project by starting at the beginning, before things got so weird.</P>
<LI><P><STRONG>Remove the fluff</STRONG></P>
<P>Reduce the complexity of the project further by removing packages that are unnecessary and outside the true core.</P>
<P><UL>
<LI><CODE>java.applet</CODE> - drop it
<LI><CODE>java.awt</CODE> - drop it
<LI><CODE>java.net</CODE> - drop it
</UL></P>
<LI><P><STRONG>Finish the core</STRONG></P>
<P>That leaves us with the true core of <a href="/view.php?topic=JDK&web=Imported&PHPSESSID=d3ff4907cf83c9e96eecb2989a1f1d2c">JDK</a> <wikitopic JDK /wikitopic>1.0.2, which happens to be the true core of <a href="/view.php?topic=JDK&web=Imported&PHPSESSID=d3ff4907cf83c9e96eecb2989a1f1d2c">JDK</a> <wikitopic JDK /wikitopic>1.1 and 1.2.</P>
<P><UL>
<LI><CODE>java.lang</CODE> - minus all that practical reflection fluff
<LI><CODE>java.io</CODE> - maybe, maybe not
<LI><CODE>java.util</CODE> - finish classes used by <CODE>java.lang</CODE>
</UL></P>
<LI><P><STRONG>Finish BCNI</STRONG></P>
<P>The native interface from <a href="/view.php?topic=JDK&web=Imported&PHPSESSID=d3ff4907cf83c9e96eecb2989a1f1d2c">JDK</a> <wikitopic JDK /wikitopic>1.0 is difficult, but fast. The native interface from <a href="/view.php?topic=JDK&web=Imported&PHPSESSID=d3ff4907cf83c9e96eecb2989a1f1d2c">JDK</a> <wikitopic JDK /wikitopic>1.1 is easy, but slow. The native interface for a <a href="/view.php?topic=JVM&web=Imported&PHPSESSID=d3ff4907cf83c9e96eecb2989a1f1d2c">JVM</a> <wikitopic JVM /wikitopic>like decaf needs to be safe, easy, and fast. Like decaf, it should be C++ rather than C.</P>
<P>Each class with native methods in Java might have a corresponding class in C++. When an bytecode object is created, a corresponding machine code object is created, something like a OO peer. If someone wants to implement a C routine, they can do it through a C++ wrapper. A javah tool must create a C++ header file from a pre-compiled class file. It should use pure reflection for that.</P>
</UL>
<H4>Test classes</H4>
<P>With a little teamwork, we could write many little test programs in bytecode to demonstrate the functionality of decaf. Should we use the <CODE>javac</CODE> tool or <CODE>jasmin</CODE>? <CODE>jasmin</CODE> is a bytecode assembler.</P>
<P>When each function in decaf is demonstrated by a corresponding test suite, we can measure our progress. We can know for sure when we're done with <a href="/view.php?topic=JDK&web=Imported&PHPSESSID=d3ff4907cf83c9e96eecb2989a1f1d2c">JDK</a> <wikitopic JDK /wikitopic>1.0 compatibility before moving on to <a href="/view.php?topic=JDK&web=Imported&PHPSESSID=d3ff4907cf83c9e96eecb2989a1f1d2c">JDK</a> <wikitopic JDK /wikitopic>1.1 and 1.2.</P>
<P>With the wide availability of the <CODE>javac</CODE> tool, many members of the <nolink>JOS Project can contribute little test programs. A <a href="/view.php?topic=JVM&web=Imported&PHPSESSID=d3ff4907cf83c9e96eecb2989a1f1d2c">JVM</a> <wikitopic JVM /wikitopic>needs to implement a testing/debugging <nolink>API. Each test program should extend <a href="/view.php?topic=BasicTestProgram&PHPSESSID=d3ff4907cf83c9e96eecb2989a1f1d2c">BasicTestProgram</a><wikitopic BasicTestProgram /wikitopic> (or implement the <a href="/view.php?topic=TestProgram&PHPSESSID=d3ff4907cf83c9e96eecb2989a1f1d2c">TestProgram</a><wikitopic TestProgram /wikitopic> interface). Without using <CODE>java.io</CODE>, a test program needs to send a string to the console -- just like <CODE>kprint()</CODE>.</P>
<P><EM>Which test programs have already been written?</EM></P>
<P><EM>Which test programs need to be written?</EM></P>
<H4>Test packages</H4>
<P>All test programs that test <nolink>JVM functionality should be a test suite package inside the <CODE>org.jos.test</CODE> package.</P>
<H4>History</H4>
<P>Even before I became a member of the <nolink>JOS Project, I studied the architecture of a Java Virtual Machine. Sun Microsystems published <a href="/view.php?topic=JDK&web=Imported&PHPSESSID=d3ff4907cf83c9e96eecb2989a1f1d2c">JDK</a> <wikitopic JDK /wikitopic>1.0.2. Many books, including <EM>Hooked on Java</EM>, explained how the platform-independent <a href="/view.php?topic=JVM&web=Imported&PHPSESSID=d3ff4907cf83c9e96eecb2989a1f1d2c">JVM</a> <wikitopic JVM /wikitopic>required <a href="/view.php?topic=JVMSpecificClasses&PHPSESSID=d3ff4907cf83c9e96eecb2989a1f1d2c">JVMSpecificClasses</a><wikitopic JVMSpecificClasses /wikitopic>.</P>
<P>Based on other bytecode-oriented platforms, I understood the potential of platform-independent bytecode technology. A bytecode interpreter is reduced to a minimalist implementation. Additional features are provided by bytecode libraries.</P>
<P>JDK 1.0.2 presented a twist in the typical bytecode platform. It embraced the need for bytecode to invoke machine code as if it were bytecode. The <EM>native</EM> method is an inspired piece of object-oriented thinking.</P>
<H4>Potential</H4>
<P>The potential of a platform-independent bytecode interpreter is this: once an open-source bytecode interpreter is implemented for a platform, it never has to be implemented from scratch again. When the bytecode interpreter becomes stable, you can take it for granted. Like many operating system services we take for granted, we can assume that every foreign platform has a bytecode interpreter.</P>
<P>A bytecode interpreter can be built to last. The interpreter itself does not need to change. Using well designed opcodes, a virtual machine can process any language, any version, any bytecode without an upgrade.</P>
<P>The potential is still there. So far, nobody has tapped into the potential of a mostly-bytecode operating system. (We're working on it.)</P>
<H4>Prepare yourself</H4>
<P>The market is unprepared for the implications of a mostly-bytecode platform. It is unlike any operating system we've seen before. It does not follow the old rules (assumptions) about what an operating system is, how an operating system works.</P>
<P><EM>Are you ready?</EM></P>
<P>When you build mostly-bytecode operating system <STRONG>and</STRONG> it is compatible with Sun Microsystems' Java Virtual Machine, you have built an operating system that runs by itself (Yes!) and runs on all foreign platforms, too (Huh?).</P>
<P>Bytecode is bytecode. When it is interpreted by a process running on Linux, the bytecode performs opcode-by-opcode whatever the programmer wants. When it is interpreted by decaf running on jJOS, the bytecode performs opcode-by-opcode whatever the programmer wants.</P>
<P>The potential of this platform comes from its universal appeal. Bytecode runs on 22+ foreign platforms and 1 native platform (<nolink>JOS). Everyone can use it immediately, without giving up anything.</P>
<P>For all of us that want a new operating system, we have a difficult road ahead. We have to catch up to the subsystems and reliability of all these foreign operating systems.</P><BR><BR></P><!--

<TABLE width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="737b9c">
<TR><TD ALIGN="CENTER">
<a href="/user.php?op=login&redirect=%2Fview%2F%2FBCNIMeetsCore&PHPSESSID=d3ff4907cf83c9e96eecb2989a1f1d2c">login</a> or <a href="/user.php?op=newacct&redirect=%2Fview%2F%2FBCNIMeetsCore&PHPSESSID=d3ff4907cf83c9e96eecb2989a1f1d2c">new&nbsp;user</a><TR><TD>
</TABLE>

!-->
<!-- end BODY page !-->

<HR>

<DIV ALIGN="CENTER">
<TABLE BORDER="0" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR>
	<TD ALIGN="CENTER" COLSPAN="2">
		Content of these pages are owned and copyrighted by the poster.
	</TD>
</TR>
<TR>
	<TD ALIGN="RIGHT" WIDTH="50%">
		Hosted by:
	</TD>
	<TD ALIGN="LEFT">
		<A HREF="http://sourceforge.net/"><IMG 
			SRC="http://sourceforge.net/sflogo.php?group_id=2376&type=1"
			BORDER=0 HSPACE=0 VSPACE=0></A>
	</TD>
</TR>
</TABLE>
</DIV>
</BODY>
</HTML>
