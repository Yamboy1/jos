<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 FINAL//EN">
<HTML>
  <HEAD>
    <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=ISO-8859-1">
    <TITLE>DecafAndEclipse.Main @ jos.sf.net</TITLE>
  </HEAD>

<BODY BGCOLOR="#FFFFFF">

<!-- The FORM encloses the entire header, because it renders better that way. !-->
<FORM ACTION="/jump.php"><input type="hidden" name="PHPSESSID" value="1562617d39d8075d89a12d8169e80f09" />

<!-- The JOS logo. !-->
<TABLE BORDER="0" CELLSPACING="0" CELLPADDING="3" WIDTH="100%">
<TR VALIGN="TOP" ALIGN="LEFT">
	<TD><A HREF="http://cjos.sourceforge.net/archive/"><IMG 
		VSPACE="0" HSPACE="0" ALIGN="MIDDLE" BORDER="0"
		SRC="http://cjos.sourceforge.net/archive/media/jos_logo_mini.gif"></A></TD>
	<!-- The tab table. !-->
	<TD WIDTH="100%" ALIGN="RIGHT" BGCOLOR="#FFFFFF" VALIGN="BOTTOM"> 
		<TABLE BORDER="0" CELLSPACING="0" CELLPADDING="3" WIDTH="100%" ALIGN="RIGHT">
			<TR VALIGN="MIDDLE" ALIGN="LEFT">

<TD BGCOLOR="White" WIDTH="60%">&nbsp;</TD>
<TD BGCOLOR="#FFFFCC"><A HREF="http://cjos.sourceforge.net/archive/">Home</A></TD>
<TD BGCOLOR="White">&nbsp;</TD>
<TD WIDTH="10%" BGCOLOR="#FFFFCC" ALIGN="CENTER"><A HREF="http://cjos.sourceforge.net/archive/info/">Info</A></TD>
<TD BGCOLOR="White">&nbsp;</TD>
<TD WIDTH="10%" BGCOLOR="#FFFFCC" ALIGN="CENTER"><A HREF="http://cjos.sourceforge.net/archive/dev/">DevZone</A></TD>
<TD BGCOLOR="White">&nbsp;</TD>
<TD WIDTH="10%" BGCOLOR="#FFCC66" ALIGN="CENTER"><A
HREF="http://jos.sourceforge.net/">Wiki</A></TD>
<TD BGCOLOR="White">&nbsp;</TD>
			</TR>
			<TR>
				<TD BGCOLOR="#FFCC66" ALIGN="RIGHT" COLSPAN="9">
					<A HREF="/view/Users/?PHPSESSID=1562617d39d8075d89a12d8169e80f09">UsersWeb</A>
					&nbsp;|&nbsp;
					<A HREF="/view/Main/?PHPSESSID=1562617d39d8075d89a12d8169e80f09">MainWeb</A>
					&nbsp;|&nbsp;
					<A HREF="/view/Info/?PHPSESSID=1562617d39d8075d89a12d8169e80f09">InfoWeb</A>
					&nbsp;|&nbsp;
					<A HREF="/view/DevZone/?PHPSESSID=1562617d39d8075d89a12d8169e80f09">DevZoneWeb</A>
					&nbsp;|&nbsp;
					<A HREF="/view/Support/?PHPSESSID=1562617d39d8075d89a12d8169e80f09">SupportWeb</A>
				</TD>
			</TR>
		</TABLE>
	</TD>		
</TR>
<!-- The WikiHeader. !-->
<TR><TD COLSPAN="2">
<TABLE BORDER="0" CELLSPACING="0" CELLPADDING="3" WIDTH="100%">
<TR>
	<TD WIDTH="25%" ALIGN="CENTER" BGCOLOR="#FFFFCC" VALIGN="CENTER">
		<B>[&nbsp;<a href="/info//DecafAndEclipse?PHPSESSID=1562617d39d8075d89a12d8169e80f09">DecafAndEclipse</a>&nbsp;]</B>
	</TD>
	<TD WIDTH="25%" ALIGN="CENTER" BGCOLOR="#FFEE88" VALIGN="CENTER">
		<B>[ not logged in ]</B>	</TD>
	<TD WIDTH="25%" ALIGN="CENTER" BGCOLOR="#FFDD77" VALIGN="CENTER">
		<B>[ Web: <a href="/view/Main/?PHPSESSID=1562617d39d8075d89a12d8169e80f09">Main</a> ]</B>	</TD>
	<TD WIDTH="25%" ALIGN="CENTER" BGCOLOR="#FFCC66" VALIGN="CENTER">
		goto:&nbsp;<INPUT TYPE="TEXT" SIZE="10" NAME="topic"><!--<INPUT TYPE="IMAGE" SRC="/media/go.gif?PHPSESSID=1562617d39d8075d89a12d8169e80f09" BORDER="0" VALUE="topic" ALT="goto">!-->&nbsp;<a href="/search.php?PHPSESSID=1562617d39d8075d89a12d8169e80f09"><FONT SIZE="-1">options</FONT></a>
	</TD>
</TR>
</TABLE>

<TABLE BORDER="0" CELLSPACING="0" CELLPADDING="3" WIDTH="100%">
	<TR>
	<TD ALIGN="CENTER" BGCOLOR="#FFFFCC" VALIGN="TOP">
		[&nbsp;get <a href="/info/Main/DecafAndEclipse?PHPSESSID=1562617d39d8075d89a12d8169e80f09">info</a> on or <a href="/edit/Main/DecafAndEclipse?PHPSESSID=1562617d39d8075d89a12d8169e80f09">edit</a>&nbsp;]	</TD>
	<TD ALIGN="CENTER" BGCOLOR="#FFEE88" VALIGN="TOP">
		[&nbsp;<a href="/user.php?op=login&redirect=%2Fview%2F%2FDecafAndEclipse&PHPSESSID=1562617d39d8075d89a12d8169e80f09">login</a> or <a href="/user.php?op=newacct&redirect=%2Fview%2F%2FDecafAndEclipse&PHPSESSID=1562617d39d8075d89a12d8169e80f09">new&nbsp;user</a>&nbsp;]	</TD>
	<TD ALIGN="CENTER" BGCOLOR="#FFDD77" VALIGN="TOP">
		[&nbsp;list of <a href="/topics/Main/?PHPSESSID=1562617d39d8075d89a12d8169e80f09">topics</a>, <a href="/hubsnodes/Main/?PHPSESSID=1562617d39d8075d89a12d8169e80f09">hubs&nbsp;&amp;&nbsp;nodes</a>, or <a href="/changes/Main/?PHPSESSID=1562617d39d8075d89a12d8169e80f09">recent&nbsp;changes</a>&nbsp;]	</TD>
	</TR>
</TABLE>

<!-- From CommonHeader !-->
</TR></TD>
</TABLE>
</FORM>

<!-- start BODY page !-->
<P>
<a href="/view.php?topic=JJOSPages&PHPSESSID=1562617d39d8075d89a12d8169e80f09">JJOSPages</a><wikitopic JJOSPages /wikitopic>
<HR>
<h4>Introduction</h4>
This page explains how to get up and running as a decaf developer with the <a href="/view.php?topic=EclipseIDE&PHPSESSID=1562617d39d8075d89a12d8169e80f09">EclipseIDE</a><wikitopic EclipseIDE /wikitopic>.  The instructions are valid for a <a href="/view.php?topic=UNIX&web=Main&PHPSESSID=1562617d39d8075d89a12d8169e80f09">UNIX</a> <wikitopic UNIX /wikitopic>environment where you have the ability to do filesystem links.
</P><P>
<h4>Installing Eclipse and the CDT</h4>
First, you need to get Eclipse.  Go to <a href="http://www.eclipse.org">http://www.eclipse.org</a> and download the latest release (currently 2.1).  If you are on Linux, I suggest the <a href="/view.php?topic=GLIBC&web=Main&PHPSESSID=1562617d39d8075d89a12d8169e80f09">GLIBC</a> <wikitopic GLIBC /wikitopic>version.  Also get the latest release of the <a href="/view.php?topic=CDT&web=Main&PHPSESSID=1562617d39d8075d89a12d8169e80f09">CDT</a> <wikitopic CDT /wikitopic>(http://www.eclipse.org/cdt/) (currently 1.01) for your Eclipse platform.  Even though the <a href="/view.php?topic=CDT&web=Main&PHPSESSID=1562617d39d8075d89a12d8169e80f09">CDT</a> <wikitopic CDT /wikitopic>was built with Eclipse 2.0, it does still work well enough with Eclipse 2.1, even if the Eclipse installer doesn't believe it.  The features and bug fixes in 2.1 over 2.0 are well worth the upgrade.  You'll be well served if you also install the absolute latest Sun <a href="/view.php?topic=JDK&web=Main&PHPSESSID=1562617d39d8075d89a12d8169e80f09">JDK</a> <wikitopic JDK /wikitopic>on which to run Eclipse.  The latest versions of the Sun <a href="/view.php?topic=JDK&web=Main&PHPSESSID=1562617d39d8075d89a12d8169e80f09">JDK</a> <wikitopic JDK /wikitopic>have hotcode replace and speed improvements both of which you'll be thankful for.  For building decaf, you will also need to have a 1.1.x VM available on your system.  
</P><P>
Extract your Eclipse build to the /usr directory.  Create a shortcut to    
<UL> <LI> /usr/eclipse/eclipse -vm /usr/java/j2sdk1.4.1_02/bin/java -data /home/&lt;user&gt;/.workspace/ 
</UL> and start up Eclipse.  It will install itself this first time.  Next shut down Eclipse and extract the <a href="/view.php?topic=CDT&web=Main&PHPSESSID=1562617d39d8075d89a12d8169e80f09">CDT</a> <wikitopic CDT /wikitopic>to /usr/eclipse, then restart Eclipse.
</P><P>
<h4>Setting up decaf in Eclipse</h4>
Go to a command prompt and get Decaf from <a href="/view.php?topic=CVS&web=Main&PHPSESSID=1562617d39d8075d89a12d8169e80f09">CVS</a> <wikitopic CVS /wikitopic>like <a href="/view.php?topic=SourceForge&PHPSESSID=1562617d39d8075d89a12d8169e80f09">SourceForge</a><wikitopic SourceForge /wikitopic> tells you to.  Put it somewhere like /home/&lt;user&gt;/cvs/decafxx.
</P><P>
Now, you'll create four projects in Eclipse, three Java projects for decaf java code, and one C++ project for the JJOS/decaf C++ code.  Name them 'decaf', 'decaf-i386', 'decaf-linux', and 'JJOS'.  Once they are created, open your shell and create links as follows:
<UL> <LI> ~/.workspace/decaf/&gt; ln -s ~/cvs/decaf3b/java/src/common src
<LI> ~/.workspace/decaf/&gt; ln -s ~/cvs/decaf3b/java/build/stub stub-bin
<LI> ~/.workspace/decaf-linux/&gt; ln -s ~/cvs/decaf3b/java/src/linux src
<LI> ~/.workspace/decaf-i386/&gt; ln -s ~/cvs/decaf3b/java/src/i386 src
<LI> ~/.workspace/JJOS/&gt; ln -s ~/cvs/decaf3b/cpp cpp
</UL> 
Now, you have to tell Eclipse about these directories.  Go into Eclipse and refresh each of the projects.  It will do a meaningless compile with lots of errors, ignore it and let it finish.  Go into the properties for each Java project in turn and change the Source directory the the src directory you just created.  Make sure to change the output directory to .workspace/&lt;project&gt;/bin.
In the 'decaf' project you'll have to add two additional paths.  Go the the properties -&gt; Java Build Path -&gt; Libraries and add two class folders, /decaf/stub-bin and /decaf-linux/bin.  This will fix your remaining Java build problems.  Any errors left are real errors.
</P><P>
Last, you need to get the C++ code to build.  Go to <a href="/view.php?topic=JJOS&web=Main&PHPSESSID=1562617d39d8075d89a12d8169e80f09">JJOS</a> <wikitopic JJOS /wikitopic>-&gt; Properties -&gt; C/C++ Project -&gt; Build Settings -&gt; Build Command.  Uncheck 'use default' and put in your build command: make -C ~/cvs/decaf3b/cpp/build/linux/ all
</P><P>
Now when you need to build the C project go to Menu -&gt; Project -&gt; Rebuild Project, and your C errors will show up in the task list.  It is a good idea to filter the task list to only show tasks for the current selection and its children.  To do a <a href="/view.php?topic=GRUB&web=Main&PHPSESSID=1562617d39d8075d89a12d8169e80f09">GRUB</a> <wikitopic GRUB /wikitopic>build you will still need to use the command line.
</P><P>
<h4>Summary</h4>
I haven't yet gotten to the point of trying to use the debugger, but these directions will at least get you out of using simple text editors for <a href="/view.php?topic=JOS&web=Main&PHPSESSID=1562617d39d8075d89a12d8169e80f09">JOS</a> <wikitopic JOS /wikitopic>development and give you all of the refactoring and other nice features that Eclipse can give you to increase your productivity in your precious little development time!
</P><P>
Authors:
<UL> <LI> <a href="/view.php?topic=AveryRegier&PHPSESSID=1562617d39d8075d89a12d8169e80f09">AveryRegier</a><wikitopic AveryRegier /wikitopic> (4/19/2003)
</UL> 
</P><P>
</P><P><BR><BR></P><!--

<TABLE width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="737b9c">
<TR><TD ALIGN="CENTER">
<a href="/user.php?op=login&redirect=%2Fview%2F%2FDecafAndEclipse&PHPSESSID=1562617d39d8075d89a12d8169e80f09">login</a> or <a href="/user.php?op=newacct&redirect=%2Fview%2F%2FDecafAndEclipse&PHPSESSID=1562617d39d8075d89a12d8169e80f09">new&nbsp;user</a><TR><TD>
</TABLE>

!-->
<!-- end BODY page !-->

<HR>

<DIV ALIGN="CENTER">
<TABLE BORDER="0" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR>
	<TD ALIGN="CENTER" COLSPAN="2">
		Content of these pages are owned and copyrighted by the poster.
	</TD>
</TR>
<TR>
	<TD ALIGN="RIGHT" WIDTH="50%">
		Hosted by:
	</TD>
	<TD ALIGN="LEFT">
		<A HREF="http://sourceforge.net/"><IMG 
			SRC="http://sourceforge.net/sflogo.php?group_id=2376&type=1"
			BORDER=0 HSPACE=0 VSPACE=0></A>
	</TD>
</TR>
</TABLE>
</DIV>
</BODY>
</HTML>
