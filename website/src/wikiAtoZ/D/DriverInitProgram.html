<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 FINAL//EN">
<HTML>
  <HEAD>
    <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=ISO-8859-1">
    <TITLE>DriverInitProgram.Imported @ jos.sf.net</TITLE>
  </HEAD>

<BODY BGCOLOR="#FFFFFF">

<!-- The FORM encloses the entire header, because it renders better that way. !-->
<FORM ACTION="/jump.php"><input type="hidden" name="PHPSESSID" value="fac7198998e7b6277f5893c712ddd402" />

<!-- The JOS logo. !-->
<TABLE BORDER="0" CELLSPACING="0" CELLPADDING="3" WIDTH="100%">
<TR VALIGN="TOP" ALIGN="LEFT">
	<TD><A HREF="http://cjos.sourceforge.net/archive/"><IMG 
		VSPACE="0" HSPACE="0" ALIGN="MIDDLE" BORDER="0"
		SRC="http://cjos.sourceforge.net/archive/media/jos_logo_mini.gif"></A></TD>
	<!-- The tab table. !-->
	<TD WIDTH="100%" ALIGN="RIGHT" BGCOLOR="#FFFFFF" VALIGN="BOTTOM"> 
		<TABLE BORDER="0" CELLSPACING="0" CELLPADDING="3" WIDTH="100%" ALIGN="RIGHT">
			<TR VALIGN="MIDDLE" ALIGN="LEFT">

<TD BGCOLOR="White" WIDTH="60%">&nbsp;</TD>
<TD BGCOLOR="#FFFFCC"><A HREF="http://cjos.sourceforge.net/archive/">Home</A></TD>
<TD BGCOLOR="White">&nbsp;</TD>
<TD WIDTH="10%" BGCOLOR="#FFFFCC" ALIGN="CENTER"><A HREF="http://cjos.sourceforge.net/archive/info/">Info</A></TD>
<TD BGCOLOR="White">&nbsp;</TD>
<TD WIDTH="10%" BGCOLOR="#FFFFCC" ALIGN="CENTER"><A HREF="http://cjos.sourceforge.net/archive/dev/">DevZone</A></TD>
<TD BGCOLOR="White">&nbsp;</TD>
<TD WIDTH="10%" BGCOLOR="#FFCC66" ALIGN="CENTER"><A
HREF="http://jos.sourceforge.net/">Wiki</A></TD>
<TD BGCOLOR="White">&nbsp;</TD>
			</TR>
			<TR>
				<TD BGCOLOR="#FFCC66" ALIGN="RIGHT" COLSPAN="9">
					<A HREF="/view/Users/?PHPSESSID=fac7198998e7b6277f5893c712ddd402">UsersWeb</A>
					&nbsp;|&nbsp;
					<A HREF="/view/Main/?PHPSESSID=fac7198998e7b6277f5893c712ddd402">MainWeb</A>
					&nbsp;|&nbsp;
					<A HREF="/view/Info/?PHPSESSID=fac7198998e7b6277f5893c712ddd402">InfoWeb</A>
					&nbsp;|&nbsp;
					<A HREF="/view/DevZone/?PHPSESSID=fac7198998e7b6277f5893c712ddd402">DevZoneWeb</A>
					&nbsp;|&nbsp;
					<A HREF="/view/Support/?PHPSESSID=fac7198998e7b6277f5893c712ddd402">SupportWeb</A>
				</TD>
			</TR>
		</TABLE>
	</TD>		
</TR>
<!-- The WikiHeader. !-->
<TR><TD COLSPAN="2">
<TABLE BORDER="0" CELLSPACING="0" CELLPADDING="3" WIDTH="100%">
<TR>
	<TD WIDTH="25%" ALIGN="CENTER" BGCOLOR="#FFFFCC" VALIGN="CENTER">
		<B>[&nbsp;<a href="/info//DriverInitProgram?PHPSESSID=fac7198998e7b6277f5893c712ddd402">DriverInitProgram</a>&nbsp;]</B>
	</TD>
	<TD WIDTH="25%" ALIGN="CENTER" BGCOLOR="#FFEE88" VALIGN="CENTER">
		<B>[ not logged in ]</B>	</TD>
	<TD WIDTH="25%" ALIGN="CENTER" BGCOLOR="#FFDD77" VALIGN="CENTER">
		<B>[ Web: <a href="/view/Imported/?PHPSESSID=fac7198998e7b6277f5893c712ddd402">Imported</a> ]</B>	</TD>
	<TD WIDTH="25%" ALIGN="CENTER" BGCOLOR="#FFCC66" VALIGN="CENTER">
		goto:&nbsp;<INPUT TYPE="TEXT" SIZE="10" NAME="topic"><!--<INPUT TYPE="IMAGE" SRC="/media/go.gif?PHPSESSID=fac7198998e7b6277f5893c712ddd402" BORDER="0" VALUE="topic" ALT="goto">!-->&nbsp;<a href="/search.php?PHPSESSID=fac7198998e7b6277f5893c712ddd402"><FONT SIZE="-1">options</FONT></a>
	</TD>
</TR>
</TABLE>

<TABLE BORDER="0" CELLSPACING="0" CELLPADDING="3" WIDTH="100%">
	<TR>
	<TD ALIGN="CENTER" BGCOLOR="#FFFFCC" VALIGN="TOP">
		[&nbsp;get <a href="/info/Imported/DriverInitProgram?PHPSESSID=fac7198998e7b6277f5893c712ddd402">info</a> on or <a href="/edit/Imported/DriverInitProgram?PHPSESSID=fac7198998e7b6277f5893c712ddd402">edit</a>&nbsp;]	</TD>
	<TD ALIGN="CENTER" BGCOLOR="#FFEE88" VALIGN="TOP">
		[&nbsp;<a href="/user.php?op=login&redirect=%2Fview%2F%2FDriverInitProgram&PHPSESSID=fac7198998e7b6277f5893c712ddd402">login</a> or <a href="/user.php?op=newacct&redirect=%2Fview%2F%2FDriverInitProgram&PHPSESSID=fac7198998e7b6277f5893c712ddd402">new&nbsp;user</a>&nbsp;]	</TD>
	<TD ALIGN="CENTER" BGCOLOR="#FFDD77" VALIGN="TOP">
		[&nbsp;list of <a href="/topics/Imported/?PHPSESSID=fac7198998e7b6277f5893c712ddd402">topics</a>, <a href="/hubsnodes/Imported/?PHPSESSID=fac7198998e7b6277f5893c712ddd402">hubs&nbsp;&amp;&nbsp;nodes</a>, or <a href="/changes/Imported/?PHPSESSID=fac7198998e7b6277f5893c712ddd402">recent&nbsp;changes</a>&nbsp;]	</TD>
	</TR>
</TABLE>

<!-- From CommonHeader !-->
</TR></TD>
</TABLE>
</FORM>

<!-- start BODY page !-->
<P>
<FONT SIZE="-1"><a href="/view.php?topic=ProcessPages&PHPSESSID=fac7198998e7b6277f5893c712ddd402">ProcessPages</a><wikitopic ProcessPages /wikitopic></FONT>
<HR SIZE="1" NOSHADOW>
<P><EM>Article contributed by <a href="/view.php?topic=GilbertHerschberger&PHPSESSID=fac7198998e7b6277f5893c712ddd402">GilbertHerschberger</a><wikitopic GilbertHerschberger /wikitopic> (21 April 2000).</EM></P>
<H4>Introduction</H4>
<P>This article explains the relationship between the driver initialization program and a device driver.</P>
<H4>Sequence</H4>
<P>At some point in the start-up sequence, the system process turns its attention to setting up device drivers. Here is a step by step example of installing arbitrary drivers at start up.</P>
<P>The system process run its start-up script. It creates a start-up process and waits. Only one new process is required. This process is garbage collected when the start-up script comes to an end.</P>
<P>The start-up script contains a list of programs. The start-up process runs each program in the list sequentially, from first to last. Each program in the start-up script is invoked as a subprogram of the start-up process. No new process is created. No new thread is created. Some of these programs install device drivers.</P>
<P>Each start-up program is loaded by a process class loader, so that its classes and static fields can be garbage collected when the start-up process dies.</P>
<P>A driver initialization program is just another program in the start-up script. It uses whatever means necessary to select and load a device driver. It uses a mechanism provided by the system process to create a device driver and plug it into the driver manager. A driver manager does not plug device drivers into itself.</P>
<P>The driver manager must be owned by the system process. The driver manager must exist before the start of the start-up script.</P>
<P>Each device driver must be owned by the system process. It must be plugged into the driver manager. It must survive the lifetime of a driver initialization program.</P>
<P>A driver initialization program is transient. It's resources can be reclaimed once it has installed its driver. A device driver must be loaded by a driver initialization program.</P>
<H4>Driver selection</H4>
<P>A driver initialization program can probe the hardware and select an appropriate driver. The driver initialazation program can be huge, as complex as necessary to select the right driver. The driver initialization program itself will be garbage collected anyway.</P>
<P>A driver initialization program can attach to the driver manager through the <a href="/view.php?topic=BytecodeNativeInterface&PHPSESSID=fac7198998e7b6277f5893c712ddd402">BytecodeNativeInterface</a><wikitopic BytecodeNativeInterface /wikitopic>, or BCNI. Here is an example of a typical program's code:</P>
<PRE>
  public void run() {
	 URI uri = new URI( "bcni:jos.driver.DriverManager" );
	 DriverManager manager = (DriverManager) uri.getObject();
	 int iMax = 16;
	 for ( int i = 0; i &lt; iMax; i++ ) {
		manager.addDriver( "/ports/serial/" + i,
			 new GenericSerialPortDriver( i ) );
		manager.addDriver( "/ports/parallel/" + i,
			 new GenericParallelPortDriver( i ) );
	 }
  }
</PRE>
<P>The driver initialization program can be run at start-up or at any time thereafter. It always runs in a user process. Therefore, a driver initialization program can be run manually to re-install a driver without rebooting the kernel. Here is an example of removing a driver.</P>
<PRE>
	 URI uri = new URI( "bcni:jos.driver.DriverManager" );
	 DriverManager manager = (DriverManager) uri.getObject();
	 int iMax = 16;
	 for ( int i = 0; i &lt; iMax; i++ ) {
		manager.removeDriver( "/ports/serial/" + i );
		manager.removeDriver( "/ports/parallel/" + i );
	 }
</PRE>
<H4>Interactive</H4>
<P>Unlike other operating systems, a driver initialization program can be fully interactive. If the first program in the start-up sequence installs a video driver, subsequent driver installation programs can use AWT/Swing to load, configure and plug-in drivers. A driver initialization program can pop up an dialog box and ask the owner of a computer what it should do.</P>
<UL>
<LI><P>A driver initialization program can install many drivers.</P>
<P>Once a program has an instance of <CODE>DriverManager</CODE>, it can install one or more drivers.</P>
<LI><P>A driver initialization program can remove any driver.</P>
<P>One driver initialization program can override another. It can remove a previous driver and install its own. A local version of a driver can be daisy-chained to a network version of the same driver.</P>
<LI><P>A driver installation program can run just in case -- for drivers that may or may not be needed.</P>
<P>Many peripherals need to have a driver if they are detected. A network initialization program may always run, but only install a network driver if it detects a network interface card.</P>
</UL>
<H4>Summary</H4>
<P>Driver initialization is separate from the driver. A device driver must be owned by the system process because the driver manager is owned by the system process. The driver initialization program can be thrown away after it has installed a device driver.</P><BR><BR></P><!--

<TABLE width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="737b9c">
<TR><TD ALIGN="CENTER">
<a href="/user.php?op=login&redirect=%2Fview%2F%2FDriverInitProgram&PHPSESSID=fac7198998e7b6277f5893c712ddd402">login</a> or <a href="/user.php?op=newacct&redirect=%2Fview%2F%2FDriverInitProgram&PHPSESSID=fac7198998e7b6277f5893c712ddd402">new&nbsp;user</a><TR><TD>
</TABLE>

!-->
<!-- end BODY page !-->

<HR>

<DIV ALIGN="CENTER">
<TABLE BORDER="0" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR>
	<TD ALIGN="CENTER" COLSPAN="2">
		Content of these pages are owned and copyrighted by the poster.
	</TD>
</TR>
<TR>
	<TD ALIGN="RIGHT" WIDTH="50%">
		Hosted by:
	</TD>
	<TD ALIGN="LEFT">
		<A HREF="http://sourceforge.net/"><IMG 
			SRC="http://sourceforge.net/sflogo.php?group_id=2376&type=1"
			BORDER=0 HSPACE=0 VSPACE=0></A>
	</TD>
</TR>
</TABLE>
</DIV>
</BODY>
</HTML>
