<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 FINAL//EN">
<HTML>
  <HEAD>
    <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=ISO-8859-1">
    <TITLE>DistributionProposal.Imported @ jos.sf.net</TITLE>
  </HEAD>

<BODY BGCOLOR="#FFFFFF">

<!-- The FORM encloses the entire header, because it renders better that way. !-->
<FORM ACTION="/jump.php"><input type="hidden" name="PHPSESSID" value="5240c84663f0afaf318b7522a93f685f" />

<!-- The JOS logo. !-->
<TABLE BORDER="0" CELLSPACING="0" CELLPADDING="3" WIDTH="100%">
<TR VALIGN="TOP" ALIGN="LEFT">
	<TD><A HREF="http://cjos.sourceforge.net/archive/"><IMG 
		VSPACE="0" HSPACE="0" ALIGN="MIDDLE" BORDER="0"
		SRC="http://cjos.sourceforge.net/archive/media/jos_logo_mini.gif"></A></TD>
	<!-- The tab table. !-->
	<TD WIDTH="100%" ALIGN="RIGHT" BGCOLOR="#FFFFFF" VALIGN="BOTTOM"> 
		<TABLE BORDER="0" CELLSPACING="0" CELLPADDING="3" WIDTH="100%" ALIGN="RIGHT">
			<TR VALIGN="MIDDLE" ALIGN="LEFT">

<TD BGCOLOR="White" WIDTH="60%">&nbsp;</TD>
<TD BGCOLOR="#FFFFCC"><A HREF="http://cjos.sourceforge.net/archive/">Home</A></TD>
<TD BGCOLOR="White">&nbsp;</TD>
<TD WIDTH="10%" BGCOLOR="#FFFFCC" ALIGN="CENTER"><A HREF="http://cjos.sourceforge.net/archive/info/">Info</A></TD>
<TD BGCOLOR="White">&nbsp;</TD>
<TD WIDTH="10%" BGCOLOR="#FFFFCC" ALIGN="CENTER"><A HREF="http://cjos.sourceforge.net/archive/dev/">DevZone</A></TD>
<TD BGCOLOR="White">&nbsp;</TD>
<TD WIDTH="10%" BGCOLOR="#FFCC66" ALIGN="CENTER"><A
HREF="http://jos.sourceforge.net/">Wiki</A></TD>
<TD BGCOLOR="White">&nbsp;</TD>
			</TR>
			<TR>
				<TD BGCOLOR="#FFCC66" ALIGN="RIGHT" COLSPAN="9">
					<A HREF="/view/Users/?PHPSESSID=5240c84663f0afaf318b7522a93f685f">UsersWeb</A>
					&nbsp;|&nbsp;
					<A HREF="/view/Main/?PHPSESSID=5240c84663f0afaf318b7522a93f685f">MainWeb</A>
					&nbsp;|&nbsp;
					<A HREF="/view/Info/?PHPSESSID=5240c84663f0afaf318b7522a93f685f">InfoWeb</A>
					&nbsp;|&nbsp;
					<A HREF="/view/DevZone/?PHPSESSID=5240c84663f0afaf318b7522a93f685f">DevZoneWeb</A>
					&nbsp;|&nbsp;
					<A HREF="/view/Support/?PHPSESSID=5240c84663f0afaf318b7522a93f685f">SupportWeb</A>
				</TD>
			</TR>
		</TABLE>
	</TD>		
</TR>
<!-- The WikiHeader. !-->
<TR><TD COLSPAN="2">
<TABLE BORDER="0" CELLSPACING="0" CELLPADDING="3" WIDTH="100%">
<TR>
	<TD WIDTH="25%" ALIGN="CENTER" BGCOLOR="#FFFFCC" VALIGN="CENTER">
		<B>[&nbsp;<a href="/info//DistributionProposal?PHPSESSID=5240c84663f0afaf318b7522a93f685f">DistributionProposal</a>&nbsp;]</B>
	</TD>
	<TD WIDTH="25%" ALIGN="CENTER" BGCOLOR="#FFEE88" VALIGN="CENTER">
		<B>[ not logged in ]</B>	</TD>
	<TD WIDTH="25%" ALIGN="CENTER" BGCOLOR="#FFDD77" VALIGN="CENTER">
		<B>[ Web: <a href="/view/Imported/?PHPSESSID=5240c84663f0afaf318b7522a93f685f">Imported</a> ]</B>	</TD>
	<TD WIDTH="25%" ALIGN="CENTER" BGCOLOR="#FFCC66" VALIGN="CENTER">
		goto:&nbsp;<INPUT TYPE="TEXT" SIZE="10" NAME="topic"><!--<INPUT TYPE="IMAGE" SRC="/media/go.gif?PHPSESSID=5240c84663f0afaf318b7522a93f685f" BORDER="0" VALUE="topic" ALT="goto">!-->&nbsp;<a href="/search.php?PHPSESSID=5240c84663f0afaf318b7522a93f685f"><FONT SIZE="-1">options</FONT></a>
	</TD>
</TR>
</TABLE>

<TABLE BORDER="0" CELLSPACING="0" CELLPADDING="3" WIDTH="100%">
	<TR>
	<TD ALIGN="CENTER" BGCOLOR="#FFFFCC" VALIGN="TOP">
		[&nbsp;get <a href="/info/Imported/DistributionProposal?PHPSESSID=5240c84663f0afaf318b7522a93f685f">info</a> on or <a href="/edit/Imported/DistributionProposal?PHPSESSID=5240c84663f0afaf318b7522a93f685f">edit</a>&nbsp;]	</TD>
	<TD ALIGN="CENTER" BGCOLOR="#FFEE88" VALIGN="TOP">
		[&nbsp;<a href="/user.php?op=login&redirect=%2Fview%2F%2FDistributionProposal&PHPSESSID=5240c84663f0afaf318b7522a93f685f">login</a> or <a href="/user.php?op=newacct&redirect=%2Fview%2F%2FDistributionProposal&PHPSESSID=5240c84663f0afaf318b7522a93f685f">new&nbsp;user</a>&nbsp;]	</TD>
	<TD ALIGN="CENTER" BGCOLOR="#FFDD77" VALIGN="TOP">
		[&nbsp;list of <a href="/topics/Imported/?PHPSESSID=5240c84663f0afaf318b7522a93f685f">topics</a>, <a href="/hubsnodes/Imported/?PHPSESSID=5240c84663f0afaf318b7522a93f685f">hubs&nbsp;&amp;&nbsp;nodes</a>, or <a href="/changes/Imported/?PHPSESSID=5240c84663f0afaf318b7522a93f685f">recent&nbsp;changes</a>&nbsp;]	</TD>
	</TR>
</TABLE>

<!-- From CommonHeader !-->
</TR></TD>
</TABLE>
</FORM>

<!-- start BODY page !-->
<P>
<H1>
A Distributed, Persistent Architecture for JOS</H1>
by Ian Davis, 13 Nov 1997
<BR>Version 1.0 (Draft)
<BR>&nbsp;
<H2>
1. Introduction</H2>
</P><P>
<H3>
1.1 Overview</H3>
This document describes a proposal for implementing a distributed, persistent
architecture for JOS, a free Java Operating System. It proposes that the
Java Virtual Machine is partitioned into Domains, which communicate through
the use of RMI. The Distribution model proposed is only fairly granular
in that only whole processes can migrate between Domains.
<H3>
1.2 Goals</H3>
To create an architecture that will allow processes to be distributed amongst
a network of workstations so as to fully utilise spare processing capacity.
<H3>
1.3 Assumptions</H3>
The network is well connected.
<BR>The network is unreliable in that messages can be delayed for an arbitrary
amount of time or even lost completely.
<BR>The network can convey messages to multiple recipients but these may
arrive in any order.
<BR>Workstations on the network are heterogeneous in that they vary in
processing and storage capabilities.
<BR>Workstations on the network are homogenous in that they all run <a href="/view.php?topic=JOS&web=Imported&PHPSESSID=5240c84663f0afaf318b7522a93f685f">JOS</a><wikitopic JOS /wikitopic>
<H3>
1.4 Terminology</H3>
</P><P>
<DT>
Process</DT>
</P><P>
<DD>
A Process is created when a class's main() method is executed. Every Thread
and <a href="/view.php?topic=ThreadGroup&PHPSESSID=5240c84663f0afaf318b7522a93f685f">ThreadGroup</a><wikitopic ThreadGroup /wikitopic> instatantiaed by the Process's main thread is considered
to belong to that Process.</DD>
</P><P>
<H2>
2. Proposed Architecture</H2>
</P><P>
<H3>
2.1 Domains</H3>
A Domain is an environment within which Processes can execute. Domains
serve to partition a Virtual Machine into separate process environments.
</P><P>
<P>To enable complete partitioning of the Virtual Machine it is necessary
to provide distinct copies of certain core Java classes to each Domain.
These are:
<UL>
<LI>
java.lang.ClassLoader - each Domain may implement a different strategy
for loading classes</LI>
</P><P>
<LI>
java.lang.Runtime - each Domain may implement a separate garbage collector
and memory manager.</LI>
</P><P>
<LI>
java.lang.SecurityManager - each Domain may implement a separate Security
model</LI>
</P><P>
<LI>
java.lang.System - each Domain may redirect standard io to different streams</LI>
</UL>
Multiple Domains may co-exist within the same Virtual Machine. Most of
the time only a single Domain will ever exist for a given Virtual Machine.
This scenario is functionaly identical to the standard Virtual Machine.
However, at times there will be more than one Domain in existence within
a single Virtual Machine. The first Domain to be instantiated in a Virtual
Machine is known as the Primary Domain. All other Domains are known as
Secondary Domains.
</P><P>
<P>Each of these Domains could represent a different user's environment
in a multi-user system or, since each Domain has control over it's own
security policy, separate Domains could be set up to run trusted and untrusted
classes.
</P><P>
<P>On creation, each Domain is assigned a unique <a href="/view.php?topic=DomainIdentifier&PHPSESSID=5240c84663f0afaf318b7522a93f685f">DomainIdentifier</a><wikitopic DomainIdentifier /wikitopic> based
on a <a href="/view.php?topic=GUID&web=Imported&PHPSESSID=5240c84663f0afaf318b7522a93f685f">GUID</a> <wikitopic GUID /wikitopic>which remains that Domain's identifier for the lifetime of that
Domain.
<BR>&nbsp;
<H3>
2.2 Inter-Domain Communication</H3>
Domains communicate with one another through the use of RMI. Each Domain
instantiates a <a href="/view.php?topic=DomainPortal&PHPSESSID=5240c84663f0afaf318b7522a93f685f">DomainPortal</a><wikitopic DomainPortal /wikitopic> object that implements the java.rmi.UnicastRemoteObject
interface. The <a href="/view.php?topic=DomainPortal&PHPSESSID=5240c84663f0afaf318b7522a93f685f">DomainPortal</a><wikitopic DomainPortal /wikitopic> object is that Domain's communication interface
with other Domains. It may be used to send messages and objects between
Domains.
</P><P>
<P>Any Domain wishing to communicate with another Domain obtains a reference
to the remote Domain's <a href="/view.php?topic=DomainPortal&PHPSESSID=5240c84663f0afaf318b7522a93f685f">DomainPortal</a><wikitopic DomainPortal /wikitopic> object through the use of the <a href="/view.php?topic=RMI&web=Imported&PHPSESSID=5240c84663f0afaf318b7522a93f685f">RMI</a> <wikitopic RMI /wikitopic>registry
service, providing a hostname and <a href="/view.php?topic=DomainIdentifier&PHPSESSID=5240c84663f0afaf318b7522a93f685f">DomainIdentifier</a><wikitopic DomainIdentifier /wikitopic>. Communication between
Domains is strictly controlled via the <a href="/view.php?topic=DomainPortal&PHPSESSID=5240c84663f0afaf318b7522a93f685f">DomainPortal</a><wikitopic DomainPortal /wikitopic> methods.
<H3>
2.3 Process Distribution</H3>
The proposed architecure allows for the migration of Processes between
Processes and thus create a distributed network of Virtual Machines. Processes
may be either migrated manually or automatically. A process may request
that the Domain transfers that process to a specific remote Domain or the
Domain itself can be left to decide when process should be shared.
</P><P>
<P>A Domain is considered to be either a Process Sender or a Process Receiver.
Domains will generally start in the Receiver state. Once a Domain specific
utilisation threshold has been exceeded the Domain switches state to become
a Sender of Processes. Once utilisation has fallen below a threshold the
Domain's state switches back to Receiver.
</P><P>
<P>Whenever a Domain changes its state it multicasts a message indicating
the change. This will either be "I'm idle, send me something to do" or
"I'm busy, who can take some of my work?". Any Domain in the Receiver state
receiving a Busy message can respond directly to the busy Domain requesting
a process. Any Domain, whether in the Sender state or not, can respond
to an Idle message requesting that the Idle Domain take a process. A Domain
is free to ignore or respond to any message as it sees fit. Domains may
implement any appropriate strategy to select the process to send to a remote
Domain.
</P><P>
<P>Each Process has a Parent Domain and an Owner Domain. The Parent Domain
is defined as the Domain in which the Process is currently executing. The
Owner Domain is defined as the Domain that actually owns the Process. The
Parent Domain and the Owner Domain may or may not be identical.
<BR>&nbsp;
<BR>Local strategies can also be implemented to ensure that Process distribution
utilises neighbouring Domains in preference to physically remote Domains,
or Domains connected only by slow links.
<H3>
2.4 Domain Managers</H3>
Each Domain has exactly one <a href="/view.php?topic=DomainManager&PHPSESSID=5240c84663f0afaf318b7522a93f685f">DomainManager</a><wikitopic DomainManager /wikitopic>. The <a href="/view.php?topic=DomainManager&PHPSESSID=5240c84663f0afaf318b7522a93f685f">DomainManager</a><wikitopic DomainManager /wikitopic> is responsible
for managing that Domain's persistent store by removing the semantic distinction
between accessing objects in memory and objects stored on disk. They are
also responsible for maintaining a consistent and recoverable representation
of the Domain. This can be achieved through the use of change logging.
</P><P>
<P>At regular intervals, particularly before a system shutdown, the <a href="/view.php?topic=DomainManager&PHPSESSID=5240c84663f0afaf318b7522a93f685f">DomainManager</a><wikitopic DomainManager /wikitopic>
will be required to stabilise the persistent store. This involves writing
each object to non volatile storage and creating a descriptor that may
be used to reconstruct the state of the processes within the Domain. Any
owners of any processes not owned by the current Domain must be informed
of the stabilisation request allowing the owning Domain a chance to recall
the process.
<H3>
2.5 Garbage Collection</H3>
Each Domain is responsible for garbage collecting the Processes it owns
including those hosted by remote Domains.<BR><BR></P><!--

<TABLE width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="737b9c">
<TR><TD ALIGN="CENTER">
<a href="/user.php?op=login&redirect=%2Fview%2F%2FDistributionProposal&PHPSESSID=5240c84663f0afaf318b7522a93f685f">login</a> or <a href="/user.php?op=newacct&redirect=%2Fview%2F%2FDistributionProposal&PHPSESSID=5240c84663f0afaf318b7522a93f685f">new&nbsp;user</a><TR><TD>
</TABLE>

!-->
<!-- end BODY page !-->

<HR>

<DIV ALIGN="CENTER">
<TABLE BORDER="0" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR>
	<TD ALIGN="CENTER" COLSPAN="2">
		Content of these pages are owned and copyrighted by the poster.
	</TD>
</TR>
<TR>
	<TD ALIGN="RIGHT" WIDTH="50%">
		Hosted by:
	</TD>
	<TD ALIGN="LEFT">
		<A HREF="http://sourceforge.net/"><IMG 
			SRC="http://sourceforge.net/sflogo.php?group_id=2376&type=1"
			BORDER=0 HSPACE=0 VSPACE=0></A>
	</TD>
</TR>
</TABLE>
</DIV>
</BODY>
</HTML>
