<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 FINAL//EN">
<HTML>
  <HEAD>
    <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=ISO-8859-1">
    <TITLE>ClassRepository.Imported @ jos.sf.net</TITLE>
  </HEAD>

<BODY BGCOLOR="#FFFFFF">

<!-- The FORM encloses the entire header, because it renders better that way. !-->
<FORM ACTION="/jump.php"><input type="hidden" name="PHPSESSID" value="c470b9bc87e5c6da5fb7cfbef14d5976" />

<!-- The JOS logo. !-->
<TABLE BORDER="0" CELLSPACING="0" CELLPADDING="3" WIDTH="100%">
<TR VALIGN="TOP" ALIGN="LEFT">
	<TD><A HREF="http://cjos.sourceforge.net/archive/"><IMG 
		VSPACE="0" HSPACE="0" ALIGN="MIDDLE" BORDER="0"
		SRC="http://cjos.sourceforge.net/archive/media/jos_logo_mini.gif"></A></TD>
	<!-- The tab table. !-->
	<TD WIDTH="100%" ALIGN="RIGHT" BGCOLOR="#FFFFFF" VALIGN="BOTTOM"> 
		<TABLE BORDER="0" CELLSPACING="0" CELLPADDING="3" WIDTH="100%" ALIGN="RIGHT">
			<TR VALIGN="MIDDLE" ALIGN="LEFT">

<TD BGCOLOR="White" WIDTH="60%">&nbsp;</TD>
<TD BGCOLOR="#FFFFCC"><A HREF="http://cjos.sourceforge.net/archive/">Home</A></TD>
<TD BGCOLOR="White">&nbsp;</TD>
<TD WIDTH="10%" BGCOLOR="#FFFFCC" ALIGN="CENTER"><A HREF="http://cjos.sourceforge.net/archive/info/">Info</A></TD>
<TD BGCOLOR="White">&nbsp;</TD>
<TD WIDTH="10%" BGCOLOR="#FFFFCC" ALIGN="CENTER"><A HREF="http://cjos.sourceforge.net/archive/dev/">DevZone</A></TD>
<TD BGCOLOR="White">&nbsp;</TD>
<TD WIDTH="10%" BGCOLOR="#FFCC66" ALIGN="CENTER"><A
HREF="http://jos.sourceforge.net/">Wiki</A></TD>
<TD BGCOLOR="White">&nbsp;</TD>
			</TR>
			<TR>
				<TD BGCOLOR="#FFCC66" ALIGN="RIGHT" COLSPAN="9">
					<A HREF="/view/Users/?PHPSESSID=c470b9bc87e5c6da5fb7cfbef14d5976">UsersWeb</A>
					&nbsp;|&nbsp;
					<A HREF="/view/Main/?PHPSESSID=c470b9bc87e5c6da5fb7cfbef14d5976">MainWeb</A>
					&nbsp;|&nbsp;
					<A HREF="/view/Info/?PHPSESSID=c470b9bc87e5c6da5fb7cfbef14d5976">InfoWeb</A>
					&nbsp;|&nbsp;
					<A HREF="/view/DevZone/?PHPSESSID=c470b9bc87e5c6da5fb7cfbef14d5976">DevZoneWeb</A>
					&nbsp;|&nbsp;
					<A HREF="/view/Support/?PHPSESSID=c470b9bc87e5c6da5fb7cfbef14d5976">SupportWeb</A>
				</TD>
			</TR>
		</TABLE>
	</TD>		
</TR>
<!-- The WikiHeader. !-->
<TR><TD COLSPAN="2">
<TABLE BORDER="0" CELLSPACING="0" CELLPADDING="3" WIDTH="100%">
<TR>
	<TD WIDTH="25%" ALIGN="CENTER" BGCOLOR="#FFFFCC" VALIGN="CENTER">
		<B>[&nbsp;<a href="/info//ClassRepository?PHPSESSID=c470b9bc87e5c6da5fb7cfbef14d5976">ClassRepository</a>&nbsp;]</B>
	</TD>
	<TD WIDTH="25%" ALIGN="CENTER" BGCOLOR="#FFEE88" VALIGN="CENTER">
		<B>[ not logged in ]</B>	</TD>
	<TD WIDTH="25%" ALIGN="CENTER" BGCOLOR="#FFDD77" VALIGN="CENTER">
		<B>[ Web: <a href="/view/Imported/?PHPSESSID=c470b9bc87e5c6da5fb7cfbef14d5976">Imported</a> ]</B>	</TD>
	<TD WIDTH="25%" ALIGN="CENTER" BGCOLOR="#FFCC66" VALIGN="CENTER">
		goto:&nbsp;<INPUT TYPE="TEXT" SIZE="10" NAME="topic"><!--<INPUT TYPE="IMAGE" SRC="/media/go.gif?PHPSESSID=c470b9bc87e5c6da5fb7cfbef14d5976" BORDER="0" VALUE="topic" ALT="goto">!-->&nbsp;<a href="/search.php?PHPSESSID=c470b9bc87e5c6da5fb7cfbef14d5976"><FONT SIZE="-1">options</FONT></a>
	</TD>
</TR>
</TABLE>

<TABLE BORDER="0" CELLSPACING="0" CELLPADDING="3" WIDTH="100%">
	<TR>
	<TD ALIGN="CENTER" BGCOLOR="#FFFFCC" VALIGN="TOP">
		[&nbsp;get <a href="/info/Imported/ClassRepository?PHPSESSID=c470b9bc87e5c6da5fb7cfbef14d5976">info</a> on or <a href="/edit/Imported/ClassRepository?PHPSESSID=c470b9bc87e5c6da5fb7cfbef14d5976">edit</a>&nbsp;]	</TD>
	<TD ALIGN="CENTER" BGCOLOR="#FFEE88" VALIGN="TOP">
		[&nbsp;<a href="/user.php?op=login&redirect=%2Fview%2F%2FClassRepository&PHPSESSID=c470b9bc87e5c6da5fb7cfbef14d5976">login</a> or <a href="/user.php?op=newacct&redirect=%2Fview%2F%2FClassRepository&PHPSESSID=c470b9bc87e5c6da5fb7cfbef14d5976">new&nbsp;user</a>&nbsp;]	</TD>
	<TD ALIGN="CENTER" BGCOLOR="#FFDD77" VALIGN="TOP">
		[&nbsp;list of <a href="/topics/Imported/?PHPSESSID=c470b9bc87e5c6da5fb7cfbef14d5976">topics</a>, <a href="/hubsnodes/Imported/?PHPSESSID=c470b9bc87e5c6da5fb7cfbef14d5976">hubs&nbsp;&amp;&nbsp;nodes</a>, or <a href="/changes/Imported/?PHPSESSID=c470b9bc87e5c6da5fb7cfbef14d5976">recent&nbsp;changes</a>&nbsp;]	</TD>
	</TR>
</TABLE>

<!-- From CommonHeader !-->
</TR></TD>
</TABLE>
</FORM>

<!-- start BODY page !-->
<P>
<a href="/view.php?topic=KernelGroup&PHPSESSID=c470b9bc87e5c6da5fb7cfbef14d5976">KernelGroup</a><wikitopic KernelGroup /wikitopic> working document.  Edit as you see fit.
<HR>
</P><P>
I have decided to take up the task of doing the Analyses &amp; Design work on the <a href="/view.php?topic=ClassRepository&PHPSESSID=c470b9bc87e5c6da5fb7cfbef14d5976">ClassRepository</a><wikitopic ClassRepository /wikitopic>, since no one else has.  Put simply:  it has to be done before <a href="/view.php?topic=JOS&web=Imported&PHPSESSID=c470b9bc87e5c6da5fb7cfbef14d5976">JOS</a> <wikitopic JOS /wikitopic>will exist.  My beginning point will be the work that has already been done on the requirements in the mailing lists and here, instead of redoing that work as is our custom in this project.  :)
</P><P>
I am not committing yet to the coding, but I will decide on that after these first tasks are complete.  I plan to use <a href="/view.php?topic=TogetherJ&PHPSESSID=c470b9bc87e5c6da5fb7cfbef14d5976">TogetherJ</a><wikitopic TogetherJ /wikitopic>, a 100% Pure Java <a href="/view.php?topic=OOAD&web=Imported&PHPSESSID=c470b9bc87e5c6da5fb7cfbef14d5976">OOAD</a> <wikitopic OOAD /wikitopic>tool.  If you have further thoughts on the requirements for this piece of <a href="/view.php?topic=JOS&web=Imported&PHPSESSID=c470b9bc87e5c6da5fb7cfbef14d5976">JOS</a> <wikitopic JOS /wikitopic>or want to note required interactions with other parts of JOS, please note them here.
</P><P>
-- <a href="/view.php?topic=AveryRegier&PHPSESSID=c470b9bc87e5c6da5fb7cfbef14d5976">AveryRegier</a><wikitopic AveryRegier /wikitopic>
</P><P>
<HR>
</P><P>
<UL> <LI> <a href="/view.php?topic=ClassRepository&PHPSESSID=c470b9bc87e5c6da5fb7cfbef14d5976">ClassRepository</a><wikitopic ClassRepository /wikitopic> is the only home for class definitions,	  including the bytecode representation (if the class is not interpreted).
<UL> <LI> ??? - The bytecode is interpretted.  Perhaps you mean the JITted code?  - <a href="/view.php?topic=AveryRegier&PHPSESSID=c470b9bc87e5c6da5fb7cfbef14d5976">AveryRegier</a><wikitopic AveryRegier /wikitopic>
</UL> <LI> <a href="/view.php?topic=ClassRepository&PHPSESSID=c470b9bc87e5c6da5fb7cfbef14d5976">ClassRepository</a><wikitopic ClassRepository /wikitopic> will support the <a href="http://java.sun.com/products/jdk/1.2/docs/guide/versioning/index.html">JDK 1.2</a> <a href="/view.php?topic=Versioning&PHPSESSID=c470b9bc87e5c6da5fb7cfbef14d5976">Versioning</a><wikitopic Versioning /wikitopic> specification.
<LI> (Package,Version) combination will uniquely identify a particular version of a package.  This combination will be the primary entity in the repository.  Perhaps source might be a third element in this unique package identifier?  Comments?
<UL> <LI> In the <a href="/view.php?topic=JDK&web=Imported&PHPSESSID=c470b9bc87e5c6da5fb7cfbef14d5976">JDK</a> <wikitopic JDK /wikitopic>1.2 Versioning specification there are two separate versions:  An <a href="/view.php?topic=API&web=Imported&PHPSESSID=c470b9bc87e5c6da5fb7cfbef14d5976">API</a> <wikitopic API /wikitopic>version number and an implementation version number.  We need to somehow take account of this when uniquely identifying versions of a package. - <a href="/view.php?topic=AveryRegier&PHPSESSID=c470b9bc87e5c6da5fb7cfbef14d5976">AveryRegier</a><wikitopic AveryRegier /wikitopic>
</UL> <LI> The <a href="/view.php?topic=ClassRepository&PHPSESSID=c470b9bc87e5c6da5fb7cfbef14d5976">ClassRepository</a><wikitopic ClassRepository /wikitopic> will be shared by every process and <a href="/view.php?topic=ClassLoader&PHPSESSID=c470b9bc87e5c6da5fb7cfbef14d5976">ClassLoader</a><wikitopic ClassLoader /wikitopic> in the operating system.
<UL> <LI> Thus the <a href="/view.php?topic=ClassRepository&PHPSESSID=c470b9bc87e5c6da5fb7cfbef14d5976">ClassRepository</a><wikitopic ClassRepository /wikitopic> is a singleton.  Instead of using a Constructor, we should have a <a href="/view.php?topic=ClassRepository&PHPSESSID=c470b9bc87e5c6da5fb7cfbef14d5976">ClassRepository</a><wikitopic ClassRepository /wikitopic>.getClassRepository() static method.  - Avery Regier
</UL> <LI> Since classes are not versioned or managed independently, the classes will belong to a (Package,Version) combination.
<LI> <a href="/view.php?topic=ClassRepository&PHPSESSID=c470b9bc87e5c6da5fb7cfbef14d5976">ClassRepository</a><wikitopic ClassRepository /wikitopic> will have an <a href="/view.php?topic=API&web=Imported&PHPSESSID=c470b9bc87e5c6da5fb7cfbef14d5976">API</a> <wikitopic API /wikitopic>that can be accessed by a <a href="/view.php?topic=CLI&web=Imported&PHPSESSID=c470b9bc87e5c6da5fb7cfbef14d5976">CLI</a> <wikitopic CLI /wikitopic>or <a href="/view.php?topic=GUI&web=Imported&PHPSESSID=c470b9bc87e5c6da5fb7cfbef14d5976">GUI</a> <wikitopic GUI /wikitopic>admin tool.
<LI> Permissions to add/remove/update classes will be created and handled by the security manager.
<LI> <a href="/view.php?topic=ClassLoaders&PHPSESSID=c470b9bc87e5c6da5fb7cfbef14d5976">ClassLoaders</a><wikitopic ClassLoaders /wikitopic> will be written to use the <a href="/view.php?topic=ClassRepository&PHPSESSID=c470b9bc87e5c6da5fb7cfbef14d5976">ClassRepository</a><wikitopic ClassRepository /wikitopic> API, therefore security will be handled at the <a href="/view.php?topic=ClassRepository&PHPSESSID=c470b9bc87e5c6da5fb7cfbef14d5976">ClassRepository</a><wikitopic ClassRepository /wikitopic> level.
<LI> <a href="/view.php?topic=ClassRepository&PHPSESSID=c470b9bc87e5c6da5fb7cfbef14d5976">ClassRepository</a><wikitopic ClassRepository /wikitopic> might also hold any optimizations necessary		for proper VM/JIT functioning.
<LI> <a href="/view.php?topic=ClassRepository&PHPSESSID=c470b9bc87e5c6da5fb7cfbef14d5976">ClassRepository</a><wikitopic ClassRepository /wikitopic> can hold bytecodes, sourcecode or both. If sourcecode is provided, then a Compiler or Interpreter object will be required.  This allows scripting programs to be held by the respository as well.  It also allows for other languages to be formally supported.
<LI> When a Class is updated to a new version, a <a href="/view.php?topic=ClassMigrator&PHPSESSID=c470b9bc87e5c6da5fb7cfbef14d5976">ClassMigrator</a><wikitopic ClassMigrator /wikitopic> class may also be installed, which will be used (when available) to automatically migrate classes from one version to another. If no <a href="/view.php?topic=ClassMigrator&PHPSESSID=c470b9bc87e5c6da5fb7cfbef14d5976">ClassMigrator</a><wikitopic ClassMigrator /wikitopic> is available, then new class versions may only add fields (and converted objects will have these fields initilized to null).  Perhaps optionally, we can make an ovverride for "dropping" fields.  This is a bigger problem, called <a href="/view.php?topic=SchemaMigration&PHPSESSID=c470b9bc87e5c6da5fb7cfbef14d5976">SchemaMigration</a><wikitopic SchemaMigration /wikitopic> that needs to be addressed, perhaps seperately.
<LI> <a href="/view.php?topic=ClassRepository&PHPSESSID=c470b9bc87e5c6da5fb7cfbef14d5976">ClassRepository</a><wikitopic ClassRepository /wikitopic> might have replication features for distributed environments to help support Zero workstation adminstration goals.
<LI> <a href="/view.php?topic=ClassRepository&PHPSESSID=c470b9bc87e5c6da5fb7cfbef14d5976">ClassRepository</a><wikitopic ClassRepository /wikitopic> can be updated dynamically by processes with the appropriate permissions.  Perhaps <a href="/view.php?topic=ClassMigrations&PHPSESSID=c470b9bc87e5c6da5fb7cfbef14d5976">ClassMigrations</a><wikitopic ClassMigrations /wikitopic> might also be done dynamically... hmmm...
<LI> When a class is stored, additional information needed by the system will be attached.  This information will be configurable through the API.
<UL> <LI> We can do this by serializing a subclass of java.lang.Class which contains this information.  - <a href="/view.php?topic=AveryRegier&PHPSESSID=c470b9bc87e5c6da5fb7cfbef14d5976">AveryRegier</a><wikitopic AveryRegier /wikitopic>
</UL> <LI> The <a href="/view.php?topic=ClassRepository&PHPSESSID=c470b9bc87e5c6da5fb7cfbef14d5976">ClassRepository</a><wikitopic ClassRepository /wikitopic> will be a persistent object. 
<LI> Every once and a while, "unreferenced" classes can be moved out of the <a href="/view.php?topic=ClassRepository&PHPSESSID=c470b9bc87e5c6da5fb7cfbef14d5976">ClassRepository</a><wikitopic ClassRepository /wikitopic> based on some kind of usage / need free space / number of references based on reachability.
</UL> <HR>
I think this is a great start. Sometimes I sink to implementation details. Bear with me &amp; edit them out if they really bug you 8^)
<UL> <LI> <b>The unique identifier for a class in the repository is (Package, Class,Version).</b> I'm not sure this will work. Nothing guarantees Package and Class are unique and I'm not sure how we'd know what version something is. We may need UUIDs here, after all. 
<LI> <b>When a class is stored, additional information needed by the system will be attached.  This information will be configurable through the API.</b> <a href="/view.php?topic=ClassRepository&PHPSESSID=c470b9bc87e5c6da5fb7cfbef14d5976">ClassRepository</a><wikitopic ClassRepository /wikitopic> treats each class as a <a href="/view.php?topic=MetaObject&PHPSESSID=c470b9bc87e5c6da5fb7cfbef14d5976">MetaObject</a><wikitopic MetaObject /wikitopic>. This could be done by defining a <null>MetaObjectable</null> interface that wrappers serializable for each Class. We'd need to provide one for Object if we want to save non-jos classes.
<LI> <b>The <a href="/view.php?topic=ClassRepository&PHPSESSID=c470b9bc87e5c6da5fb7cfbef14d5976">ClassRepository</a><wikitopic ClassRepository /wikitopic> will be a persistent object.</b>	* The <a href="/view.php?topic=ClassRepository&PHPSESSID=c470b9bc87e5c6da5fb7cfbef14d5976">ClassRepository</a><wikitopic ClassRepository /wikitopic>'s <a href="/view.php?topic=API&web=Imported&PHPSESSID=c470b9bc87e5c6da5fb7cfbef14d5976">API</a> <wikitopic API /wikitopic>should be the same <a href="/view.php?topic=API&web=Imported&PHPSESSID=c470b9bc87e5c6da5fb7cfbef14d5976">API</a> <wikitopic API /wikitopic>as the rest of the OOFS. Either the <null>MetaObjectable</null> interface or the <a href="/view.php?topic=OOFS&web=Imported&PHPSESSID=c470b9bc87e5c6da5fb7cfbef14d5976">OOFS</a> <wikitopic OOFS /wikitopic>API would be the place to define the distributed replication API. 
<LI> <b>Every once and a while, "unreferenced" classes can be moved out of the <a href="/view.php?topic=ClassRepository&PHPSESSID=c470b9bc87e5c6da5fb7cfbef14d5976">ClassRepository</a><wikitopic ClassRepository /wikitopic> based on some kind of usage / need free space / number of references based on reachability.</b> This seems like a bad idea to me. If we bothered to load them, why would we unload them? Who would determine which classes to remove? -- <a href="/view.php?topic=BillRehm&PHPSESSID=c470b9bc87e5c6da5fb7cfbef14d5976">BillRehm</a><wikitopic BillRehm /wikitopic>
<LI> When loading packages, <a href="/view.php?topic=ClassRepository&PHPSESSID=c470b9bc87e5c6da5fb7cfbef14d5976">ClassRepository</a><wikitopic ClassRepository /wikitopic> should be able to strip static main() code iff it is allowed by package information, e.g. "Strip-Main-At-Installation: yes", or beans in general.  This came up on the apps mailing list. -- <a href="/view.php?topic=RalfStephan&PHPSESSID=c470b9bc87e5c6da5fb7cfbef14d5976">RalfStephan</a><wikitopic RalfStephan /wikitopic>
</UL> <HR>
There are some further requirements for the <a href="/view.php?topic=ClassRepository&PHPSESSID=c470b9bc87e5c6da5fb7cfbef14d5976">ClassRepository</a><wikitopic ClassRepository /wikitopic>:
<UL> <LI> There should be a simple <a href="/view.php?topic=API&web=Imported&PHPSESSID=c470b9bc87e5c6da5fb7cfbef14d5976">API</a> <wikitopic API /wikitopic>for automagically creating .jar files from classes in the repository.  This would include meta-information about the classes be automatically included in the Manifest file.  For instance, if a Class is registered as a bean in the repository, then an entry in the Manifest is created Java-Bean: true for that particular class.  This needs to be the same for Package information and versioning information.
</UL> 
-- <a href="/view.php?topic=AveryRegier&PHPSESSID=c470b9bc87e5c6da5fb7cfbef14d5976">AveryRegier</a><wikitopic AveryRegier /wikitopic> 03 July 1998<BR><BR></P><!--

<TABLE width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="737b9c">
<TR><TD ALIGN="CENTER">
<a href="/user.php?op=login&redirect=%2Fview%2F%2FClassRepository&PHPSESSID=c470b9bc87e5c6da5fb7cfbef14d5976">login</a> or <a href="/user.php?op=newacct&redirect=%2Fview%2F%2FClassRepository&PHPSESSID=c470b9bc87e5c6da5fb7cfbef14d5976">new&nbsp;user</a><TR><TD>
</TABLE>

!-->
<!-- end BODY page !-->

<HR>

<DIV ALIGN="CENTER">
<TABLE BORDER="0" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR>
	<TD ALIGN="CENTER" COLSPAN="2">
		Content of these pages are owned and copyrighted by the poster.
	</TD>
</TR>
<TR>
	<TD ALIGN="RIGHT" WIDTH="50%">
		Hosted by:
	</TD>
	<TD ALIGN="LEFT">
		<A HREF="http://sourceforge.net/"><IMG 
			SRC="http://sourceforge.net/sflogo.php?group_id=2376&type=1"
			BORDER=0 HSPACE=0 VSPACE=0></A>
	</TD>
</TR>
</TABLE>
</DIV>
</BODY>
</HTML>
