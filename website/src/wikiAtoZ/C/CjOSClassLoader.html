<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 FINAL//EN">
<HTML>
  <HEAD>
    <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=ISO-8859-1">
    <TITLE>CjOSClassLoader.Imported @ jos.sf.net</TITLE>
  </HEAD>

<BODY BGCOLOR="#FFFFFF">

<!-- The FORM encloses the entire header, because it renders better that way. !-->
<FORM ACTION="/jump.php"><input type="hidden" name="PHPSESSID" value="4c6dc2bbceb1a0513f20525a7fc0a4c3" />

<!-- The JOS logo. !-->
<TABLE BORDER="0" CELLSPACING="0" CELLPADDING="3" WIDTH="100%">
<TR VALIGN="TOP" ALIGN="LEFT">
	<TD><A HREF="http://cjos.sourceforge.net/archive/"><IMG 
		VSPACE="0" HSPACE="0" ALIGN="MIDDLE" BORDER="0"
		SRC="http://cjos.sourceforge.net/archive/media/jos_logo_mini.gif"></A></TD>
	<!-- The tab table. !-->
	<TD WIDTH="100%" ALIGN="RIGHT" BGCOLOR="#FFFFFF" VALIGN="BOTTOM"> 
		<TABLE BORDER="0" CELLSPACING="0" CELLPADDING="3" WIDTH="100%" ALIGN="RIGHT">
			<TR VALIGN="MIDDLE" ALIGN="LEFT">

<TD BGCOLOR="White" WIDTH="60%">&nbsp;</TD>
<TD BGCOLOR="#FFFFCC"><A HREF="http://cjos.sourceforge.net/archive/">Home</A></TD>
<TD BGCOLOR="White">&nbsp;</TD>
<TD WIDTH="10%" BGCOLOR="#FFFFCC" ALIGN="CENTER"><A HREF="http://cjos.sourceforge.net/archive/info/">Info</A></TD>
<TD BGCOLOR="White">&nbsp;</TD>
<TD WIDTH="10%" BGCOLOR="#FFFFCC" ALIGN="CENTER"><A HREF="http://cjos.sourceforge.net/archive/dev/">DevZone</A></TD>
<TD BGCOLOR="White">&nbsp;</TD>
<TD WIDTH="10%" BGCOLOR="#FFCC66" ALIGN="CENTER"><A
HREF="http://jos.sourceforge.net/">Wiki</A></TD>
<TD BGCOLOR="White">&nbsp;</TD>
			</TR>
			<TR>
				<TD BGCOLOR="#FFCC66" ALIGN="RIGHT" COLSPAN="9">
					<A HREF="/view/Users/?PHPSESSID=4c6dc2bbceb1a0513f20525a7fc0a4c3">UsersWeb</A>
					&nbsp;|&nbsp;
					<A HREF="/view/Main/?PHPSESSID=4c6dc2bbceb1a0513f20525a7fc0a4c3">MainWeb</A>
					&nbsp;|&nbsp;
					<A HREF="/view/Info/?PHPSESSID=4c6dc2bbceb1a0513f20525a7fc0a4c3">InfoWeb</A>
					&nbsp;|&nbsp;
					<A HREF="/view/DevZone/?PHPSESSID=4c6dc2bbceb1a0513f20525a7fc0a4c3">DevZoneWeb</A>
					&nbsp;|&nbsp;
					<A HREF="/view/Support/?PHPSESSID=4c6dc2bbceb1a0513f20525a7fc0a4c3">SupportWeb</A>
				</TD>
			</TR>
		</TABLE>
	</TD>		
</TR>
<!-- The WikiHeader. !-->
<TR><TD COLSPAN="2">
<TABLE BORDER="0" CELLSPACING="0" CELLPADDING="3" WIDTH="100%">
<TR>
	<TD WIDTH="25%" ALIGN="CENTER" BGCOLOR="#FFFFCC" VALIGN="CENTER">
		<B>[&nbsp;<a href="/info//CjOSClassLoader?PHPSESSID=4c6dc2bbceb1a0513f20525a7fc0a4c3">CjOSClassLoader</a>&nbsp;]</B>
	</TD>
	<TD WIDTH="25%" ALIGN="CENTER" BGCOLOR="#FFEE88" VALIGN="CENTER">
		<B>[ not logged in ]</B>	</TD>
	<TD WIDTH="25%" ALIGN="CENTER" BGCOLOR="#FFDD77" VALIGN="CENTER">
		<B>[ Web: <a href="/view/Imported/?PHPSESSID=4c6dc2bbceb1a0513f20525a7fc0a4c3">Imported</a> ]</B>	</TD>
	<TD WIDTH="25%" ALIGN="CENTER" BGCOLOR="#FFCC66" VALIGN="CENTER">
		goto:&nbsp;<INPUT TYPE="TEXT" SIZE="10" NAME="topic"><!--<INPUT TYPE="IMAGE" SRC="/media/go.gif?PHPSESSID=4c6dc2bbceb1a0513f20525a7fc0a4c3" BORDER="0" VALUE="topic" ALT="goto">!-->&nbsp;<a href="/search.php?PHPSESSID=4c6dc2bbceb1a0513f20525a7fc0a4c3"><FONT SIZE="-1">options</FONT></a>
	</TD>
</TR>
</TABLE>

<TABLE BORDER="0" CELLSPACING="0" CELLPADDING="3" WIDTH="100%">
	<TR>
	<TD ALIGN="CENTER" BGCOLOR="#FFFFCC" VALIGN="TOP">
		[&nbsp;get <a href="/info/Imported/CjOSClassLoader?PHPSESSID=4c6dc2bbceb1a0513f20525a7fc0a4c3">info</a> on or <a href="/edit/Imported/CjOSClassLoader?PHPSESSID=4c6dc2bbceb1a0513f20525a7fc0a4c3">edit</a>&nbsp;]	</TD>
	<TD ALIGN="CENTER" BGCOLOR="#FFEE88" VALIGN="TOP">
		[&nbsp;<a href="/user.php?op=login&redirect=%2Fview%2F%2FCjOSClassLoader&PHPSESSID=4c6dc2bbceb1a0513f20525a7fc0a4c3">login</a> or <a href="/user.php?op=newacct&redirect=%2Fview%2F%2FCjOSClassLoader&PHPSESSID=4c6dc2bbceb1a0513f20525a7fc0a4c3">new&nbsp;user</a>&nbsp;]	</TD>
	<TD ALIGN="CENTER" BGCOLOR="#FFDD77" VALIGN="TOP">
		[&nbsp;list of <a href="/topics/Imported/?PHPSESSID=4c6dc2bbceb1a0513f20525a7fc0a4c3">topics</a>, <a href="/hubsnodes/Imported/?PHPSESSID=4c6dc2bbceb1a0513f20525a7fc0a4c3">hubs&nbsp;&amp;&nbsp;nodes</a>, or <a href="/changes/Imported/?PHPSESSID=4c6dc2bbceb1a0513f20525a7fc0a4c3">recent&nbsp;changes</a>&nbsp;]	</TD>
	</TR>
</TABLE>

<!-- From CommonHeader !-->
</TR></TD>
</TABLE>
</FORM>

<!-- start BODY page !-->
<P>
<FONT SIZE="-1"><a href="/view.php?topic=CjOSPages&PHPSESSID=4c6dc2bbceb1a0513f20525a7fc0a4c3">CjOSPages</a><wikitopic CjOSPages /wikitopic>; <a href="/view.php?topic=VMKit&PHPSESSID=4c6dc2bbceb1a0513f20525a7fc0a4c3">VMKit</a><wikitopic VMKit /wikitopic></FONT>
<HR SIZE="1" NOSHADE>
<P><EM>Article contributed by <a href="/view.php?topic=GilbertHerschberger&PHPSESSID=4c6dc2bbceb1a0513f20525a7fc0a4c3">GilbertHerschberger</a><wikitopic GilbertHerschberger /wikitopic> (30 November 2000).</EM></P>
<H4>Introduction</H4>
<P>The Multiple Primordial Class Loader (MPCL) library is part of the VMKit and <CODE>CJOS</CODE> project. It was designed exclusively with multiple primordial class loaders in mind.</P>
<P>This library needs to be extended to include all class loaders, not just a primordial class loader.</P>
<H4>Open bytecode</H4>
<P>The <nolink>API is missing a function for opening bytecode. The mistaken assumption was that bytecode is always loaded from disk. This is not the case. Bytecode might be loaded from a resource. Therefore, every primordial class loader must be able to open bytecode, like this:</P>
<PRE>
mc_openBytecode( const void *v, size_t s );
</PRE>
<P>Where does the primordial class loader store the given bytecode? It must be stored, not in a directory, but with the primordial class loader object itself. A couple of issues must be examined to make certain that bytecode cannot be redefined. Two bytecode objects cannot be opened with the same name.</P>
<H4>Custom class loader</H4>
<P>Once the primordial class loader is fixed, there is little difference between a primordial class loader and a custom class loader. A custom class loader cannot a <CODE>CLASSPATH</CODE>, so the <CODE>addDirectory()</CODE> and <CODE>addArchive</CODE> functions won't work. A custom class loader will be created with a function, like the following:</P>
<PRE>
mc_HANDLE mc_openCustomClassLoader();
</PRE>
<P>If <CODE>mc_openPrimordialClassLoader()</CODE> and <CODE>mc_openCustomClassLoader()</CODE> are part of the same library, there is no need for separate functions to close a class loader. Instead of <CODE>mc_closePrimordialClassLoader()</CODE> and <CODE>mc_closeCustomClassLoader()</CODE>, there is simply:</P>
<PRE>
mc_closeClassLoader( mc_HANDLE h );
</PRE>
<H4>Implications</H4>
<P>For me, the most exciting part is the expectation that a custom class loader can be fully primed with bytecode before the custom class loader exists. This potential means that, unlike JNI, all bytecode for an application can be statically linked to an executable. Every class might potentially have a class loader in bytecode. The <CODE>getClassLoader()</CODE> method of the <CODE>java/lang/Class</CODE> class might never return <CODE>null</CODE>.</P><BR><BR></P><!--

<TABLE width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="737b9c">
<TR><TD ALIGN="CENTER">
<a href="/user.php?op=login&redirect=%2Fview%2F%2FCjOSClassLoader&PHPSESSID=4c6dc2bbceb1a0513f20525a7fc0a4c3">login</a> or <a href="/user.php?op=newacct&redirect=%2Fview%2F%2FCjOSClassLoader&PHPSESSID=4c6dc2bbceb1a0513f20525a7fc0a4c3">new&nbsp;user</a><TR><TD>
</TABLE>

!-->
<!-- end BODY page !-->

<HR>

<DIV ALIGN="CENTER">
<TABLE BORDER="0" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR>
	<TD ALIGN="CENTER" COLSPAN="2">
		Content of these pages are owned and copyrighted by the poster.
	</TD>
</TR>
<TR>
	<TD ALIGN="RIGHT" WIDTH="50%">
		Hosted by:
	</TD>
	<TD ALIGN="LEFT">
		<A HREF="http://sourceforge.net/"><IMG 
			SRC="http://sourceforge.net/sflogo.php?group_id=2376&type=1"
			BORDER=0 HSPACE=0 VSPACE=0></A>
	</TD>
</TR>
</TABLE>
</DIV>
</BODY>
</HTML>
