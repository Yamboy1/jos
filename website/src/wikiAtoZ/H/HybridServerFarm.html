<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 FINAL//EN">
<HTML>
  <HEAD>
    <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=ISO-8859-1">
    <TITLE>HybridServerFarm.Imported @ jos.sf.net</TITLE>
  </HEAD>

<BODY BGCOLOR="#FFFFFF">

<!-- The FORM encloses the entire header, because it renders better that way. !-->
<FORM ACTION="/jump.php"><input type="hidden" name="PHPSESSID" value="ecbd70eb61ad011178349be61f92db6a" />

<!-- The JOS logo. !-->
<TABLE BORDER="0" CELLSPACING="0" CELLPADDING="3" WIDTH="100%">
<TR VALIGN="TOP" ALIGN="LEFT">
	<TD><A HREF="http://cjos.sourceforge.net/archive/"><IMG 
		VSPACE="0" HSPACE="0" ALIGN="MIDDLE" BORDER="0"
		SRC="http://cjos.sourceforge.net/archive/media/jos_logo_mini.gif"></A></TD>
	<!-- The tab table. !-->
	<TD WIDTH="100%" ALIGN="RIGHT" BGCOLOR="#FFFFFF" VALIGN="BOTTOM"> 
		<TABLE BORDER="0" CELLSPACING="0" CELLPADDING="3" WIDTH="100%" ALIGN="RIGHT">
			<TR VALIGN="MIDDLE" ALIGN="LEFT">

<TD BGCOLOR="White" WIDTH="60%">&nbsp;</TD>
<TD BGCOLOR="#FFFFCC"><A HREF="http://cjos.sourceforge.net/archive/">Home</A></TD>
<TD BGCOLOR="White">&nbsp;</TD>
<TD WIDTH="10%" BGCOLOR="#FFFFCC" ALIGN="CENTER"><A HREF="http://cjos.sourceforge.net/archive/info/">Info</A></TD>
<TD BGCOLOR="White">&nbsp;</TD>
<TD WIDTH="10%" BGCOLOR="#FFFFCC" ALIGN="CENTER"><A HREF="http://cjos.sourceforge.net/archive/dev/">DevZone</A></TD>
<TD BGCOLOR="White">&nbsp;</TD>
<TD WIDTH="10%" BGCOLOR="#FFCC66" ALIGN="CENTER"><A
HREF="http://jos.sourceforge.net/">Wiki</A></TD>
<TD BGCOLOR="White">&nbsp;</TD>
			</TR>
			<TR>
				<TD BGCOLOR="#FFCC66" ALIGN="RIGHT" COLSPAN="9">
					<A HREF="/view/Users/?PHPSESSID=ecbd70eb61ad011178349be61f92db6a">UsersWeb</A>
					&nbsp;|&nbsp;
					<A HREF="/view/Main/?PHPSESSID=ecbd70eb61ad011178349be61f92db6a">MainWeb</A>
					&nbsp;|&nbsp;
					<A HREF="/view/Info/?PHPSESSID=ecbd70eb61ad011178349be61f92db6a">InfoWeb</A>
					&nbsp;|&nbsp;
					<A HREF="/view/DevZone/?PHPSESSID=ecbd70eb61ad011178349be61f92db6a">DevZoneWeb</A>
					&nbsp;|&nbsp;
					<A HREF="/view/Support/?PHPSESSID=ecbd70eb61ad011178349be61f92db6a">SupportWeb</A>
				</TD>
			</TR>
		</TABLE>
	</TD>		
</TR>
<!-- The WikiHeader. !-->
<TR><TD COLSPAN="2">
<TABLE BORDER="0" CELLSPACING="0" CELLPADDING="3" WIDTH="100%">
<TR>
	<TD WIDTH="25%" ALIGN="CENTER" BGCOLOR="#FFFFCC" VALIGN="CENTER">
		<B>[&nbsp;<a href="/info//HybridServerFarm?PHPSESSID=ecbd70eb61ad011178349be61f92db6a">HybridServerFarm</a>&nbsp;]</B>
	</TD>
	<TD WIDTH="25%" ALIGN="CENTER" BGCOLOR="#FFEE88" VALIGN="CENTER">
		<B>[ not logged in ]</B>	</TD>
	<TD WIDTH="25%" ALIGN="CENTER" BGCOLOR="#FFDD77" VALIGN="CENTER">
		<B>[ Web: <a href="/view/Imported/?PHPSESSID=ecbd70eb61ad011178349be61f92db6a">Imported</a> ]</B>	</TD>
	<TD WIDTH="25%" ALIGN="CENTER" BGCOLOR="#FFCC66" VALIGN="CENTER">
		goto:&nbsp;<INPUT TYPE="TEXT" SIZE="10" NAME="topic"><!--<INPUT TYPE="IMAGE" SRC="/media/go.gif?PHPSESSID=ecbd70eb61ad011178349be61f92db6a" BORDER="0" VALUE="topic" ALT="goto">!-->&nbsp;<a href="/search.php?PHPSESSID=ecbd70eb61ad011178349be61f92db6a"><FONT SIZE="-1">options</FONT></a>
	</TD>
</TR>
</TABLE>

<TABLE BORDER="0" CELLSPACING="0" CELLPADDING="3" WIDTH="100%">
	<TR>
	<TD ALIGN="CENTER" BGCOLOR="#FFFFCC" VALIGN="TOP">
		[&nbsp;get <a href="/info/Imported/HybridServerFarm?PHPSESSID=ecbd70eb61ad011178349be61f92db6a">info</a> on or <a href="/edit/Imported/HybridServerFarm?PHPSESSID=ecbd70eb61ad011178349be61f92db6a">edit</a>&nbsp;]	</TD>
	<TD ALIGN="CENTER" BGCOLOR="#FFEE88" VALIGN="TOP">
		[&nbsp;<a href="/user.php?op=login&redirect=%2Fview%2F%2FHybridServerFarm&PHPSESSID=ecbd70eb61ad011178349be61f92db6a">login</a> or <a href="/user.php?op=newacct&redirect=%2Fview%2F%2FHybridServerFarm&PHPSESSID=ecbd70eb61ad011178349be61f92db6a">new&nbsp;user</a>&nbsp;]	</TD>
	<TD ALIGN="CENTER" BGCOLOR="#FFDD77" VALIGN="TOP">
		[&nbsp;list of <a href="/topics/Imported/?PHPSESSID=ecbd70eb61ad011178349be61f92db6a">topics</a>, <a href="/hubsnodes/Imported/?PHPSESSID=ecbd70eb61ad011178349be61f92db6a">hubs&nbsp;&amp;&nbsp;nodes</a>, or <a href="/changes/Imported/?PHPSESSID=ecbd70eb61ad011178349be61f92db6a">recent&nbsp;changes</a>&nbsp;]	</TD>
	</TR>
</TABLE>

<!-- From CommonHeader !-->
</TR></TD>
</TABLE>
</FORM>

<!-- start BODY page !-->
<P>
<FONT SIZE="-1"><a href="/view.php?topic=ArchitectureGroup&PHPSESSID=ecbd70eb61ad011178349be61f92db6a">ArchitectureGroup</a><wikitopic ArchitectureGroup /wikitopic></FONT>
<HR SIZE="1" NOSHADOW>
<P><EM>Article contributed by <a href="/view.php?topic=GilbertHerschberger&PHPSESSID=ecbd70eb61ad011178349be61f92db6a">GilbertHerschberger</a><wikitopic GilbertHerschberger /wikitopic> (20 March 2000).</EM></P>
<H4>Introduction</H4>
<P>A server farm needs an operating system. Without an operating system, you have only a room full of high-tech equipment that does not work. Should you work toward running your server farm on a single operating system? Or, do you need more than one?</P>
<P>Using one and only one operating system on a server farm is a very popular idea. Many technicians believe that they must work toward operating system consolidation. They desire to run one operating system on every machine in their server farm. Much effort is spent choosing between operating systems to decide which one is best for the whole farm.</P>
</P><P>
<TABLE WIDTH="100%" BORDER="1">
<TR>
<TD>
<P><EM>Sidebar:</EM> A popular idea often goes unchallenged. People believe it because others seem to. Just as it take time to build a community, it takes time to successfully challenge a popular idea. Unfortunately, operating system consolidation is a popular idea that scales well.</P>
<UL>
<LI><P>This idea is also a popular dream. Some technicians desire to run one operating system on every machine in their organization. Much effort is spent creating standards and enforcing them. Like an allergy, such standards make people very uncomforable.</P>
<LI><P>This idea is also a popular dillusion. A few technicians desire to run one operating system on every machine on the planet. Much effort is spent on so-called "world domination". Like a dare, many technicians work on it simple because it has never been done.</P>
</UL>
</TD>
</TR>
</TABLE>
</P><P>
<P>Each operating system has its strengths and weaknesses. One operating system might be better at providing a particular service. Is it feasible to use it? A server farms can run on more than one operating system. Many server farms are built this way, <EM>and should be</EM>.</P>
<P>Many vendors do not enjoy healthy competition. Many operating system vendors think the same way. They try to build an operating system to kill off their competition, rather than trying to meet the needs of their customers.</P>
<P>A perfect operating system does not exist yet. There is no operating system that can:
<UL>
<LI>
<LI>be all things to everyone, making everyone happy;
<LI>be the best at everything;
<LI>run every program optimally;
<LI>run on every computing device.
</UL>
<P>This article provides some insight into the evolution of server farms as it is practiced by my ultra-conservative corporate customers.</P>
<H4>Apple orchard</H4>
<P>We use a farming metaphore to understand what we need from our computer system as a whole. Let's start with an apple.</P>
<UL>
<LI><P>Everyone should know what an apple is. It is a little red fruit. You are likely to find one at your local grocery store.</P>
<LI><P>Where does an apple come from? An apple comes from an apple tree. More of the global population has seen an apple than seen an apple tree. On an apple tree, one apple is barely distinguisable from others. Apples look so much alike. They are a commodity; they are not grown or identified individually.</P>
<LI><P>In an orchard, one apple tree is barely distinguishable from others. It is a tree that produces apples. You see one tree, you've seen them all.</P>
<LI><P>A farmer plants an apple orchard and gets more apples. An apple orchard is a collection of apple trees. The trees are lined up in neat rows. A farmer might desire the maximum density of trees for each acre of land. Some farmers are simplistic and put only one kind of apple in their orchard.</P>
</UL>
<H4>Server farm</H4>
<P>From an apple orchard, we can apply a theme to a server farm. What can we learn from the apple orchard?</P>
<UL>
<LI><P>Many people know what a service is. It is a little <a href="/view.php?topic=IPC&web=Imported&PHPSESSID=ecbd70eb61ad011178349be61f92db6a">IPC</a> <wikitopic IPC /wikitopic>program. One kind of service is called a <EM>daemon</EM>, a program that acts on behalf of other programs.</P>
<P>Like apples, all services "look" alike. All services are treated the same way. All services have the same life-cycle. The operating system starts a service. Other programs use a service. The operating system shuts down a service.</P>
<P>Each apple might have a slightly different taste. Like the wide variety of apples, there is a wide variety in the functionality of services. Each service might be designed to do something different. Each service has a unique pattern of behavior.</P>
<P>Where can you find services? Services are everywhere. Services are available in all kinds of computers. You are very likely to find services running in a corporate computer room. You are likely to find services running within a computer on your desk. Services are essential to the strategy goal of software reuse. The behavior of a service is relatively easy to reuse in many programs.</P>
<LI><P>Where does a service come from? Like an apple comes from an apple tree, a service is controlled by an <EM>operating system</EM>. Since one service is barely distinguishable from another, the code for starting, useing and stopping services is placed in a shared library. Like apples, services look so much alike. Unlike apples, a program need a mechanism to address each service individually. A mechanism to control services must also provide service addressability.</P>
<LI><P>Like apple trees in an orchard, one server machine is barely distinguishable from others. It is a server that produces services. You see one server, you've seen them all.</P>
<LI><P>Just as a farmer plants an apple orchard and gets more apples, a computer technician sets up a server farm and gets more services. A server farm is a collection of apple trees. Servers are stacked on racks. Servers are lined up in neat rows. A computer technician might desire the maximum density of servers for each square foot of office space. Some technicians are simplistic and would like to put only one operating system on each server on their farm.</P>
</UL>
<H4>Farming risks</H4>
<P>Experience shows that farming is slightly unpredictable. Something might go wrong. The weather is unpredictable. There might be a drought. Disease is unpredictable. There might be a blight. The market is unpredictable. Prices might bottom out.</P>
<P>Because farming always has risk, a mature farmer creates a strategy to reduce risk. A farmer learns that diversity is a good thing to reduce risks. A farmer might grow a half dozen varieties of apples -- just in case something goes wrong. In the case of a drought, some varieties are more likely to survive without water. In the case of disease, some varieties are more likely to survive without permanent damage. In a case of a free market, some varities are more likely to sell at a good price.</P>
<H4>Hybrid</H4>
<P>An orchard that contains only one kind of apple is monolithic orchard. Monolithic means <EM>all the same</EM>. An orchard that contains more than one kind of apple is a hybrid. When there is a variety, the orchard is no longer all the same, but a mixture.</P>
<P>A farmer must deal with a hybrid orchard differently than a monolithic one. While a hybrid orchard helps reduces a farmer's risk, it complicates the care of the apple trees. Each variety has its own special needs.</P>
<H4>Monolithic server farm</H4>
<P>A server farm that contains only one kind of machine, only one kind of processor and only one kind of operating system is a monolithic server farm. All machines run the same services on the same operating system. A monolithic server farm might be desireable to some technicians. It might be easier to maintain. It might not.</P>
<P>A monolitic server farm has inherent problems. A monolitic server farm has its risks. It is a difficult task to keep all servers synchronized. When one machine must upgrade, all machines must upgrade. Without perfect synchronization, a monolithic server farm <EM>defaults</EM> to a hybrid.</P>
<P>Typically, the first synchronization to fail is the hardware. It is difficult to justify the simultaneous upgrade of all machines to a slightly better technology, such as a slightly faster processor. When a faster server is added to a server farm, the monolithic farm suddenly becomes a hybrid.</P>
<P>The second synchronization to fail is the operating system. It is difficult to justify the enourmous effort it takes to locally upgrade and reconfigure all servers at once. During a turnover from one version of an operating system to another, a monolithic server farm is a hybrid until the last operating system is done.</P>
<P>The third synchronization to fail are the services. It is most difficult to justify keeping a service in sync when it is never used. Many services of an operating system are optional, or <EM>just in case</EM>.</P>
<P>Servers become specialized as they offer special services on behalf of the farm. Some services are designed to be unique on a subnet. A name service is one example. A name service provides a cross-reference between network address and servers. This kind of service works best when there is only one.</P>
<P>Some technicians treat their farm as if it were monolitic when it is not. This gets them into trouble. This gets them working on the wrong problem.</P>
<P>Using a monolithic approach to a hybrid farm creates many little annoying problems. The server farm never seems to approach its full capacity. Solutions don't work when they should. This kind of server farm never gets enough funding to make the problem go away.</P>
<H4>Hybrid server farm</H4>
<P>A hybrid server farm must be treated differently than a monolithic one. A mature technician expects a hybrid farm. A mature technician builds a strategy around having a hybrid farm and dealing with a plethora of different hardware, different operating systems and different services.</P>
<P>By a change in strategy, a hybrid server farm can reach its full potential. A hybrid farm has no trouble getting additional funding. A hybrid farm is grown one server at a time. Services are added as needed. The farm grows in sync with the needs of an organization. Keeping all servers synchronized is determined to be unnecessary and undesireable. A hybrid farm experiences the greatest possible up-time.</P>
<P>Choice of hardware and operating system are optimized on a service-by-service basis. Each service has unique requirements. A hybrid farm exactly matches capacity with requirements. A service that needs greatest capacity is given greatest capacity. A service that needs smallest capacity is given smallest capacity. A technician picks the perfect server for each service. The server is just right.</P>
<H4>About <nolink>JOS</H4>
<P>A hybrid server farm needs help. With different kernels on each machine, a server farm needs a kernel-independent operating system. Each servers can share common administration applications. Through a network, each server can use the same software at the same time.</P>
<P>Here is a diagram of one next-generation server farm. It has one security server and any number of <nolink>JOS machines.</P>
<TABLE WIDTH="100%" BORDER="1">
<TR>
<TD>
1. Security Server
</TD>
<TD>
2. <nolink>JOS machine
</TD>
<TD>
3. <nolink>JOS machine
</TD>
<TD>
...
</TD>
<TD>
<EM>n</EM>. <nolink>JOS machine
</TD>
</TR>
</TR>
</TABLE>
<P>A <EM>security server</EM> is the primary machine for a server farm. My security server is built upon the Linux operating system. It offers a limited set of services for other machines in a farm. It includes BOOTP, TFTP, <a href="/view.php?topic=SMB&web=Imported&PHPSESSID=ecbd70eb61ad011178349be61f92db6a">SMB</a> <wikitopic SMB /wikitopic>and <a href="/view.php?topic=HTTP&web=Imported&PHPSESSID=ecbd70eb61ad011178349be61f92db6a">HTTP</a> <wikitopic HTTP /wikitopic>so that each <nolink>JOS machine could use Etherboot to boot across the network, use the shared files on the security server and download additional packages through <nolink>HTTP.</P>
<P><EM>Kernel upgrade:</EM> To upgrade, a new boot image is installed on the security server and all the <nolink>JOS machines are reset. As each <nolink>JOS machine resets, its services are down.</P>
<P><EM>Configuration:</EM> A security server holds network-wide configuration on behalf of all <nolink>JOS machines. To re-configure, modify a network-wide registry and a configuration-change message is sent to a <nolink>JOS machine to re-read its configuration.</P>
<P><EM>Administration:</EM> This architecture enables you to treat the farm as a whole. A security server enables you to add a user account to the server farm, remove a user account from the farm. You can dynamically move services from one <nolink>JOS machine to another. Since services are implemented as processes, individual services can be restarted after classes are re-compiled.</P>
<H4>Centralization</H4>
<P>Bytecode applications are installed on the security server, under the <nolink>HTTP service that is running there. The <nolink>HTTP protocol is well-known and highly reliable. Distribution of packages across <nolink>HTTP is a proven mechanism for bytecode on demand.</P>
<P>As with any hybrid server farm, the hardware available on each <nolink>JOS machine depends on the services that must run there. Some services might require other perpherals such as a modem, a second network interface card, a scanner or a printer. Some services might require a local hard drive and/or CD-ROM. By this configuration, the local hard drive might contain mostly user data. Instead of duplicating the operating system software on each machine, only a small bytecode cache might be needed.</P>
<P>Most of these services are non-visual. By accepting a non-visual assumption, an entire farm needs only one physical console (video, mouse and keyboard). The physical console attached to the security server. Most of the <nolink>JOS machines would not need a video display adapter.</P>
<P>All of this hardware could be pre-assembled and pre-packaged as a single computer. A complete server farm might come in a single box. This creates the greatest density of servers per cubic inch. Only a next generation operating system is needed to make the hardware useful to its users.</P>
<H4>Summary</H4>
<P>A server farm is a natural evolution of server technology. Both monolithic and hybrid farms have been used successfully by individuals and organizations. But, where is server technology going? A server farm in a box seems very likely. I'd like to buy a complete server farm. I'd like to take it to my office and plug it in. Wouldn't you?</P>
<P>Only a next generation operating system, like <nolink>JOS, will make it easy.</P><BR><BR></P><!--

<TABLE width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="737b9c">
<TR><TD ALIGN="CENTER">
<a href="/user.php?op=login&redirect=%2Fview%2F%2FHybridServerFarm&PHPSESSID=ecbd70eb61ad011178349be61f92db6a">login</a> or <a href="/user.php?op=newacct&redirect=%2Fview%2F%2FHybridServerFarm&PHPSESSID=ecbd70eb61ad011178349be61f92db6a">new&nbsp;user</a><TR><TD>
</TABLE>

!-->
<!-- end BODY page !-->

<HR>

<DIV ALIGN="CENTER">
<TABLE BORDER="0" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR>
	<TD ALIGN="CENTER" COLSPAN="2">
		Content of these pages are owned and copyrighted by the poster.
	</TD>
</TR>
<TR>
	<TD ALIGN="RIGHT" WIDTH="50%">
		Hosted by:
	</TD>
	<TD ALIGN="LEFT">
		<A HREF="http://sourceforge.net/"><IMG 
			SRC="http://sourceforge.net/sflogo.php?group_id=2376&type=1"
			BORDER=0 HSPACE=0 VSPACE=0></A>
	</TD>
</TR>
</TABLE>
</DIV>
</BODY>
</HTML>
