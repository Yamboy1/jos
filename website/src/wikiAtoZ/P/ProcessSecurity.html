<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 FINAL//EN">
<HTML>
  <HEAD>
    <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=ISO-8859-1">
    <TITLE>ProcessSecurity.Imported @ jos.sf.net</TITLE>
  </HEAD>

<BODY BGCOLOR="#FFFFFF">

<!-- The FORM encloses the entire header, because it renders better that way. !-->
<FORM ACTION="/jump.php"><input type="hidden" name="PHPSESSID" value="8f2b24aa7dd8aee0b7393a9d0064de61" />

<!-- The JOS logo. !-->
<TABLE BORDER="0" CELLSPACING="0" CELLPADDING="3" WIDTH="100%">
<TR VALIGN="TOP" ALIGN="LEFT">
	<TD><A HREF="http://cjos.sourceforge.net/archive/"><IMG 
		VSPACE="0" HSPACE="0" ALIGN="MIDDLE" BORDER="0"
		SRC="http://cjos.sourceforge.net/archive/media/jos_logo_mini.gif"></A></TD>
	<!-- The tab table. !-->
	<TD WIDTH="100%" ALIGN="RIGHT" BGCOLOR="#FFFFFF" VALIGN="BOTTOM"> 
		<TABLE BORDER="0" CELLSPACING="0" CELLPADDING="3" WIDTH="100%" ALIGN="RIGHT">
			<TR VALIGN="MIDDLE" ALIGN="LEFT">

<TD BGCOLOR="White" WIDTH="60%">&nbsp;</TD>
<TD BGCOLOR="#FFFFCC"><A HREF="http://cjos.sourceforge.net/archive/">Home</A></TD>
<TD BGCOLOR="White">&nbsp;</TD>
<TD WIDTH="10%" BGCOLOR="#FFFFCC" ALIGN="CENTER"><A HREF="http://cjos.sourceforge.net/archive/info/">Info</A></TD>
<TD BGCOLOR="White">&nbsp;</TD>
<TD WIDTH="10%" BGCOLOR="#FFFFCC" ALIGN="CENTER"><A HREF="http://cjos.sourceforge.net/archive/dev/">DevZone</A></TD>
<TD BGCOLOR="White">&nbsp;</TD>
<TD WIDTH="10%" BGCOLOR="#FFCC66" ALIGN="CENTER"><A
HREF="http://jos.sourceforge.net/">Wiki</A></TD>
<TD BGCOLOR="White">&nbsp;</TD>
			</TR>
			<TR>
				<TD BGCOLOR="#FFCC66" ALIGN="RIGHT" COLSPAN="9">
					<A HREF="/view/Users/?PHPSESSID=8f2b24aa7dd8aee0b7393a9d0064de61">UsersWeb</A>
					&nbsp;|&nbsp;
					<A HREF="/view/Main/?PHPSESSID=8f2b24aa7dd8aee0b7393a9d0064de61">MainWeb</A>
					&nbsp;|&nbsp;
					<A HREF="/view/Info/?PHPSESSID=8f2b24aa7dd8aee0b7393a9d0064de61">InfoWeb</A>
					&nbsp;|&nbsp;
					<A HREF="/view/DevZone/?PHPSESSID=8f2b24aa7dd8aee0b7393a9d0064de61">DevZoneWeb</A>
					&nbsp;|&nbsp;
					<A HREF="/view/Support/?PHPSESSID=8f2b24aa7dd8aee0b7393a9d0064de61">SupportWeb</A>
				</TD>
			</TR>
		</TABLE>
	</TD>		
</TR>
<!-- The WikiHeader. !-->
<TR><TD COLSPAN="2">
<TABLE BORDER="0" CELLSPACING="0" CELLPADDING="3" WIDTH="100%">
<TR>
	<TD WIDTH="25%" ALIGN="CENTER" BGCOLOR="#FFFFCC" VALIGN="CENTER">
		<B>[&nbsp;<a href="/info//ProcessSecurity?PHPSESSID=8f2b24aa7dd8aee0b7393a9d0064de61">ProcessSecurity</a>&nbsp;]</B>
	</TD>
	<TD WIDTH="25%" ALIGN="CENTER" BGCOLOR="#FFEE88" VALIGN="CENTER">
		<B>[ not logged in ]</B>	</TD>
	<TD WIDTH="25%" ALIGN="CENTER" BGCOLOR="#FFDD77" VALIGN="CENTER">
		<B>[ Web: <a href="/view/Imported/?PHPSESSID=8f2b24aa7dd8aee0b7393a9d0064de61">Imported</a> ]</B>	</TD>
	<TD WIDTH="25%" ALIGN="CENTER" BGCOLOR="#FFCC66" VALIGN="CENTER">
		goto:&nbsp;<INPUT TYPE="TEXT" SIZE="10" NAME="topic"><!--<INPUT TYPE="IMAGE" SRC="/media/go.gif?PHPSESSID=8f2b24aa7dd8aee0b7393a9d0064de61" BORDER="0" VALUE="topic" ALT="goto">!-->&nbsp;<a href="/search.php?PHPSESSID=8f2b24aa7dd8aee0b7393a9d0064de61"><FONT SIZE="-1">options</FONT></a>
	</TD>
</TR>
</TABLE>

<TABLE BORDER="0" CELLSPACING="0" CELLPADDING="3" WIDTH="100%">
	<TR>
	<TD ALIGN="CENTER" BGCOLOR="#FFFFCC" VALIGN="TOP">
		[&nbsp;get <a href="/info/Imported/ProcessSecurity?PHPSESSID=8f2b24aa7dd8aee0b7393a9d0064de61">info</a> on or <a href="/edit/Imported/ProcessSecurity?PHPSESSID=8f2b24aa7dd8aee0b7393a9d0064de61">edit</a>&nbsp;]	</TD>
	<TD ALIGN="CENTER" BGCOLOR="#FFEE88" VALIGN="TOP">
		[&nbsp;<a href="/user.php?op=login&redirect=%2Fview%2F%2FProcessSecurity&PHPSESSID=8f2b24aa7dd8aee0b7393a9d0064de61">login</a> or <a href="/user.php?op=newacct&redirect=%2Fview%2F%2FProcessSecurity&PHPSESSID=8f2b24aa7dd8aee0b7393a9d0064de61">new&nbsp;user</a>&nbsp;]	</TD>
	<TD ALIGN="CENTER" BGCOLOR="#FFDD77" VALIGN="TOP">
		[&nbsp;list of <a href="/topics/Imported/?PHPSESSID=8f2b24aa7dd8aee0b7393a9d0064de61">topics</a>, <a href="/hubsnodes/Imported/?PHPSESSID=8f2b24aa7dd8aee0b7393a9d0064de61">hubs&nbsp;&amp;&nbsp;nodes</a>, or <a href="/changes/Imported/?PHPSESSID=8f2b24aa7dd8aee0b7393a9d0064de61">recent&nbsp;changes</a>&nbsp;]	</TD>
	</TR>
</TABLE>

<!-- From CommonHeader !-->
</TR></TD>
</TABLE>
</FORM>

<!-- start BODY page !-->
<P>
<H1>Partial working draft: Security in <a href="/view.php?topic=JOS&web=Imported&PHPSESSID=8f2b24aa7dd8aee0b7393a9d0064de61">JOS</a> <wikitopic JOS /wikitopic>- Addressing the security problems of an object-oriented system running
in a single-address space with focus on Java(tm)</H1>
<P>
<H2>The requirements</H2>
</P><P>
<OL>
		  <LI>Several "processes" running in <a href="/view.php?topic=JOS&web=Imported&PHPSESSID=8f2b24aa7dd8aee0b7393a9d0064de61">JOS</a> <wikitopic JOS /wikitopic>need to be protected from each other
		  <LI>Accounting of the memory and <a href="/view.php?topic=CPU&web=Imported&PHPSESSID=8f2b24aa7dd8aee0b7393a9d0064de61">CPU</a> <wikitopic CPU /wikitopic>usage of "processes" and possibly limiting these resources
		  <LI>General "multi-user like" security needs to be provided for access control to other restricted objects
</OL>
</P><P>
<H2>Analyzation of the current state-of-the-art in Java without additional protection measures</H2>
</P><P>
<UL>
		  <LI>ThreadGroups allow the grouping of several Threads or <a href="/view.php?topic=ThreadGroups&PHPSESSID=8f2b24aa7dd8aee0b7393a9d0064de61">ThreadGroups</a><wikitopic ThreadGroups /wikitopic> all belonging to one "process"
		  (addresses 1.-3. - proof later)
		  <LI>It's not possible for a "process" to access other "processes'" memory without obtaining
		  an object reference (addresses 1.)
		  <LI>Java's static methods and fields are the only exception of this rule (problem for 1.)
		  <LI>Due to the bad design of the already existing Java APIs, which assume "<EM>one program - one VM</EM>"
		  we cannot let this problem be solved by application developers (problem for 1.)
		  <LI>Access Control is done by a <a href="/view.php?topic=SecurityManager&PHPSESSID=8f2b24aa7dd8aee0b7393a9d0064de61">SecurityManager</a><wikitopic SecurityManager /wikitopic> which is responsible for the whole VM (addresses 3.)
</UL>
</P><P>
<H2>Proposed basic design to fullfil the requirements</H2>
</P><P>
<UL>
		  <LI>Conflicts have to be removed from static fields/methods (solves 1.) (there are several possible approaches,
		  so I'll describe it later)
		  <LI>An extension to <a href="/view.php?topic=ThreadGroups&PHPSESSID=8f2b24aa7dd8aee0b7393a9d0064de61">ThreadGroups</a><wikitopic ThreadGroups /wikitopic> are used to provide accounting/limitations on resources (solves 2.)
		  <LI>A sophisticated <a href="/view.php?topic=SecurityManager&PHPSESSID=8f2b24aa7dd8aee0b7393a9d0064de61">SecurityManager</a><wikitopic SecurityManager /wikitopic> must be created to provide access control on resources (solves 3.)
</UL>
</P><P>
<P>
<H2>Details on the design and possible implementations</H2>
<H3>The problem of static methods/fields</H3>
<P>Static methods/fields (also known as class methods/fields) are accessible from everywhere in the VM, because
they do not need an object reference (which is obvious :). There are several different cases where problems could
arise.
</P><P>
<OL>
		  <LI>The unthoughtful usage of static methods/fields in applications
		  <LI>Some design mistakes in Java's standard API, where Sun(tm)'s engineers wrongfully assumed that only one application
		  is running in a VM (e.g. the System class)
</OL>
</P><P>
<P><B>A possible approach for a solution<BR>
</B>I tried to analyze the usage of static fields in the Java 1.1 <a href="/view.php?topic=API&web=Imported&PHPSESSID=8f2b24aa7dd8aee0b7393a9d0064de61">API</a> <wikitopic API /wikitopic>(as described in the <a href="/view.php?topic=API&web=Imported&PHPSESSID=8f2b24aa7dd8aee0b7393a9d0064de61">API</a> <wikitopic API /wikitopic>definition), and
came to the conclusion, that only System.in and System.out were problematic. The usage of static methods is not
really a problem, because either a) calling them has no impact on the rest of the system (e.g. Integer.parseInt)
or b) the methods may be implemented so that "system-wide" changes will only affect the "process
context". Please correct me, if I've missed something important. So we can consider problem 2 solved.<BR>
For problem 1 there are several possible approaches. Either we ignore this problem and leave security to the application
developer, or the <a href="/view.php?topic=ClassLoader&PHPSESSID=8f2b24aa7dd8aee0b7393a9d0064de61">ClassLoader</a><wikitopic ClassLoader /wikitopic> verifies the bytecode at load time to ensure that there are no forbidden calls (criteria
for this are needed), or we take up the suggestion that the <a href="/view.php?topic=ClassLoader&PHPSESSID=8f2b24aa7dd8aee0b7393a9d0064de61">ClassLoader</a><wikitopic ClassLoader /wikitopic> creates a new namespace for all static
calls (hmm...would increase memory consumption and make everything a bit more complicated).</P>
<H3>Using <a href="/view.php?topic=ThreadGroups&PHPSESSID=8f2b24aa7dd8aee0b7393a9d0064de61">ThreadGroups</a><wikitopic ThreadGroups /wikitopic> as a replacement for "processses"</H3>
<P>All Threads belonging to a program could be placed in a <a href="/view.php?topic=ThreadGroup&PHPSESSID=8f2b24aa7dd8aee0b7393a9d0064de61">ThreadGroup</a><wikitopic ThreadGroup /wikitopic>. <a href="/view.php?topic=JOS&web=Imported&PHPSESSID=8f2b24aa7dd8aee0b7393a9d0064de61">JOS</a> <wikitopic JOS /wikitopic>security will prevent applications
from accessing/modifying their own <a href="/view.php?topic=ThreadGroup&PHPSESSID=8f2b24aa7dd8aee0b7393a9d0064de61">ThreadGroup</a><wikitopic ThreadGroup /wikitopic>. <a href="/view.php?topic=ThreadGroup&PHPSESSID=8f2b24aa7dd8aee0b7393a9d0064de61">ThreadGroup</a><wikitopic ThreadGroup /wikitopic>'s functionality needs to be increased to support real
limitations upon memory/CPU usage. A <a href="/view.php?topic=ThreadGroup&PHPSESSID=8f2b24aa7dd8aee0b7393a9d0064de61">ThreadGroup</a><wikitopic ThreadGroup /wikitopic> could also serve as "parent object" for the "caller
stack security model" I will describe later. Others suggested to introduction of "Application contexts"
or "Process contexts", but these are basically just synonyms for my extended <a href="/view.php?topic=ThreadGroups&PHPSESSID=8f2b24aa7dd8aee0b7393a9d0064de61">ThreadGroups</a><wikitopic ThreadGroups /wikitopic>. We can agree
on the name later.</P>
</P><P>
<P><B>CPU time accounting</B><BR>
For this model to work, Threads will always need to be created in the appropriate <a href="/view.php?topic=ThreadGroup&PHPSESSID=8f2b24aa7dd8aee0b7393a9d0064de61">ThreadGroup</a><wikitopic ThreadGroup /wikitopic>. E.g. an <a href="/view.php?topic=AWT&web=Imported&PHPSESSID=8f2b24aa7dd8aee0b7393a9d0064de61">AWT</a> <wikitopic AWT /wikitopic>Repaint
Thread, even if started by the system, needs to be put in the applications' <a href="/view.php?topic=ThreadGroup&PHPSESSID=8f2b24aa7dd8aee0b7393a9d0064de61">ThreadGroup</a><wikitopic ThreadGroup /wikitopic> which is painted, so that
the painting time is accounted to the application, not the system. This should be flawless, as long as while creating
JOS, we keep in mind to put everything into the appropriate <a href="/view.php?topic=ThreadGroup&PHPSESSID=8f2b24aa7dd8aee0b7393a9d0064de61">ThreadGroup</a><wikitopic ThreadGroup /wikitopic>. Our <a href="/view.php?topic=SecurityManager&PHPSESSID=8f2b24aa7dd8aee0b7393a9d0064de61">SecurityManager</a><wikitopic SecurityManager /wikitopic> will only allow the
creation of Threads somewhere in that applications' <a href="/view.php?topic=ThreadGroup&PHPSESSID=8f2b24aa7dd8aee0b7393a9d0064de61">ThreadGroup</a><wikitopic ThreadGroup /wikitopic> hierarchy. (small note to people not familiar with
the Java API: <a href="/view.php?topic=ThreadGroups&PHPSESSID=8f2b24aa7dd8aee0b7393a9d0064de61">ThreadGroups</a><wikitopic ThreadGroups /wikitopic> may also contain other <a href="/view.php?topic=ThreadGroups&PHPSESSID=8f2b24aa7dd8aee0b7393a9d0064de61">ThreadGroups</a><wikitopic ThreadGroups /wikitopic> as well as single Threads).</P>
</P><P>
<P><B>Memory accounting<BR>
</B>It's difficult to track which object was created in an object-oriented system by which other object and why.
Therefore I suggest doing a compromise and also use the <a href="/view.php?topic=ThreadGroups&PHPSESSID=8f2b24aa7dd8aee0b7393a9d0064de61">ThreadGroups</a><wikitopic ThreadGroups /wikitopic> to do memory accounting. The memory space
consumed by objects creating during a <a href="/view.php?topic=ThreadGroups&PHPSESSID=8f2b24aa7dd8aee0b7393a9d0064de61">ThreadGroups</a><wikitopic ThreadGroups /wikitopic> execution time are accounted to that <a href="/view.php?topic=ThreadGroup&PHPSESSID=8f2b24aa7dd8aee0b7393a9d0064de61">ThreadGroup</a><wikitopic ThreadGroup /wikitopic>. That's still
not 100% fair in case of shared code, but it's a beginning.</P>
</P><P>
<P></P>
<H3>The "caller stack security" - an approach from the <a href="/view.php?topic=MUD&web=Imported&PHPSESSID=8f2b24aa7dd8aee0b7393a9d0064de61">MUD</a> <wikitopic MUD /wikitopic>world</H3>
<P>In an object-oriented system, with reusability in mind, objects will have to call other objects of which they
do not know 100% if they are to be trusted. So we will need to scale access rights security down to the object
level. I find the "caller stack security" approach, which is in use in the LP Mud world for years now,
very usable. It basically works that way, that if a restricted action is tried to be executed, the whole stack
of calling objects is traced back to the object with the least amount of security rights which are then used for
executing this action. We will need a "parent" object for this model, so I suggest that a program's <a href="/view.php?topic=ThreadGroup&PHPSESSID=8f2b24aa7dd8aee0b7393a9d0064de61">ThreadGroup</a><wikitopic ThreadGroup /wikitopic>
should be used as the parent object. The <a href="/view.php?topic=ThreadGroup&PHPSESSID=8f2b24aa7dd8aee0b7393a9d0064de61">ThreadGroup</a><wikitopic ThreadGroup /wikitopic> could have some sort of User object attached to it, which
represents a "real user", and knows about that users basic access rights. Sometimes, an object which
is part of <a href="/view.php?topic=JOS&web=Imported&PHPSESSID=8f2b24aa7dd8aee0b7393a9d0064de61">JOS</a> <wikitopic JOS /wikitopic>itself will need to have better rights than the calling objects. In this case, the <a href="/view.php?topic=JOS&web=Imported&PHPSESSID=8f2b24aa7dd8aee0b7393a9d0064de61">JOS</a> <wikitopic JOS /wikitopic>system may
do a so called "unguarded" call, which basically deletes all entries in the current caller stack and
therefore allows to restart with the system's access rights. The usage of "unguarded" calls is limited
to a trusted part of the <a href="/view.php?topic=JOS&web=Imported&PHPSESSID=8f2b24aa7dd8aee0b7393a9d0064de61">JOS</a> <wikitopic JOS /wikitopic>core system.</P>
</P><P>
<P><B>Why is this really useful?<BR>
</B>On the first look, the security achieved by this model can be achieved with a less costly model. But utilizing
this model from the very beginning puts our system on rather "safe feet" and allows adding rather nifty
security features later on.<BR>
Imagine this:<BR>
A composed document incorporating <a href="/view.php?topic=JavaBeans&PHPSESSID=8f2b24aa7dd8aee0b7393a9d0064de61">JavaBeans</a><wikitopic JavaBeans /wikitopic> code for some really nice rendering of something is provided from User
A with very few access rights to User B with almost all access rights. User A could have modified the <a href="/view.php?topic=JavaBeans&PHPSESSID=8f2b24aa7dd8aee0b7393a9d0064de61">JavaBeans</a><wikitopic JavaBeans /wikitopic>
code to be some sort of "Trojan Horse" to get something similar to "root" access to the machine
User B controls. But because the security is object-based, the incorporated <a href="/view.php?topic=JavaBeans&PHPSESSID=8f2b24aa7dd8aee0b7393a9d0064de61">JavaBeans</a><wikitopic JavaBeans /wikitopic> objects will have more restrictive
access rights than User B, and so the caller stack security will prevent User A from obtaining "root"
access. Maybe this example was not that good, because similar stuff could be achieved by letting the <a href="/view.php?topic=JavaBeans&PHPSESSID=8f2b24aa7dd8aee0b7393a9d0064de61">JavaBeans</a><wikitopic JavaBeans /wikitopic>
running in some sort of sandbox, but my intuition tells me, that having object-level security would be wise. An
argument <EM>for </EM>object-level security and against the sandbox approach would be, that you would have to setup
a new sandbox for basically everything. I need your opinions on that.</P>
</P><P>
<P>Of course there's still the open question on how to make this process transparent and really usable to end users.</P>
</P><P>
<P><BR>
<BR>
<to be continued></P>
</P><P>
<HR>
</P><P>
<a href="/view.php?topic=JavaSoft&PHPSESSID=8f2b24aa7dd8aee0b7393a9d0064de61">JavaSoft</a><wikitopic JavaSoft /wikitopic>'s <a href="/view.php?topic=JDK&web=Imported&PHPSESSID=8f2b24aa7dd8aee0b7393a9d0064de61">JDK</a> <wikitopic JDK /wikitopic>1.2 Security Specification seems to be almost at the same approach, so this draft should adapt a bit.
</P><P>
But, do we have to do more than one event-handling thread (for every process/ user with a different security-domain)?
This would mean, every callback thread (like event-handler and with <a href="/view.php?topic=API&web=Imported&PHPSESSID=8f2b24aa7dd8aee0b7393a9d0064de61">API</a> <wikitopic API /wikitopic>1.2 also printer) must reside in every security domain.
</P><P>
Btw, who is the author of this draft?
</P><P>
<a href="/view.php?topic=PhilNeumann&PHPSESSID=8f2b24aa7dd8aee0b7393a9d0064de61">PhilNeumann</a><wikitopic PhilNeumann /wikitopic> 15.7.1998
</P><P><BR><BR></P><!--

<TABLE width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="737b9c">
<TR><TD ALIGN="CENTER">
<a href="/user.php?op=login&redirect=%2Fview%2F%2FProcessSecurity&PHPSESSID=8f2b24aa7dd8aee0b7393a9d0064de61">login</a> or <a href="/user.php?op=newacct&redirect=%2Fview%2F%2FProcessSecurity&PHPSESSID=8f2b24aa7dd8aee0b7393a9d0064de61">new&nbsp;user</a><TR><TD>
</TABLE>

!-->
<!-- end BODY page !-->

<HR>

<DIV ALIGN="CENTER">
<TABLE BORDER="0" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR>
	<TD ALIGN="CENTER" COLSPAN="2">
		Content of these pages are owned and copyrighted by the poster.
	</TD>
</TR>
<TR>
	<TD ALIGN="RIGHT" WIDTH="50%">
		Hosted by:
	</TD>
	<TD ALIGN="LEFT">
		<A HREF="http://sourceforge.net/"><IMG 
			SRC="http://sourceforge.net/sflogo.php?group_id=2376&type=1"
			BORDER=0 HSPACE=0 VSPACE=0></A>
	</TD>
</TR>
</TABLE>
</DIV>
</BODY>
</HTML>
