<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 FINAL//EN">
<HTML>
  <HEAD>
    <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=ISO-8859-1">
    <TITLE>ProcessAndBCNI.Imported @ jos.sf.net</TITLE>
  </HEAD>

<BODY BGCOLOR="#FFFFFF">

<!-- The FORM encloses the entire header, because it renders better that way. !-->
<FORM ACTION="/jump.php"><input type="hidden" name="PHPSESSID" value="6f16ba3d9a81c897610d9ee4105fbe29" />

<!-- The JOS logo. !-->
<TABLE BORDER="0" CELLSPACING="0" CELLPADDING="3" WIDTH="100%">
<TR VALIGN="TOP" ALIGN="LEFT">
	<TD><A HREF="http://cjos.sourceforge.net/archive/"><IMG 
		VSPACE="0" HSPACE="0" ALIGN="MIDDLE" BORDER="0"
		SRC="http://cjos.sourceforge.net/archive/media/jos_logo_mini.gif"></A></TD>
	<!-- The tab table. !-->
	<TD WIDTH="100%" ALIGN="RIGHT" BGCOLOR="#FFFFFF" VALIGN="BOTTOM"> 
		<TABLE BORDER="0" CELLSPACING="0" CELLPADDING="3" WIDTH="100%" ALIGN="RIGHT">
			<TR VALIGN="MIDDLE" ALIGN="LEFT">

<TD BGCOLOR="White" WIDTH="60%">&nbsp;</TD>
<TD BGCOLOR="#FFFFCC"><A HREF="http://cjos.sourceforge.net/archive/">Home</A></TD>
<TD BGCOLOR="White">&nbsp;</TD>
<TD WIDTH="10%" BGCOLOR="#FFFFCC" ALIGN="CENTER"><A HREF="http://cjos.sourceforge.net/archive/info/">Info</A></TD>
<TD BGCOLOR="White">&nbsp;</TD>
<TD WIDTH="10%" BGCOLOR="#FFFFCC" ALIGN="CENTER"><A HREF="http://cjos.sourceforge.net/archive/dev/">DevZone</A></TD>
<TD BGCOLOR="White">&nbsp;</TD>
<TD WIDTH="10%" BGCOLOR="#FFCC66" ALIGN="CENTER"><A
HREF="http://jos.sourceforge.net/">Wiki</A></TD>
<TD BGCOLOR="White">&nbsp;</TD>
			</TR>
			<TR>
				<TD BGCOLOR="#FFCC66" ALIGN="RIGHT" COLSPAN="9">
					<A HREF="/view/Users/?PHPSESSID=6f16ba3d9a81c897610d9ee4105fbe29">UsersWeb</A>
					&nbsp;|&nbsp;
					<A HREF="/view/Main/?PHPSESSID=6f16ba3d9a81c897610d9ee4105fbe29">MainWeb</A>
					&nbsp;|&nbsp;
					<A HREF="/view/Info/?PHPSESSID=6f16ba3d9a81c897610d9ee4105fbe29">InfoWeb</A>
					&nbsp;|&nbsp;
					<A HREF="/view/DevZone/?PHPSESSID=6f16ba3d9a81c897610d9ee4105fbe29">DevZoneWeb</A>
					&nbsp;|&nbsp;
					<A HREF="/view/Support/?PHPSESSID=6f16ba3d9a81c897610d9ee4105fbe29">SupportWeb</A>
				</TD>
			</TR>
		</TABLE>
	</TD>		
</TR>
<!-- The WikiHeader. !-->
<TR><TD COLSPAN="2">
<TABLE BORDER="0" CELLSPACING="0" CELLPADDING="3" WIDTH="100%">
<TR>
	<TD WIDTH="25%" ALIGN="CENTER" BGCOLOR="#FFFFCC" VALIGN="CENTER">
		<B>[&nbsp;<a href="/info//ProcessAndBCNI?PHPSESSID=6f16ba3d9a81c897610d9ee4105fbe29">ProcessAndBCNI</a>&nbsp;]</B>
	</TD>
	<TD WIDTH="25%" ALIGN="CENTER" BGCOLOR="#FFEE88" VALIGN="CENTER">
		<B>[ not logged in ]</B>	</TD>
	<TD WIDTH="25%" ALIGN="CENTER" BGCOLOR="#FFDD77" VALIGN="CENTER">
		<B>[ Web: <a href="/view/Imported/?PHPSESSID=6f16ba3d9a81c897610d9ee4105fbe29">Imported</a> ]</B>	</TD>
	<TD WIDTH="25%" ALIGN="CENTER" BGCOLOR="#FFCC66" VALIGN="CENTER">
		goto:&nbsp;<INPUT TYPE="TEXT" SIZE="10" NAME="topic"><!--<INPUT TYPE="IMAGE" SRC="/media/go.gif?PHPSESSID=6f16ba3d9a81c897610d9ee4105fbe29" BORDER="0" VALUE="topic" ALT="goto">!-->&nbsp;<a href="/search.php?PHPSESSID=6f16ba3d9a81c897610d9ee4105fbe29"><FONT SIZE="-1">options</FONT></a>
	</TD>
</TR>
</TABLE>

<TABLE BORDER="0" CELLSPACING="0" CELLPADDING="3" WIDTH="100%">
	<TR>
	<TD ALIGN="CENTER" BGCOLOR="#FFFFCC" VALIGN="TOP">
		[&nbsp;get <a href="/info/Imported/ProcessAndBCNI?PHPSESSID=6f16ba3d9a81c897610d9ee4105fbe29">info</a> on or <a href="/edit/Imported/ProcessAndBCNI?PHPSESSID=6f16ba3d9a81c897610d9ee4105fbe29">edit</a>&nbsp;]	</TD>
	<TD ALIGN="CENTER" BGCOLOR="#FFEE88" VALIGN="TOP">
		[&nbsp;<a href="/user.php?op=login&redirect=%2Fview%2F%2FProcessAndBCNI&PHPSESSID=6f16ba3d9a81c897610d9ee4105fbe29">login</a> or <a href="/user.php?op=newacct&redirect=%2Fview%2F%2FProcessAndBCNI&PHPSESSID=6f16ba3d9a81c897610d9ee4105fbe29">new&nbsp;user</a>&nbsp;]	</TD>
	<TD ALIGN="CENTER" BGCOLOR="#FFDD77" VALIGN="TOP">
		[&nbsp;list of <a href="/topics/Imported/?PHPSESSID=6f16ba3d9a81c897610d9ee4105fbe29">topics</a>, <a href="/hubsnodes/Imported/?PHPSESSID=6f16ba3d9a81c897610d9ee4105fbe29">hubs&nbsp;&amp;&nbsp;nodes</a>, or <a href="/changes/Imported/?PHPSESSID=6f16ba3d9a81c897610d9ee4105fbe29">recent&nbsp;changes</a>&nbsp;]	</TD>
	</TR>
</TABLE>

<!-- From CommonHeader !-->
</TR></TD>
</TABLE>
</FORM>

<!-- start BODY page !-->
<P>
<FONT SIZE="-1"><a href="/view.php?topic=ProcessPages&PHPSESSID=6f16ba3d9a81c897610d9ee4105fbe29">ProcessPages</a><wikitopic ProcessPages /wikitopic></FONT>
<HR SIZE="1" NOSHADOW>
<P><EM>Article contributed by <a href="/view.php?topic=GilbertHerschberger&PHPSESSID=6f16ba3d9a81c897610d9ee4105fbe29">GilbertHerschberger</a><wikitopic GilbertHerschberger /wikitopic> (12 April 2000).</EM></P>
<H4>Introduction</H4>
<P>A model for a process in bytecode has many implications. One of the implications is the interaction between a process and the <a href="/view.php?topic=BytecodeNativeInterface&PHPSESSID=6f16ba3d9a81c897610d9ee4105fbe29">BytecodeNativeInterface</a><wikitopic BytecodeNativeInterface /wikitopic>. This article presents the problem of running device drivers and user process in a single virtual machine.</P>
<H4>Device drivers</H4>
<P>Many device drivers are loaded during the startup sequence. The system process has a startup sequence. The system process runs through its step-by-step as if it runs some sort of startup script.</P>
<UL>
<LI><P>What is the environment for a device driver?</P>
<LI><P>Should each device driver run in its own user process?</P>
<LI><P>Should an operating system mix a device driver process with an application process?</P>
</UL>
<H4>Environment</H4>
<P>A low-level device driver has special privileges. It reads and writes to hardware. It might be able to reserve a limited resource for its exclusive use.</P>
<BLOCKQUOTE>Low-level device drivers could run as a thread within the system process.</BLOCKQUOTE>
<P>While it runs as a thread, it can be loaded and re-loaded by a custom class loader. Because it is part of the system process, it can interface directly to hardware. As a rule, only the system process has direct access to the hardware.</P>
<H4>Device manager</H4>
<P>For low-level devices, there might be a device manager. Within the system process, a device manager must be able to create a custom class loader, load the device driver and run it.</P>
<H4>Getting a driver</H4>
<P>A device driver runs in the system process and is used in a user process.</P>
<P>While a device driver is running in the system process, it has been loaded by a custom class loader. The custom class loader has been loaded by a primordial class loader. The device driver is not usually available to any other process.</P>
<P>A user process needs to use a device driver. By default, the process model doesn't allow it. Unless specifically granted, a user process cannot obtain an object reference to a device driver.</P>
<P>When a user process makes a special request, <a href="/view.php?topic=BCNI&web=Imported&PHPSESSID=6f16ba3d9a81c897610d9ee4105fbe29">BCNI</a> <wikitopic BCNI /wikitopic>returns an object reference to an object inside the system process. A virtual machine determines exactly which objects are share-able between a system process and a user process.</P>
<H4><CODE>device:</CODE> scheme</H4>
<P>The <CODE>device:</CODE> scheme is reserved. When implemented it must return all kinds of devices. The device manager runs in the system process. The <CODE>device:</CODE> scheme runs in a user process. An inplementation of the <CODE>device:</CODE> scheme must ultimately go through the BCNI.</P>
<H4>Sharing an object</H4>
<P>Two or more user processes can share an object, too. Here is the mechanism for this.</P>
<UL>
<LI><P>A user process creates an object in the usual way.</P>
<LI><P>A user process invokes a method to dynamicaly cast the object to the system process.</P>
<LI><P>Once it is cast to a system process, it is available to any user process. Objects are share-able between a system process and any user process.</P>
</UL>
<H4>Object registry</H4>
<P>An object registry is an open-ended mechanism to share all kinds of objects among user processes. While an object registry runs in the system process, its objects are available to any user process.</P>
<H4>Illegal cast</H4>
<P>It is illegal to dynamically cast an object reference in a situation where different classes have the same name. (We continue to work on the definition of <EM>different classes</EM>.)</P>
<P>Because of illegal casts, it might be necessary to build a hybrid between the <a href="/view.php?topic=JNI&web=Imported&PHPSESSID=6f16ba3d9a81c897610d9ee4105fbe29">JNI</a> <wikitopic JNI /wikitopic>design and the <a href="/view.php?topic=MPCL&web=Imported&PHPSESSID=6f16ba3d9a81c897610d9ee4105fbe29">MPCL</a> <wikitopic MPCL /wikitopic>design. When a virtual machine is implemented as a kernel module, one virtual machine can be loaded for each platform. A total of three virtual machines could be loaded simultaneously by the kernel.</P>
<P>An object in one virtual machine cannot be dynamically cast to an object in another virtual machine. Such a cast is illegal.</P>
<P>Traditional <a href="/view.php?topic=IPC&web=Imported&PHPSESSID=6f16ba3d9a81c897610d9ee4105fbe29">IPC</a> <wikitopic IPC /wikitopic>must be preserved. An object in one virtual machine can be used by another through inter-process communication.</P>
<H4>Scenario</H4>
<P>Consider the following scenario.</P>
<PRE>
$ platform java0
java0 platform has been selected.

$ classpath .

$ MyUtility
Running...
Done.

$ platform java1
Loading kernel module for java1...please wait.
java1 platform has been selected.

$ MyUtility
Running...
Done.

$ platform java2
Loading kernel module for java2...please wait.
java2 platform has been selected.

$ MyUtility
Running...
Done.
</PRE>
<P>The platform command is an internal command of a shell. It sets the default platform, used in subsequent commands. When a kernel module is loaded to support a platform, it won't be loaded again. The platform command must be used before invoking the application. Once an application has been invoked, its platform property cannot be changed.</P>
<P>The shell's platform is separate from an application's platform. A command line shell that runs on top of the Java 0 Platform can run a Java 2 application.</P><BR><BR></P><!--

<TABLE width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="737b9c">
<TR><TD ALIGN="CENTER">
<a href="/user.php?op=login&redirect=%2Fview%2F%2FProcessAndBCNI&PHPSESSID=6f16ba3d9a81c897610d9ee4105fbe29">login</a> or <a href="/user.php?op=newacct&redirect=%2Fview%2F%2FProcessAndBCNI&PHPSESSID=6f16ba3d9a81c897610d9ee4105fbe29">new&nbsp;user</a><TR><TD>
</TABLE>

!-->
<!-- end BODY page !-->

<HR>

<DIV ALIGN="CENTER">
<TABLE BORDER="0" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR>
	<TD ALIGN="CENTER" COLSPAN="2">
		Content of these pages are owned and copyrighted by the poster.
	</TD>
</TR>
<TR>
	<TD ALIGN="RIGHT" WIDTH="50%">
		Hosted by:
	</TD>
	<TD ALIGN="LEFT">
		<A HREF="http://sourceforge.net/"><IMG 
			SRC="http://sourceforge.net/sflogo.php?group_id=2376&type=1"
			BORDER=0 HSPACE=0 VSPACE=0></A>
	</TD>
</TR>
</TABLE>
</DIV>
</BODY>
</HTML>
