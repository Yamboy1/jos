<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 FINAL//EN">
<HTML>
  <HEAD>
    <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=ISO-8859-1">
    <TITLE>JVMSpecificClasses.Main @ jos.sf.net</TITLE>
  </HEAD>

<BODY BGCOLOR="#FFFFFF">

<!-- The FORM encloses the entire header, because it renders better that way. !-->
<FORM ACTION="/jump.php"><input type="hidden" name="PHPSESSID" value="8169f143a6ac0c7db552affd085b4a40" />

<!-- The JOS logo. !-->
<TABLE BORDER="0" CELLSPACING="0" CELLPADDING="3" WIDTH="100%">
<TR VALIGN="TOP" ALIGN="LEFT">
	<TD><A HREF="http://cjos.sourceforge.net/archive/"><IMG 
		VSPACE="0" HSPACE="0" ALIGN="MIDDLE" BORDER="0"
		SRC="http://cjos.sourceforge.net/archive/media/jos_logo_mini.gif"></A></TD>
	<!-- The tab table. !-->
	<TD WIDTH="100%" ALIGN="RIGHT" BGCOLOR="#FFFFFF" VALIGN="BOTTOM"> 
		<TABLE BORDER="0" CELLSPACING="0" CELLPADDING="3" WIDTH="100%" ALIGN="RIGHT">
			<TR VALIGN="MIDDLE" ALIGN="LEFT">

<TD BGCOLOR="White" WIDTH="60%">&nbsp;</TD>
<TD BGCOLOR="#FFFFCC"><A HREF="http://cjos.sourceforge.net/archive/">Home</A></TD>
<TD BGCOLOR="White">&nbsp;</TD>
<TD WIDTH="10%" BGCOLOR="#FFFFCC" ALIGN="CENTER"><A HREF="http://cjos.sourceforge.net/archive/info/">Info</A></TD>
<TD BGCOLOR="White">&nbsp;</TD>
<TD WIDTH="10%" BGCOLOR="#FFFFCC" ALIGN="CENTER"><A HREF="http://cjos.sourceforge.net/archive/dev/">DevZone</A></TD>
<TD BGCOLOR="White">&nbsp;</TD>
<TD WIDTH="10%" BGCOLOR="#FFCC66" ALIGN="CENTER"><A
HREF="http://jos.sourceforge.net/">Wiki</A></TD>
<TD BGCOLOR="White">&nbsp;</TD>
			</TR>
			<TR>
				<TD BGCOLOR="#FFCC66" ALIGN="RIGHT" COLSPAN="9">
					<A HREF="/view/Users/?PHPSESSID=8169f143a6ac0c7db552affd085b4a40">UsersWeb</A>
					&nbsp;|&nbsp;
					<A HREF="/view/Main/?PHPSESSID=8169f143a6ac0c7db552affd085b4a40">MainWeb</A>
					&nbsp;|&nbsp;
					<A HREF="/view/Info/?PHPSESSID=8169f143a6ac0c7db552affd085b4a40">InfoWeb</A>
					&nbsp;|&nbsp;
					<A HREF="/view/DevZone/?PHPSESSID=8169f143a6ac0c7db552affd085b4a40">DevZoneWeb</A>
					&nbsp;|&nbsp;
					<A HREF="/view/Support/?PHPSESSID=8169f143a6ac0c7db552affd085b4a40">SupportWeb</A>
				</TD>
			</TR>
		</TABLE>
	</TD>		
</TR>
<!-- The WikiHeader. !-->
<TR><TD COLSPAN="2">
<TABLE BORDER="0" CELLSPACING="0" CELLPADDING="3" WIDTH="100%">
<TR>
	<TD WIDTH="25%" ALIGN="CENTER" BGCOLOR="#FFFFCC" VALIGN="CENTER">
		<B>[&nbsp;<a href="/info//JVMSpecificClasses?PHPSESSID=8169f143a6ac0c7db552affd085b4a40">JVMSpecificClasses</a>&nbsp;]</B>
	</TD>
	<TD WIDTH="25%" ALIGN="CENTER" BGCOLOR="#FFEE88" VALIGN="CENTER">
		<B>[ not logged in ]</B>	</TD>
	<TD WIDTH="25%" ALIGN="CENTER" BGCOLOR="#FFDD77" VALIGN="CENTER">
		<B>[ Web: <a href="/view/Main/?PHPSESSID=8169f143a6ac0c7db552affd085b4a40">Main</a> ]</B>	</TD>
	<TD WIDTH="25%" ALIGN="CENTER" BGCOLOR="#FFCC66" VALIGN="CENTER">
		goto:&nbsp;<INPUT TYPE="TEXT" SIZE="10" NAME="topic"><!--<INPUT TYPE="IMAGE" SRC="/media/go.gif?PHPSESSID=8169f143a6ac0c7db552affd085b4a40" BORDER="0" VALUE="topic" ALT="goto">!-->&nbsp;<a href="/search.php?PHPSESSID=8169f143a6ac0c7db552affd085b4a40"><FONT SIZE="-1">options</FONT></a>
	</TD>
</TR>
</TABLE>

<TABLE BORDER="0" CELLSPACING="0" CELLPADDING="3" WIDTH="100%">
	<TR>
	<TD ALIGN="CENTER" BGCOLOR="#FFFFCC" VALIGN="TOP">
		[&nbsp;get <a href="/info/Main/JVMSpecificClasses?PHPSESSID=8169f143a6ac0c7db552affd085b4a40">info</a> on or <a href="/edit/Main/JVMSpecificClasses?PHPSESSID=8169f143a6ac0c7db552affd085b4a40">edit</a>&nbsp;]	</TD>
	<TD ALIGN="CENTER" BGCOLOR="#FFEE88" VALIGN="TOP">
		[&nbsp;<a href="/user.php?op=login&redirect=%2Fview%2F%2FJVMSpecificClasses&PHPSESSID=8169f143a6ac0c7db552affd085b4a40">login</a> or <a href="/user.php?op=newacct&redirect=%2Fview%2F%2FJVMSpecificClasses&PHPSESSID=8169f143a6ac0c7db552affd085b4a40">new&nbsp;user</a>&nbsp;]	</TD>
	<TD ALIGN="CENTER" BGCOLOR="#FFDD77" VALIGN="TOP">
		[&nbsp;list of <a href="/topics/Main/?PHPSESSID=8169f143a6ac0c7db552affd085b4a40">topics</a>, <a href="/hubsnodes/Main/?PHPSESSID=8169f143a6ac0c7db552affd085b4a40">hubs&nbsp;&amp;&nbsp;nodes</a>, or <a href="/changes/Main/?PHPSESSID=8169f143a6ac0c7db552affd085b4a40">recent&nbsp;changes</a>&nbsp;]	</TD>
	</TR>
</TABLE>

<!-- From CommonHeader !-->
</TR></TD>
</TABLE>
</FORM>

<!-- start BODY page !-->
<P>
<a href="/view.php?topic=PlatformAPIPages&PHPSESSID=8169f143a6ac0c7db552affd085b4a40">PlatformAPIPages</a><wikitopic PlatformAPIPages /wikitopic>; <a href="/view.php?topic=SimpleJOS&PHPSESSID=8169f143a6ac0c7db552affd085b4a40">SimpleJOS</a><wikitopic SimpleJOS /wikitopic>; <a href="/view.php?topic=BytecodeNativeInterface&PHPSESSID=8169f143a6ac0c7db552affd085b4a40">BytecodeNativeInterface</a><wikitopic BytecodeNativeInterface /wikitopic>
<HR>
<EM>Article contributed by <a href="/view.php?topic=GilbertHerschberger&PHPSESSID=8169f143a6ac0c7db552affd085b4a40">GilbertHerschberger</a><wikitopic GilbertHerschberger /wikitopic> (27 November 1999).</EM>
<H4>Introduction</H4>
Look inside the <CODE>java.*</CODE> packages with pure reflection and what do you see?
You see how the <CODE>java.*</CODE> packages have lots of native methods. The Java class libraries are designed around a foreign machine code operating system. Many native methods were used to connect bytecode to a foreign operating system.
</P><P>
The requirements of <nolink>JOS are very different. <nolink>JOS is a mostly-bytecode operating system. Even JVM-specific classes are implemented in bytecode. The <CODE>java.*</CODE> packages almost appear to be useless on mostly-bytecode operating system. But the <a href="/view.php?topic=BytecodeNativeInterface&PHPSESSID=8169f143a6ac0c7db552affd085b4a40">BytecodeNativeInterface</a><wikitopic BytecodeNativeInterface /wikitopic> solves the problem.
<H4>One step at a time</H4>
The resolution of the Java class libraries must proceed on a class-by-class, method-by-method basis. It is important to look ahead and keep track of each methods implement in a Java-compatible virtual machine.
</P><P>
Fortunately, we do not have to touch any class that has already been implemented in pure bytecode. A class free of the native keyword is considered to be complete already.
</P><P>
Let's not forget the possibility of native fields. Are there any? A class with a native field must be resolved separately. <EM>A native field has not been discussed in detail by the architecture group.</EM>
</P><P>
What are the names of all classes in the Java <nolink>API that contain native methods?
</P><P>
When starting with the <a href="/view.php?topic=ClasspathProject&PHPSESSID=8169f143a6ac0c7db552affd085b4a40">ClasspathProject</a><wikitopic ClasspathProject /wikitopic>, how many native methods are a part of the Java <nolink>API? I believe they are making an effort to put all native methods in the <nolink>gnu.java packages.
</P><P>
In theory, it should be possible to create a Java <nolink>API (in 100% Pure Java) which does not depend on specific packages. Using the factory mechanism, the current implementation of the internal packages could be selected at run-time.
<PRE>
Class java.awt.image.ColorModel
  private native void deletepData();

Class java.io.File
  private native boolean exists0();
  private native boolean canWrite0();
  private native boolean canRead0();
  private native boolean isFile0();
  private native boolean isDirectory0();
  private native long lastModified0();
  private native long length0();
  private native boolean mkdir0();
  private native boolean renameTo0( java.io.File );
  private native boolean delete0();
  private native boolean rmdir0();
  private native java.lang.String[] list0();
  private native java.lang.String canonPath( java.lang.String );
  public native boolean isAbsolute();

Class java.io.FileDescriptor
  public native boolean valid();
  public native void sync();
  private static native java.io.FileDescriptor initSystemFD(
java.io.FileDescriptor, int );

Class java.io.FileInputStream
  private native void open( java.lang.String );
  public native int read();
  private native int readBytes( byte[], int, int );
  public native long skip( long );
  public native int available();
  public native void close();

Class java.io.FileOutputStream
  private native void open( java.lang.String );
  private native void openAppend( java.lang.String );
  public native void write( int );
  private native void writeBytes( byte[], int, int );
  public native void close();

Class java.io.ObjectInputStream
  private native java.lang.Class loadClass0( java.lang.Class,
java.lang.String );
  private native void inputClassFields( java.lang.Object, java.lang.Class );
  private static native java.lang.Object allocateNewObject(
java.lang.Class, java.lang.Class );
  private static native java.lang.Object allocateNewArray( java.lang.Class,
int );
  private native boolean invokeObjectReader( java.lang.Object,
java.lang.Class );

Class java.io.ObjectOutputStream
  private native void outputClassFields( java.lang.Object, java.lang.Class );
  private native boolean invokeObjectWriter( java.lang.Object,
java.lang.Class );

Class java.io.ObjectStreamClass
  private static native int getClassAccess( java.lang.Class );
  private static native java.lang.String[] getMethodSignatures(
java.lang.Class );
  private static native int getMethodAccess( java.lang.Class,
java.lang.String );
  private static native java.lang.String[] getFieldSignatures(
java.lang.Class );
  private static native int getFieldAccess( java.lang.Class,
java.lang.String );
  private native java.io.ObjectStreamField[] getFields0( java.lang.Class );
  private static native long getSerialVersionUID( java.lang.Class );
  private static native boolean hasWriteObject( java.lang.Class );

Class java.io.RandomAccessFile
  private native void open( java.lang.String, boolean );
  public native int read();
  private native int readBytes( byte[], int, int );
  public native void write( int );
  private native void writeBytes( byte[], int, int );
  public native long getFilePointer();
  public native void seek( long );
  public native long length();
  public native void close();

Class java.lang.Class
  public static native java.lang.Class forName( java.lang.String );
  public native java.lang.Object newInstance();
  public native boolean isInstance( java.lang.Object );
  public native boolean isAssignableFrom( java.lang.Class );
  public native boolean isInterface();
  public native boolean isArray();
  public native boolean isPrimitive();
  public native java.lang.String getName();
  public native java.lang.ClassLoader getClassLoader();
  public native java.lang.Class getSuperclass();
  public native java.lang.Class[] getInterfaces();
  public native java.lang.Class getComponentType();
  public native int getModifiers();
  public native java.lang.Object[] getSigners();
  native void setSigners( java.lang.Object[] );
  static native java.lang.Class getPrimitiveClass( java.lang.String );
  private native java.lang.reflect.Field[] getFields0( int );
  private native java.lang.reflect.Method[] getMethods0( int );
  private native java.lang.reflect.Constructor[] getConstructors0( int );
  private native java.lang.reflect.Field getField0( java.lang.String, int );
  private native java.lang.reflect.Method getMethod0( java.lang.String,
java.lang.Class[] );
  private native java.lang.reflect.Constructor getConstructor0(
java.lang.Class[] );

Class java.lang.ClassLoader
  private native void init();
  private native java.lang.Class defineClass0( java.lang.String, byte[],
int, int );
  private native void resolveClass0( java.lang.Class );
  private native java.lang.Class findSystemClass0( java.lang.String );
  private static native java.io.InputStream getSystemResourceAsStream0(
java.lang.String );
  private static native java.lang.String getSystemResourceAsName0(
java.lang.String );

Class java.lang.Compiler
  private static native void initialize();
  public static native boolean compileClass( java.lang.Class );
  public static native boolean compileClasses( java.lang.String );
  public static native java.lang.Object command( java.lang.Object );
  public static native void enable();
  public static native void disable();

Class java.lang.Double
  public static native long doubleToLongBits( double );
  public static native double longBitsToDouble( long );
  static native double valueOf0( java.lang.String );

Class java.lang.Float
  public static native int floatToIntBits( float );
  public static native float intBitsToFloat( int );

Class java.lang.Math
  public static native double sin( double );
  public static native double cos( double );
  public static native double tan( double );
  public static native double asin( double );
  public static native double acos( double );
  public static native double atan( double );
  public static native double exp( double );
  public static native double log( double );
  public static native double sqrt( double );
  public static native double IEEEremainder( double, double );
  public static native double ceil( double );
  public static native double floor( double );
  public static native double rint( double );
  public static native double atan2( double, double );
  public static native double pow( double, double );

Class java.lang.Object
  public final native java.lang.Class getClass();
  public native int hashCode();
  protected native java.lang.Object clone();
  public final native void notify();
  public final native void notifyAll();
  public final native void wait( long );

Class java.lang.Runtime
  private native void exitInternal( int );
  private static native void runFinalizersOnExit0( boolean );
  private native java.lang.Process execInternal( java.lang.String[],
java.lang.String );
  public native long freeMemory();
  public native long totalMemory();
  public native void gc();
  public native void runFinalization();
  public native void traceInstructions( boolean );
  public native void traceMethodCalls( boolean );
  private native java.lang.String initializeLinkerInternal();
  private native java.lang.String buildLibName( java.lang.String,
java.lang.String );
  private native int loadFileInternal( java.lang.String );

Class java.lang.SecurityManager
  protected native java.lang.Class[] getClassContext();
  protected native java.lang.ClassLoader currentClassLoader();
  protected native int classDepth( java.lang.String );
  protected native int classLoaderDepth();
  private native java.lang.Class currentLoadedClass0();

Class java.lang.String
  public native java.lang.String intern();

Class java.lang.System
  private static native void setIn0( java.io.InputStream );
  private static native void setOut0( java.io.PrintStream );
  private static native void setErr0( java.io.PrintStream );
  public static native long currentTimeMillis();
  public static native void arraycopy( java.lang.Object, int,
java.lang.Object );
  public static native int identityHashCode( java.lang.Object );
  private static native java.util.Properties initProperties(
java.util.Properties );

Class java.lang.Thread
  public static native java.lang.Thread currentThread();
  public static native void yield();
  public static native void sleep( long );
  public native void start();
  private native boolean isInterrupted( boolean );
  public final native boolean isAlive();
  public native int countStackFrames();
  private native void setPriority0( int );
  private native void stop0( java.lang.Object );
  private native void suspend0();
  private native void resume0();
  private native void interrupt0();

Class java.lang.Throwable
  private native void printStackTrace0( java.lang.Object );
  public native java.lang.Throwable fillInStackTrace();

Class java.lang.Win32Process
  public native int exitValue();
  public native int waitFor();
  public native void destroy();
  private native void create( java.lang.String, java.lang.String );
  private native void close();

Class java.lang.reflect.Array
  public static native int getLength( java.lang.Object );
  public static native java.lang.Object get( java.lang.Object, int );
  public static native boolean getBoolean( java.lang.Object, int );
  public static native byte getByte( java.lang.Object, int );
  public static native char getChar( java.lang.Object, int );
  public static native short getShort( java.lang.Object, int );
  public static native int getInt( java.lang.Object, int );
  public static native long getLong( java.lang.Object, int );
  public static native float getFloat( java.lang.Object, int );
  public static native double getDouble( java.lang.Object, int );
  public static native void set( java.lang.Object, int, java.lang.Object );
  public static native void setBoolean( java.lang.Object, int, boolean );
  public static native void setByte( java.lang.Object, int, byte );
  public static native void setChar( java.lang.Object, int, char );
  public static native void setShort( java.lang.Object, int, short );
  public static native void setInt( java.lang.Object, int, int );
  public static native void setLong( java.lang.Object, int, long );
  public static native void setFloat( java.lang.Object, int, float );
  public static native void setDouble( java.lang.Object, int, double );
  private static native java.lang.Object newArray( java.lang.Class, int );
  private static native java.lang.Object multiNewArray( java.lang.Class,
int[] );

Class java.lang.reflect.Constructor
  public native int getModifiers();
  public native java.lang.Object newInstance( java.lang.Object[] );

Class java.lang.reflect.Field
  public native int getModifiers();
  public native java.lang.Object get( java.lang.Object );
  public native boolean getBoolean( java.lang.Object );
  public native byte getByte( java.lang.Object );
  public native char getChar( java.lang.Object );
  public native short getShort( java.lang.Object );
  public native int getInt( java.lang.Object );
  public native long getLong( java.lang.Object );
  public native float getFloat( java.lang.Object );
  public native double getDouble( java.lang.Object );
  public native void set( java.lang.Object, java.lang.Object );
  public native void setBoolean( java.lang.Object, boolean );
  public native void setByte( java.lang.Object, byte );
  public native void setChar( java.lang.Object, char );
  public native void setShort( java.lang.Object, short );
  public native void setInt( java.lang.Object, int );
  public native void setLong( java.lang.Object, long );
  public native void setFloat( java.lang.Object, float );
  public native void setDouble( java.lang.Object, double );

Class java.lang.reflect.Method
  public native int getModifiers();
  public native java.lang.Object invoke( java.lang.Object,
java.lang.Object[] );

Class java.math.BigInteger
  private static native void plumbInit();
  private static native byte[] plumbAdd( byte[], byte[] );
  private static native java.math.BigInteger plumbSubtract( byte[], byte[] );
  private static native byte[] plumbMultiply( byte[], byte[] );
  private static native byte[] plumbDivide( byte[], byte[] );
  private static native byte[] plumbRemainder( byte[], byte[] );
  private static native byte[][] plumbDivideAndRemainder( byte[], byte[] );
  private static native byte[] plumbGcd( byte[], byte[] );
  private static native byte[] plumbModPow( byte[], byte[], byte[] );
  private static native byte[] plumbModInverse( byte[], byte[] );
  private static native byte[] plumbSquare( byte[] );
  private static native byte[] plumbGeneratePrime( byte[] );

Class java.net.InetAddressImpl
  native java.lang.String getLocalHostName();
  native void makeAnyLocalAddress( java.net.InetAddress );
  native byte[][] lookupAllHostAddr( java.lang.String );
  native java.lang.String getHostByAddr( int );
  native int getInetFamily();

Class java.net.PlainDatagramSocketImpl
  protected native void bind( int, java.net.InetAddress );
  protected native void send( java.net.DatagramPacket );
  protected native int peek( java.net.InetAddress );
  protected native void receive( java.net.DatagramPacket );
  protected native void setTTL( byte );
  protected native byte getTTL();
  protected native void join( java.net.InetAddress );
  protected native void leave( java.net.InetAddress );
  private native void datagramSocketCreate();
  private native void datagramSocketClose();
  private native void socketSetOption( int, java.lang.Object );
  private native int socketGetOption( int );

Class java.net.PlainSocketImpl
  private native void socketCreate( boolean );
  private native void socketConnect( java.net.InetAddress, int );
  private native void socketBind( java.net.InetAddress, int );
  private native void socketListen( int );
  private native void socketAccept( java.net.SocketImpl );
  private native int socketAvailable();
  private native void socketClose();
  private static native void initProto();
  private native void socketSetOption( int, boolean, java.lang.Object );
  private native int socketGetOption( int );

Class java.net.SocketInputStream
  private native int socketRead( byte[], int, int );

Class java.net.SocketOutputStream
  private native void socketWrite( byte[], int, int );

Class java.util.ResourceBundle
  private static native java.lang.Class[] getClassContext();

Class java.util.zip.Adler32
  public native void update( byte[], int, int );
  private native void update1( int );

Class java.util.zip.CRC32
  public native void update( byte[], int, int );
  private native void update1( int );

Class java.util.zip.Deflater
  public native void setDictionary( byte[], int, int );
  public native int deflate( byte[], int, int );
  public native int getAdler();
  public native int getTotalIn();
  public native int getTotalOut();
  public native void reset();
  public native void end();
  private native void init( boolean );

Class java.util.zip.Inflater
  public native void setDictionary( byte[], int, int );
  public native int inflate( byte[], int, int );
  public native int getAdler();
  public native int getTotalIn();
  public native int getTotalOut();
  public native void reset();
  public native void end();
  private native void init( boolean );
</PRE><BR><BR></P><!--

<TABLE width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="737b9c">
<TR><TD ALIGN="CENTER">
<a href="/user.php?op=login&redirect=%2Fview%2F%2FJVMSpecificClasses&PHPSESSID=8169f143a6ac0c7db552affd085b4a40">login</a> or <a href="/user.php?op=newacct&redirect=%2Fview%2F%2FJVMSpecificClasses&PHPSESSID=8169f143a6ac0c7db552affd085b4a40">new&nbsp;user</a><TR><TD>
</TABLE>

!-->
<!-- end BODY page !-->

<HR>

<DIV ALIGN="CENTER">
<TABLE BORDER="0" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR>
	<TD ALIGN="CENTER" COLSPAN="2">
		Content of these pages are owned and copyrighted by the poster.
	</TD>
</TR>
<TR>
	<TD ALIGN="RIGHT" WIDTH="50%">
		Hosted by:
	</TD>
	<TD ALIGN="LEFT">
		<A HREF="http://sourceforge.net/"><IMG 
			SRC="http://sourceforge.net/sflogo.php?group_id=2376&type=1"
			BORDER=0 HSPACE=0 VSPACE=0></A>
	</TD>
</TR>
</TABLE>
</DIV>
</BODY>
</HTML>
