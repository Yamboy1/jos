<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 FINAL//EN">
<HTML>
  <HEAD>
    <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=ISO-8859-1">
    <TITLE>MouseScenario.Imported @ jos.sf.net</TITLE>
  </HEAD>

<BODY BGCOLOR="#FFFFFF">

<!-- The FORM encloses the entire header, because it renders better that way. !-->
<FORM ACTION="/jump.php"><input type="hidden" name="PHPSESSID" value="582e5885263914f82a5e04ce17aadb8a" />

<!-- The JOS logo. !-->
<TABLE BORDER="0" CELLSPACING="0" CELLPADDING="3" WIDTH="100%">
<TR VALIGN="TOP" ALIGN="LEFT">
	<TD><A HREF="http://cjos.sourceforge.net/archive/"><IMG 
		VSPACE="0" HSPACE="0" ALIGN="MIDDLE" BORDER="0"
		SRC="http://cjos.sourceforge.net/archive/media/jos_logo_mini.gif"></A></TD>
	<!-- The tab table. !-->
	<TD WIDTH="100%" ALIGN="RIGHT" BGCOLOR="#FFFFFF" VALIGN="BOTTOM"> 
		<TABLE BORDER="0" CELLSPACING="0" CELLPADDING="3" WIDTH="100%" ALIGN="RIGHT">
			<TR VALIGN="MIDDLE" ALIGN="LEFT">

<TD BGCOLOR="White" WIDTH="60%">&nbsp;</TD>
<TD BGCOLOR="#FFFFCC"><A HREF="http://cjos.sourceforge.net/archive/">Home</A></TD>
<TD BGCOLOR="White">&nbsp;</TD>
<TD WIDTH="10%" BGCOLOR="#FFFFCC" ALIGN="CENTER"><A HREF="http://cjos.sourceforge.net/archive/info/">Info</A></TD>
<TD BGCOLOR="White">&nbsp;</TD>
<TD WIDTH="10%" BGCOLOR="#FFFFCC" ALIGN="CENTER"><A HREF="http://cjos.sourceforge.net/archive/dev/">DevZone</A></TD>
<TD BGCOLOR="White">&nbsp;</TD>
<TD WIDTH="10%" BGCOLOR="#FFCC66" ALIGN="CENTER"><A
HREF="http://jos.sourceforge.net/">Wiki</A></TD>
<TD BGCOLOR="White">&nbsp;</TD>
			</TR>
			<TR>
				<TD BGCOLOR="#FFCC66" ALIGN="RIGHT" COLSPAN="9">
					<A HREF="/view/Users/?PHPSESSID=582e5885263914f82a5e04ce17aadb8a">UsersWeb</A>
					&nbsp;|&nbsp;
					<A HREF="/view/Main/?PHPSESSID=582e5885263914f82a5e04ce17aadb8a">MainWeb</A>
					&nbsp;|&nbsp;
					<A HREF="/view/Info/?PHPSESSID=582e5885263914f82a5e04ce17aadb8a">InfoWeb</A>
					&nbsp;|&nbsp;
					<A HREF="/view/DevZone/?PHPSESSID=582e5885263914f82a5e04ce17aadb8a">DevZoneWeb</A>
					&nbsp;|&nbsp;
					<A HREF="/view/Support/?PHPSESSID=582e5885263914f82a5e04ce17aadb8a">SupportWeb</A>
				</TD>
			</TR>
		</TABLE>
	</TD>		
</TR>
<!-- The WikiHeader. !-->
<TR><TD COLSPAN="2">
<TABLE BORDER="0" CELLSPACING="0" CELLPADDING="3" WIDTH="100%">
<TR>
	<TD WIDTH="25%" ALIGN="CENTER" BGCOLOR="#FFFFCC" VALIGN="CENTER">
		<B>[&nbsp;<a href="/info//MouseScenario?PHPSESSID=582e5885263914f82a5e04ce17aadb8a">MouseScenario</a>&nbsp;]</B>
	</TD>
	<TD WIDTH="25%" ALIGN="CENTER" BGCOLOR="#FFEE88" VALIGN="CENTER">
		<B>[ not logged in ]</B>	</TD>
	<TD WIDTH="25%" ALIGN="CENTER" BGCOLOR="#FFDD77" VALIGN="CENTER">
		<B>[ Web: <a href="/view/Imported/?PHPSESSID=582e5885263914f82a5e04ce17aadb8a">Imported</a> ]</B>	</TD>
	<TD WIDTH="25%" ALIGN="CENTER" BGCOLOR="#FFCC66" VALIGN="CENTER">
		goto:&nbsp;<INPUT TYPE="TEXT" SIZE="10" NAME="topic"><!--<INPUT TYPE="IMAGE" SRC="/media/go.gif?PHPSESSID=582e5885263914f82a5e04ce17aadb8a" BORDER="0" VALUE="topic" ALT="goto">!-->&nbsp;<a href="/search.php?PHPSESSID=582e5885263914f82a5e04ce17aadb8a"><FONT SIZE="-1">options</FONT></a>
	</TD>
</TR>
</TABLE>

<TABLE BORDER="0" CELLSPACING="0" CELLPADDING="3" WIDTH="100%">
	<TR>
	<TD ALIGN="CENTER" BGCOLOR="#FFFFCC" VALIGN="TOP">
		[&nbsp;get <a href="/info/Imported/MouseScenario?PHPSESSID=582e5885263914f82a5e04ce17aadb8a">info</a> on or <a href="/edit/Imported/MouseScenario?PHPSESSID=582e5885263914f82a5e04ce17aadb8a">edit</a>&nbsp;]	</TD>
	<TD ALIGN="CENTER" BGCOLOR="#FFEE88" VALIGN="TOP">
		[&nbsp;<a href="/user.php?op=login&redirect=%2Fview%2F%2FMouseScenario&PHPSESSID=582e5885263914f82a5e04ce17aadb8a">login</a> or <a href="/user.php?op=newacct&redirect=%2Fview%2F%2FMouseScenario&PHPSESSID=582e5885263914f82a5e04ce17aadb8a">new&nbsp;user</a>&nbsp;]	</TD>
	<TD ALIGN="CENTER" BGCOLOR="#FFDD77" VALIGN="TOP">
		[&nbsp;list of <a href="/topics/Imported/?PHPSESSID=582e5885263914f82a5e04ce17aadb8a">topics</a>, <a href="/hubsnodes/Imported/?PHPSESSID=582e5885263914f82a5e04ce17aadb8a">hubs&nbsp;&amp;&nbsp;nodes</a>, or <a href="/changes/Imported/?PHPSESSID=582e5885263914f82a5e04ce17aadb8a">recent&nbsp;changes</a>&nbsp;]	</TD>
	</TR>
</TABLE>

<!-- From CommonHeader !-->
</TR></TD>
</TABLE>
</FORM>

<!-- start BODY page !-->
<P>
<FONT SIZE="-1"><a href="/view.php?topic=ArchitectureGroup&PHPSESSID=582e5885263914f82a5e04ce17aadb8a">ArchitectureGroup</a><wikitopic ArchitectureGroup /wikitopic></FONT>
<HR SIZE="1" NOSHADOW>
<P><EM>Article contributed by <a href="/view.php?topic=GilbertHerschberger&PHPSESSID=582e5885263914f82a5e04ce17aadb8a">GilbertHerschberger</a><wikitopic GilbertHerschberger /wikitopic> (12 June 2000).</EM></P>
<H4>Introduction</H4>
<P>Lately, I've been thinking about the operation of a mouse. Mouse hardware sends a short signal when it is moved up, down, right or left. Mouse hardware does not keep track of coordinates in two dimensional space. For buttons, a signal lasts for as long as you hold down the button.</P>
<P>Have you thought about a mouse hardware and its software driver? How does a mouse driver keep track of mouse position?</P>
<H4>Point</H4>
<P>A <EM>mouse</EM> is said to occupy only one point in two dimensional space. Mouse coordinates are maintained in software, not hardware. A mouse driver maintains one position property for each mouse. A position property is a point with x and y coordinates.</P>
<PRE>
public interface Mouse {
  public abstract Point getPoint();
  public abstract void setPoint( Point v );
  public boolean isButton( int b );
  public boolean setButton( int b, boolean v );
}
</PRE>
<P>Since a mouse driver must maintain coordinates, the point can be set by software. A mouse driver has two interfaces. On one hand, the mouse interrupt service uses an interface to <EM>change</EM> the current state, mouse position and button(s).</P>
<P>A mouse may have zero or more buttons. Each button is fully on or fully off, easily represented by a <CODE>boolean</CODE> type in Java. By convension, a driver might return <CODE>true</CODE> when a mouse button is on (pressed) and return <CODE>false</CODE> otherwise.</P>
<H4>Mickeys</H4>
<P>With hardware, a signal from a mouse is converted into an interrupt. An interrupt service routine reads the signal. An interrupt is trigged repeatedly as a mouse moves.</P>
<P>During an interrupt, coordinates are stored by the mouse driver in mickeys. Mouse position must be converted from mickeys to global screen coordinates. The ratio between mickeys and pixels may vary from one video mode to the next. The ratio may be configured for faster or slower movement.</P>
<H4>Screen coordinates</H4>
<P>A mouse driver always knows its current position. An application, like JADE, is more interested in using <EM>asynchronous I/O</EM> than <EM>polling</EM>. With asynchronous I/O, an application plugs itself into a mouse driver as a mouse listener. Whenever the state of a mouse changes, a method of a mouse listener is invoked.</P>
<P>Both an application and mouse interrupt service routine can set the position of a mouse at any time. A mouse listener and mouse interrupt service routine must be disconnected. They cannot be part of one thread. They cannot be blocked by synchronous access (mutex).</P>
<P>In order for an application to be notified when mouse state has changed, a separate (user) thread must be involved. A separate thread belongs to a bytecode process and invokes appropriate mouse listener methods when mouse state changes.</P>
<P>A mouse listener method cannot be invoked every time mouse state changes. Thousands of mouse interrupts may be translated into a few invocations of mouse listener methods. Otherwise, a virtual machine would do little more then handle mouse interrupts.</P>
<P>The mouse user thread must be responsible for polling the low-level mouse driver. Normally, a mouse user thread sits idle at a lowest priority. When a mouse interrupt service routine changes the mouse position, it might set a flag indicating position has changed.</P>
<PRE>
  boolean positionChange;
</PRE>
<P>The mouse user thread would check this flag and invoke mouse listener methods if position has changed.</P>
<P>When a mouse interrupt service routine changes the button(s) state, it might set a flag indicating a button state has changed.</P>
<PRE>
  boolean buttonChange;
</PRE>
<P>The mouse user thread would check this flag and invoke mouse listener methods if button state has changed.</P>
<H4>System process</H4>
<P>The operating system is responsible for preserving limited resources, like a mouse. Only one instance of a mouse driver can be open for each mouse port. Only one listener can be plugged into each mouse driver.</P>
<P>By extension, a single computer might have the hardware to support hundreds of mice concurrently, with each mouse on a different port. A limitation to use one mouse at a time is a limitation of software, not hardware.</P><BR><BR></P><!--

<TABLE width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="737b9c">
<TR><TD ALIGN="CENTER">
<a href="/user.php?op=login&redirect=%2Fview%2F%2FMouseScenario&PHPSESSID=582e5885263914f82a5e04ce17aadb8a">login</a> or <a href="/user.php?op=newacct&redirect=%2Fview%2F%2FMouseScenario&PHPSESSID=582e5885263914f82a5e04ce17aadb8a">new&nbsp;user</a><TR><TD>
</TABLE>

!-->
<!-- end BODY page !-->

<HR>

<DIV ALIGN="CENTER">
<TABLE BORDER="0" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR>
	<TD ALIGN="CENTER" COLSPAN="2">
		Content of these pages are owned and copyrighted by the poster.
	</TD>
</TR>
<TR>
	<TD ALIGN="RIGHT" WIDTH="50%">
		Hosted by:
	</TD>
	<TD ALIGN="LEFT">
		<A HREF="http://sourceforge.net/"><IMG 
			SRC="http://sourceforge.net/sflogo.php?group_id=2376&type=1"
			BORDER=0 HSPACE=0 VSPACE=0></A>
	</TD>
</TR>
</TABLE>
</DIV>
</BODY>
</HTML>
