<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 FINAL//EN">
<HTML>
  <HEAD>
    <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=ISO-8859-1">
    <TITLE>MultipleStageFactory.Imported @ jos.sf.net</TITLE>
  </HEAD>

<BODY BGCOLOR="#FFFFFF">

<!-- The FORM encloses the entire header, because it renders better that way. !-->
<FORM ACTION="/jump.php"><input type="hidden" name="PHPSESSID" value="8c7f6e631079e7052275642184964a28" />

<!-- The JOS logo. !-->
<TABLE BORDER="0" CELLSPACING="0" CELLPADDING="3" WIDTH="100%">
<TR VALIGN="TOP" ALIGN="LEFT">
	<TD><A HREF="http://cjos.sourceforge.net/archive/"><IMG 
		VSPACE="0" HSPACE="0" ALIGN="MIDDLE" BORDER="0"
		SRC="http://cjos.sourceforge.net/archive/media/jos_logo_mini.gif"></A></TD>
	<!-- The tab table. !-->
	<TD WIDTH="100%" ALIGN="RIGHT" BGCOLOR="#FFFFFF" VALIGN="BOTTOM"> 
		<TABLE BORDER="0" CELLSPACING="0" CELLPADDING="3" WIDTH="100%" ALIGN="RIGHT">
			<TR VALIGN="MIDDLE" ALIGN="LEFT">

<TD BGCOLOR="White" WIDTH="60%">&nbsp;</TD>
<TD BGCOLOR="#FFFFCC"><A HREF="http://cjos.sourceforge.net/archive/">Home</A></TD>
<TD BGCOLOR="White">&nbsp;</TD>
<TD WIDTH="10%" BGCOLOR="#FFFFCC" ALIGN="CENTER"><A HREF="http://cjos.sourceforge.net/archive/info/">Info</A></TD>
<TD BGCOLOR="White">&nbsp;</TD>
<TD WIDTH="10%" BGCOLOR="#FFFFCC" ALIGN="CENTER"><A HREF="http://cjos.sourceforge.net/archive/dev/">DevZone</A></TD>
<TD BGCOLOR="White">&nbsp;</TD>
<TD WIDTH="10%" BGCOLOR="#FFCC66" ALIGN="CENTER"><A
HREF="http://jos.sourceforge.net/">Wiki</A></TD>
<TD BGCOLOR="White">&nbsp;</TD>
			</TR>
			<TR>
				<TD BGCOLOR="#FFCC66" ALIGN="RIGHT" COLSPAN="9">
					<A HREF="/view/Users/?PHPSESSID=8c7f6e631079e7052275642184964a28">UsersWeb</A>
					&nbsp;|&nbsp;
					<A HREF="/view/Main/?PHPSESSID=8c7f6e631079e7052275642184964a28">MainWeb</A>
					&nbsp;|&nbsp;
					<A HREF="/view/Info/?PHPSESSID=8c7f6e631079e7052275642184964a28">InfoWeb</A>
					&nbsp;|&nbsp;
					<A HREF="/view/DevZone/?PHPSESSID=8c7f6e631079e7052275642184964a28">DevZoneWeb</A>
					&nbsp;|&nbsp;
					<A HREF="/view/Support/?PHPSESSID=8c7f6e631079e7052275642184964a28">SupportWeb</A>
				</TD>
			</TR>
		</TABLE>
	</TD>		
</TR>
<!-- The WikiHeader. !-->
<TR><TD COLSPAN="2">
<TABLE BORDER="0" CELLSPACING="0" CELLPADDING="3" WIDTH="100%">
<TR>
	<TD WIDTH="25%" ALIGN="CENTER" BGCOLOR="#FFFFCC" VALIGN="CENTER">
		<B>[&nbsp;<a href="/info//MultipleStageFactory?PHPSESSID=8c7f6e631079e7052275642184964a28">MultipleStageFactory</a>&nbsp;]</B>
	</TD>
	<TD WIDTH="25%" ALIGN="CENTER" BGCOLOR="#FFEE88" VALIGN="CENTER">
		<B>[ not logged in ]</B>	</TD>
	<TD WIDTH="25%" ALIGN="CENTER" BGCOLOR="#FFDD77" VALIGN="CENTER">
		<B>[ Web: <a href="/view/Imported/?PHPSESSID=8c7f6e631079e7052275642184964a28">Imported</a> ]</B>	</TD>
	<TD WIDTH="25%" ALIGN="CENTER" BGCOLOR="#FFCC66" VALIGN="CENTER">
		goto:&nbsp;<INPUT TYPE="TEXT" SIZE="10" NAME="topic"><!--<INPUT TYPE="IMAGE" SRC="/media/go.gif?PHPSESSID=8c7f6e631079e7052275642184964a28" BORDER="0" VALUE="topic" ALT="goto">!-->&nbsp;<a href="/search.php?PHPSESSID=8c7f6e631079e7052275642184964a28"><FONT SIZE="-1">options</FONT></a>
	</TD>
</TR>
</TABLE>

<TABLE BORDER="0" CELLSPACING="0" CELLPADDING="3" WIDTH="100%">
	<TR>
	<TD ALIGN="CENTER" BGCOLOR="#FFFFCC" VALIGN="TOP">
		[&nbsp;get <a href="/info/Imported/MultipleStageFactory?PHPSESSID=8c7f6e631079e7052275642184964a28">info</a> on or <a href="/edit/Imported/MultipleStageFactory?PHPSESSID=8c7f6e631079e7052275642184964a28">edit</a>&nbsp;]	</TD>
	<TD ALIGN="CENTER" BGCOLOR="#FFEE88" VALIGN="TOP">
		[&nbsp;<a href="/user.php?op=login&redirect=%2Fview%2F%2FMultipleStageFactory&PHPSESSID=8c7f6e631079e7052275642184964a28">login</a> or <a href="/user.php?op=newacct&redirect=%2Fview%2F%2FMultipleStageFactory&PHPSESSID=8c7f6e631079e7052275642184964a28">new&nbsp;user</a>&nbsp;]	</TD>
	<TD ALIGN="CENTER" BGCOLOR="#FFDD77" VALIGN="TOP">
		[&nbsp;list of <a href="/topics/Imported/?PHPSESSID=8c7f6e631079e7052275642184964a28">topics</a>, <a href="/hubsnodes/Imported/?PHPSESSID=8c7f6e631079e7052275642184964a28">hubs&nbsp;&amp;&nbsp;nodes</a>, or <a href="/changes/Imported/?PHPSESSID=8c7f6e631079e7052275642184964a28">recent&nbsp;changes</a>&nbsp;]	</TD>
	</TR>
</TABLE>

<!-- From CommonHeader !-->
</TR></TD>
</TABLE>
</FORM>

<!-- start BODY page !-->
<P>
<FONT SIZE="-1"><a href="/view.php?topic=SmartAPIPages&PHPSESSID=8c7f6e631079e7052275642184964a28">SmartAPIPages</a><wikitopic SmartAPIPages /wikitopic></FONT>
<HR SIZE="1" NOSHADOW>
<P><EM>Article contributed by <a href="/view.php?topic=GilbertHerschberger&PHPSESSID=8c7f6e631079e7052275642184964a28">GilbertHerschberger</a><wikitopic GilbertHerschberger /wikitopic> (6 December 1999).</EM></P>
<H4>Introduction</H4>
<P>An object factory can have either one or more than one stage. A multiple stage factory can be more flexible than a single stage factory.</P>
<H4>Single-stage factory</H4>
<P>When you use a single-stage factory, factory selection is determined at compile-time and object selection is deferred until runtime. As you write your application to use a single-stage factory, you determine which factory your application is going to use. You hard-code a factory to search for an appropriate implementation of an object.</P>
<H4>Multiple-stage factory</H4>
<P>When you use a multiple-stage factory, both factory selection and object selection are deferred until runtime. No only do you use a factory to search for an appropriate implementation of an object, you also use a meta-factory to search for an appropriate implementation of a factory.</P>
<P>Within the <CODE>java.*</CODE> packages, there are three examples of a multiple stage factory. Each example is very different from the others.</P>
<H4><CODE>java.awt.Toolkit</CODE></H4>
<P>The <CODE>java.awt.Toolkit</CODE> class is a primative form of a multiple stage object factory. It is a specific-purpose factory for a few visual components. Because it implements a <CODE>getDefaultToolkit()</CODE> method, the selection of a specific toolkit (factory) is deferred until runtime.</P>
<H4><CODE>java.net.URL</CODE></H4>
<P>The <CODE>java.net.URL</CODE> class is better. Unlike <CODE>java.awt.Toolkit</CODE>, the default implementation uses a <EM>scheme</EM>, as defined in a uniform resource locator, to select a factory based on package name. It is a specific-purpose factory for stream-based digital resources. While your application uses <CODE>java.net.URL</CODE> directly, selection of a particular factory is deferred until runtime.</P>
<P>The strength of <CODE>java.net.URL</CODE> comes from its multiple-stage design. Your application remains the same even as a foreign operating system changes. Some factories are not available on some machines.</P>
<H4><CODE>java.sql.DriverManager</CODE></H4>
<P>This class is a connection factory. It uses a strange manual self-registering mechanism to build a list of available factories. Unlike <CODE>java.net.URL</CODE>, a factory can be called by any name. Factory names do not need to follow a pattern. And further, this multiple-stage factory does not assume a stream-based digital resource. Your application remains the same even as a <a href="/view.php?topic=SQL&web=Imported&PHPSESSID=8c7f6e631079e7052275642184964a28">SQL</a> <wikitopic SQL /wikitopic>server changes. Some factories (drivers) are not available on some machines.</P>
<H4>Smart <nolink>API</H4>
<P>The <a href="/view.php?topic=SmartAPI&PHPSESSID=8c7f6e631079e7052275642184964a28">SmartAPI</a><wikitopic SmartAPI /wikitopic> takes a multiple stage object factory to the next level. Smart <nolink>API has these advantages:
<UL>
<LI><P>Both factory selection and object selection are deferred until runtime.</P>
<LI><P>Your application remains the same even as almost everything else changes. Some factories are not available on some machines.</P>
<LI><P>A factory can be called by any name. Factory names do not need to follow a pattern. Like <CODE>java.sql.DriverManager</CODE>, Smart <nolink>API does not depend on package names to find a factory for a scheme.</P>
<LI><P>It is easier to build a factory. Many reusable components are provided, including a <CODE>SmartFactory</CODE> based class.</P>
<LI><P>Like <CODE>java.net.URL</CODE> and <CODE>java.sql.DriverManager</CODE>, the Smart <nolink>API uses <EM>schemes</EM> and <EM>sub-schemes</EM> to search for a factory.</P>
<LI><P>It embraces an idea of <EM>scheme-chaining</EM>, where one scheme is used to modify the behavior of another.</P>
<LI><P>It is a factory for all kinds of digital resources, even those that are not stream-based.</P>
<LI><P>Factories are not static, or one-per-class-loader. Factories are added to the factory collection maintained by the Smart <nolink>API. The factory collection is organized like a tree, where similar factories can be added to the same branch. In other words, one component can build a custom factory graph without disturbing the default object factory. What does the factory graph look like? The <CODE>smartlist</CODE> program prints out a snapshot of the current configuration.</P>
<LI><P>Unlike <CODE>java.sql.DriverManager</CODE>, Smart <nolink>API breaks a one-to-one relationship between schemes and factories. One factory can implement many schemes, like a stream factory. Many factories can implement one scheme, like a program factory.</P>
<LI><P>Factories are not manually self-registering. The Smart <nolink>API configuration loads all factories the "normal" way, using their default constructor.</P>
</UL>
<P>When an application asks it for an object, the Smart <nolink>API cycles through each factory in the tree until a factory is found that accepts the request. There is no connection between the <EM>scheme</EM> and the name of a factory.</P>
<P>Order is important. Factories are queried in the order they were added to the collection. The first factory that accepts a request is the one that will be used. When two or more factories accept the same scheme, only the first is recognized; all other factories are ignored.</P>
<P>This is a powerful mechanism for debugging. A test machine can be configured with a special factory that produces debug versions of specific objects. This special factory is added first and given highest priority. The non-debug version of the factory does not need to be removed.</P>
<H4>Other implementations</H4>
<P>Other implementations of a multiple-stage object factory are possible. Factories can be selected by some mechanism other than <EM>schemes</EM> in a URL/URI. An interface name, for example, can be used to find all digital resources that can implement that interface. An object database can create objects based on an object ID, looking up additional information about the necessary factory in an index.</P>
<H4>Benefits</H4>
<P>By dividing an object factory into multiple stages, factory selection can be generalized and all factories brought under a single model. It provides one-stop shopping for all your object factory needs.</P><BR><BR></P><!--

<TABLE width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="737b9c">
<TR><TD ALIGN="CENTER">
<a href="/user.php?op=login&redirect=%2Fview%2F%2FMultipleStageFactory&PHPSESSID=8c7f6e631079e7052275642184964a28">login</a> or <a href="/user.php?op=newacct&redirect=%2Fview%2F%2FMultipleStageFactory&PHPSESSID=8c7f6e631079e7052275642184964a28">new&nbsp;user</a><TR><TD>
</TABLE>

!-->
<!-- end BODY page !-->

<HR>

<DIV ALIGN="CENTER">
<TABLE BORDER="0" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR>
	<TD ALIGN="CENTER" COLSPAN="2">
		Content of these pages are owned and copyrighted by the poster.
	</TD>
</TR>
<TR>
	<TD ALIGN="RIGHT" WIDTH="50%">
		Hosted by:
	</TD>
	<TD ALIGN="LEFT">
		<A HREF="http://sourceforge.net/"><IMG 
			SRC="http://sourceforge.net/sflogo.php?group_id=2376&type=1"
			BORDER=0 HSPACE=0 VSPACE=0></A>
	</TD>
</TR>
</TABLE>
</DIV>
</BODY>
</HTML>
