<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 FINAL//EN">
<HTML>
  <HEAD>
    <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=ISO-8859-1">
    <TITLE>WhyPackageFiles.Imported @ jos.sf.net</TITLE>
  </HEAD>

<BODY BGCOLOR="#FFFFFF">

<!-- The FORM encloses the entire header, because it renders better that way. !-->
<FORM ACTION="/jump.php"><input type="hidden" name="PHPSESSID" value="86d3d239bdcec249510dc2e0402a9f72" />

<!-- The JOS logo. !-->
<TABLE BORDER="0" CELLSPACING="0" CELLPADDING="3" WIDTH="100%">
<TR VALIGN="TOP" ALIGN="LEFT">
	<TD><A HREF="http://cjos.sourceforge.net/archive/"><IMG 
		VSPACE="0" HSPACE="0" ALIGN="MIDDLE" BORDER="0"
		SRC="http://cjos.sourceforge.net/archive/media/jos_logo_mini.gif"></A></TD>
	<!-- The tab table. !-->
	<TD WIDTH="100%" ALIGN="RIGHT" BGCOLOR="#FFFFFF" VALIGN="BOTTOM"> 
		<TABLE BORDER="0" CELLSPACING="0" CELLPADDING="3" WIDTH="100%" ALIGN="RIGHT">
			<TR VALIGN="MIDDLE" ALIGN="LEFT">

<TD BGCOLOR="White" WIDTH="60%">&nbsp;</TD>
<TD BGCOLOR="#FFFFCC"><A HREF="http://cjos.sourceforge.net/archive/">Home</A></TD>
<TD BGCOLOR="White">&nbsp;</TD>
<TD WIDTH="10%" BGCOLOR="#FFFFCC" ALIGN="CENTER"><A HREF="http://cjos.sourceforge.net/archive/info/">Info</A></TD>
<TD BGCOLOR="White">&nbsp;</TD>
<TD WIDTH="10%" BGCOLOR="#FFFFCC" ALIGN="CENTER"><A HREF="http://cjos.sourceforge.net/archive/dev/">DevZone</A></TD>
<TD BGCOLOR="White">&nbsp;</TD>
<TD WIDTH="10%" BGCOLOR="#FFCC66" ALIGN="CENTER"><A
HREF="http://jos.sourceforge.net/">Wiki</A></TD>
<TD BGCOLOR="White">&nbsp;</TD>
			</TR>
			<TR>
				<TD BGCOLOR="#FFCC66" ALIGN="RIGHT" COLSPAN="9">
					<A HREF="/view/Users/?PHPSESSID=86d3d239bdcec249510dc2e0402a9f72">UsersWeb</A>
					&nbsp;|&nbsp;
					<A HREF="/view/Main/?PHPSESSID=86d3d239bdcec249510dc2e0402a9f72">MainWeb</A>
					&nbsp;|&nbsp;
					<A HREF="/view/Info/?PHPSESSID=86d3d239bdcec249510dc2e0402a9f72">InfoWeb</A>
					&nbsp;|&nbsp;
					<A HREF="/view/DevZone/?PHPSESSID=86d3d239bdcec249510dc2e0402a9f72">DevZoneWeb</A>
					&nbsp;|&nbsp;
					<A HREF="/view/Support/?PHPSESSID=86d3d239bdcec249510dc2e0402a9f72">SupportWeb</A>
				</TD>
			</TR>
		</TABLE>
	</TD>		
</TR>
<!-- The WikiHeader. !-->
<TR><TD COLSPAN="2">
<TABLE BORDER="0" CELLSPACING="0" CELLPADDING="3" WIDTH="100%">
<TR>
	<TD WIDTH="25%" ALIGN="CENTER" BGCOLOR="#FFFFCC" VALIGN="CENTER">
		<B>[&nbsp;<a href="/info//WhyPackageFiles?PHPSESSID=86d3d239bdcec249510dc2e0402a9f72">WhyPackageFiles</a>&nbsp;]</B>
	</TD>
	<TD WIDTH="25%" ALIGN="CENTER" BGCOLOR="#FFEE88" VALIGN="CENTER">
		<B>[ not logged in ]</B>	</TD>
	<TD WIDTH="25%" ALIGN="CENTER" BGCOLOR="#FFDD77" VALIGN="CENTER">
		<B>[ Web: <a href="/view/Imported/?PHPSESSID=86d3d239bdcec249510dc2e0402a9f72">Imported</a> ]</B>	</TD>
	<TD WIDTH="25%" ALIGN="CENTER" BGCOLOR="#FFCC66" VALIGN="CENTER">
		goto:&nbsp;<INPUT TYPE="TEXT" SIZE="10" NAME="topic"><!--<INPUT TYPE="IMAGE" SRC="/media/go.gif?PHPSESSID=86d3d239bdcec249510dc2e0402a9f72" BORDER="0" VALUE="topic" ALT="goto">!-->&nbsp;<a href="/search.php?PHPSESSID=86d3d239bdcec249510dc2e0402a9f72"><FONT SIZE="-1">options</FONT></a>
	</TD>
</TR>
</TABLE>

<TABLE BORDER="0" CELLSPACING="0" CELLPADDING="3" WIDTH="100%">
	<TR>
	<TD ALIGN="CENTER" BGCOLOR="#FFFFCC" VALIGN="TOP">
		[&nbsp;get <a href="/info/Imported/WhyPackageFiles?PHPSESSID=86d3d239bdcec249510dc2e0402a9f72">info</a> on or <a href="/edit/Imported/WhyPackageFiles?PHPSESSID=86d3d239bdcec249510dc2e0402a9f72">edit</a>&nbsp;]	</TD>
	<TD ALIGN="CENTER" BGCOLOR="#FFEE88" VALIGN="TOP">
		[&nbsp;<a href="/user.php?op=login&redirect=%2Fview%2F%2FWhyPackageFiles&PHPSESSID=86d3d239bdcec249510dc2e0402a9f72">login</a> or <a href="/user.php?op=newacct&redirect=%2Fview%2F%2FWhyPackageFiles&PHPSESSID=86d3d239bdcec249510dc2e0402a9f72">new&nbsp;user</a>&nbsp;]	</TD>
	<TD ALIGN="CENTER" BGCOLOR="#FFDD77" VALIGN="TOP">
		[&nbsp;list of <a href="/topics/Imported/?PHPSESSID=86d3d239bdcec249510dc2e0402a9f72">topics</a>, <a href="/hubsnodes/Imported/?PHPSESSID=86d3d239bdcec249510dc2e0402a9f72">hubs&nbsp;&amp;&nbsp;nodes</a>, or <a href="/changes/Imported/?PHPSESSID=86d3d239bdcec249510dc2e0402a9f72">recent&nbsp;changes</a>&nbsp;]	</TD>
	</TR>
</TABLE>

<!-- From CommonHeader !-->
</TR></TD>
</TABLE>
</FORM>

<!-- start BODY page !-->
<P>
<EM>Article contributed by <a href="/view.php?topic=GilbertHerschberger&PHPSESSID=86d3d239bdcec249510dc2e0402a9f72">GilbertHerschberger</a><wikitopic GilbertHerschberger /wikitopic>.</EM>
<H4>Introduction</H4>
<P>The <a href="/view.php?topic=JOS&web=Imported&PHPSESSID=86d3d239bdcec249510dc2e0402a9f72">JOS</a> <wikitopic JOS /wikitopic>project might find package files more useful than .class or .jar files when it comes to developing and distributing JOS. I'm using Java without .class or .jar files. I find that Java without .class files can be far better than using Java with .class files.</P>
<P>Recently, I have been using Java using a <a href="/view.php?topic=PackageManager&PHPSESSID=86d3d239bdcec249510dc2e0402a9f72">PackageManager</a><wikitopic PackageManager /wikitopic>. This class provides a one-package-at-a-time approach to class loading. It uses only one class loader.</P>
<P>I'm using Java without .zip, .cab or .jar files. I'm using uncompressed package files.
<UL>
<LI>The buildPackage() method couldn't be simpler. It takes the name of a package, like <CODE>java.lang</CODE>. All of the classes in a package are automatically imported into a package file. This mechanism has no options for excluding classes in a package.
<LI>A package file contains the bytecode of all .class files in a package. The name of each class is stored with its bytecode.
<LI>The package file is not as small as a .class file and not as big as a .jar file. Packages files are downloaded as needed by a package manager.
<LI>A package file, like a .class file, has a strong naming convention. The name of the package file has a direct map to the name of a package. When stored, the name of a package file is unique. It is loaded automatically by a package manager. The <CODE>java.lang</CODE> package must be stored in a package file called <CODE>Package-java.lang</CODE>.
</UL>
<H4>Improving <CODE>javac</CODE></H4>
<P>With the recent experience of Java without .class files, I would like to see the following improvements:
<UL>
<LI>It would be an improvement if <CODE>javac</CODE> could produce package files directly. Why does <CODE>javac</CODE> output only .class files? Why doesn't it output .zips or .jars?
<LI>It would be an improvement if the parameter to <CODE>javac</CODE> could be a package name instead of a file name. The smallest unit of distribution is the package. So why doesn't <CODE>javac</CODE> compile one package at a time? There are benefits to compiling a package and only a package. <CODE>javac</CODE> would be responsible for incremental compiling. It could use the bytecode (etc) already compiled if the source code hasn't changed.
</UL>
<H4>Uncompressed package files</H4>
<P>Package files are uncompressed, and that's all right for now. It is less expensive to download one package file through <a href="/view.php?topic=HTTP&web=Imported&PHPSESSID=86d3d239bdcec249510dc2e0402a9f72">HTTP</a> <wikitopic HTTP /wikitopic>than many .class files it contains. Many classes are downloaded through a single connection to the service. In addition, uncompressed package files can be added to a compressed .zip or .jar. Since the .zip or .jar deals with compression, package files don't have to.</P>
<H4>Compressed package files</H4>
<P>Eventually, package files may be compressed on their own. Like the naming convention for package files, the naming convention for compressed package files is important. The <CODE>java.lang</CODE> package must be stored in a package file called <CODE>Package-java.lang.jar</CODE>.</P>
<H4>Improving Java</H4>
<P>I have some other ideas to make Java less expensive on a network as well.</P>
<UL>
<LI>Package files should be in a standard package directory on every host. The package files are not closely associated with a page on a host; but, closely associated with the host itself. When package files are closely associated with the host, the <a href="/view.php?topic=HTML&web=Imported&PHPSESSID=86d3d239bdcec249510dc2e0402a9f72">HTML</a> <wikitopic HTML /wikitopic>browser can cache the package files for an entire website. This is closer to the semantics of Java's static keyword.
<LI>This simplifies your <nolink>HTML. There is no need for the <a href="/view.php?topic=CODEBASE&web=Imported&PHPSESSID=86d3d239bdcec249510dc2e0402a9f72">CODEBASE</a> <wikitopic CODEBASE /wikitopic>tag to point to the .class, .zip, .cab or .jar. There is no need for the <a href="/view.php?topic=ARCHIVE&web=Imported&PHPSESSID=86d3d239bdcec249510dc2e0402a9f72">ARCHIVE</a> <wikitopic ARCHIVE /wikitopic>tag.
<LI>This encourages reuse. Independent packages contain libraries of reusable components. These packages are uploaded to the host. Any future development can build on a foundation of all these existing packages.
<LI>Package files use one and only one directory on your <nolink>HTTP service. There isn't a separate directory for each applet. There isn't a separate directory for each package. It is easier to upload. Easier to validate. Easier to drop a package from a host when it is no longer needed.
</UL>
<P>What is good for the network is good for a stand-alone computer. Package files are easier to install, easier to distribute, easier to administrate and easier to reuse. Jars are difficult to reuse. Optimized jars are impossible to reuse. Optimized jars are those where only some of the classes in a package has been imported into a jar.</P>
<P>The <a href="/view.php?topic=JOS&web=Imported&PHPSESSID=86d3d239bdcec249510dc2e0402a9f72">JOS</a> <wikitopic JOS /wikitopic>project could benefit from the distribution and redistribution of <a href="/view.php?topic=JOS&web=Imported&PHPSESSID=86d3d239bdcec249510dc2e0402a9f72">JOS</a> <wikitopic JOS /wikitopic>project classes in package files.</P>
<H4>Update on <nolink>Class.forName()</H4>
<P>Earlier, I thought that <CODE>Class.forName()</CODE> ignores the class loader of the calling class. Apparently, this is not entirely true. It may be true for my <nolink>HTML browser. When using the package manager outside the browser, <CODE>Class.forName()</CODE> actually works the way it should. How, I don't know...</P><BR><BR></P><!--

<TABLE width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="737b9c">
<TR><TD ALIGN="CENTER">
<a href="/user.php?op=login&redirect=%2Fview%2F%2FWhyPackageFiles&PHPSESSID=86d3d239bdcec249510dc2e0402a9f72">login</a> or <a href="/user.php?op=newacct&redirect=%2Fview%2F%2FWhyPackageFiles&PHPSESSID=86d3d239bdcec249510dc2e0402a9f72">new&nbsp;user</a><TR><TD>
</TABLE>

!-->
<!-- end BODY page !-->

<HR>

<DIV ALIGN="CENTER">
<TABLE BORDER="0" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR>
	<TD ALIGN="CENTER" COLSPAN="2">
		Content of these pages are owned and copyrighted by the poster.
	</TD>
</TR>
<TR>
	<TD ALIGN="RIGHT" WIDTH="50%">
		Hosted by:
	</TD>
	<TD ALIGN="LEFT">
		<A HREF="http://sourceforge.net/"><IMG 
			SRC="http://sourceforge.net/sflogo.php?group_id=2376&type=1"
			BORDER=0 HSPACE=0 VSPACE=0></A>
	</TD>
</TR>
</TABLE>
</DIV>
</BODY>
</HTML>
