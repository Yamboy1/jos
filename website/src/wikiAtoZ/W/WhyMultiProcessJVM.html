<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 FINAL//EN">
<HTML>
  <HEAD>
    <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=ISO-8859-1">
    <TITLE>WhyMultiProcessJVM.Imported @ jos.sf.net</TITLE>
  </HEAD>

<BODY BGCOLOR="#FFFFFF">

<!-- The FORM encloses the entire header, because it renders better that way. !-->
<FORM ACTION="/jump.php"><input type="hidden" name="PHPSESSID" value="e75c8d8f49bb84873e63b6b0a71954c5" />

<!-- The JOS logo. !-->
<TABLE BORDER="0" CELLSPACING="0" CELLPADDING="3" WIDTH="100%">
<TR VALIGN="TOP" ALIGN="LEFT">
	<TD><A HREF="http://cjos.sourceforge.net/archive/"><IMG 
		VSPACE="0" HSPACE="0" ALIGN="MIDDLE" BORDER="0"
		SRC="http://cjos.sourceforge.net/archive/media/jos_logo_mini.gif"></A></TD>
	<!-- The tab table. !-->
	<TD WIDTH="100%" ALIGN="RIGHT" BGCOLOR="#FFFFFF" VALIGN="BOTTOM"> 
		<TABLE BORDER="0" CELLSPACING="0" CELLPADDING="3" WIDTH="100%" ALIGN="RIGHT">
			<TR VALIGN="MIDDLE" ALIGN="LEFT">

<TD BGCOLOR="White" WIDTH="60%">&nbsp;</TD>
<TD BGCOLOR="#FFFFCC"><A HREF="http://cjos.sourceforge.net/archive/">Home</A></TD>
<TD BGCOLOR="White">&nbsp;</TD>
<TD WIDTH="10%" BGCOLOR="#FFFFCC" ALIGN="CENTER"><A HREF="http://cjos.sourceforge.net/archive/info/">Info</A></TD>
<TD BGCOLOR="White">&nbsp;</TD>
<TD WIDTH="10%" BGCOLOR="#FFFFCC" ALIGN="CENTER"><A HREF="http://cjos.sourceforge.net/archive/dev/">DevZone</A></TD>
<TD BGCOLOR="White">&nbsp;</TD>
<TD WIDTH="10%" BGCOLOR="#FFCC66" ALIGN="CENTER"><A
HREF="http://jos.sourceforge.net/">Wiki</A></TD>
<TD BGCOLOR="White">&nbsp;</TD>
			</TR>
			<TR>
				<TD BGCOLOR="#FFCC66" ALIGN="RIGHT" COLSPAN="9">
					<A HREF="/view/Users/?PHPSESSID=e75c8d8f49bb84873e63b6b0a71954c5">UsersWeb</A>
					&nbsp;|&nbsp;
					<A HREF="/view/Main/?PHPSESSID=e75c8d8f49bb84873e63b6b0a71954c5">MainWeb</A>
					&nbsp;|&nbsp;
					<A HREF="/view/Info/?PHPSESSID=e75c8d8f49bb84873e63b6b0a71954c5">InfoWeb</A>
					&nbsp;|&nbsp;
					<A HREF="/view/DevZone/?PHPSESSID=e75c8d8f49bb84873e63b6b0a71954c5">DevZoneWeb</A>
					&nbsp;|&nbsp;
					<A HREF="/view/Support/?PHPSESSID=e75c8d8f49bb84873e63b6b0a71954c5">SupportWeb</A>
				</TD>
			</TR>
		</TABLE>
	</TD>		
</TR>
<!-- The WikiHeader. !-->
<TR><TD COLSPAN="2">
<TABLE BORDER="0" CELLSPACING="0" CELLPADDING="3" WIDTH="100%">
<TR>
	<TD WIDTH="25%" ALIGN="CENTER" BGCOLOR="#FFFFCC" VALIGN="CENTER">
		<B>[&nbsp;<a href="/info//WhyMultiProcessJVM?PHPSESSID=e75c8d8f49bb84873e63b6b0a71954c5">WhyMultiProcessJVM</a>&nbsp;]</B>
	</TD>
	<TD WIDTH="25%" ALIGN="CENTER" BGCOLOR="#FFEE88" VALIGN="CENTER">
		<B>[ not logged in ]</B>	</TD>
	<TD WIDTH="25%" ALIGN="CENTER" BGCOLOR="#FFDD77" VALIGN="CENTER">
		<B>[ Web: <a href="/view/Imported/?PHPSESSID=e75c8d8f49bb84873e63b6b0a71954c5">Imported</a> ]</B>	</TD>
	<TD WIDTH="25%" ALIGN="CENTER" BGCOLOR="#FFCC66" VALIGN="CENTER">
		goto:&nbsp;<INPUT TYPE="TEXT" SIZE="10" NAME="topic"><!--<INPUT TYPE="IMAGE" SRC="/media/go.gif?PHPSESSID=e75c8d8f49bb84873e63b6b0a71954c5" BORDER="0" VALUE="topic" ALT="goto">!-->&nbsp;<a href="/search.php?PHPSESSID=e75c8d8f49bb84873e63b6b0a71954c5"><FONT SIZE="-1">options</FONT></a>
	</TD>
</TR>
</TABLE>

<TABLE BORDER="0" CELLSPACING="0" CELLPADDING="3" WIDTH="100%">
	<TR>
	<TD ALIGN="CENTER" BGCOLOR="#FFFFCC" VALIGN="TOP">
		[&nbsp;get <a href="/info/Imported/WhyMultiProcessJVM?PHPSESSID=e75c8d8f49bb84873e63b6b0a71954c5">info</a> on or <a href="/edit/Imported/WhyMultiProcessJVM?PHPSESSID=e75c8d8f49bb84873e63b6b0a71954c5">edit</a>&nbsp;]	</TD>
	<TD ALIGN="CENTER" BGCOLOR="#FFEE88" VALIGN="TOP">
		[&nbsp;<a href="/user.php?op=login&redirect=%2Fview%2F%2FWhyMultiProcessJVM&PHPSESSID=e75c8d8f49bb84873e63b6b0a71954c5">login</a> or <a href="/user.php?op=newacct&redirect=%2Fview%2F%2FWhyMultiProcessJVM&PHPSESSID=e75c8d8f49bb84873e63b6b0a71954c5">new&nbsp;user</a>&nbsp;]	</TD>
	<TD ALIGN="CENTER" BGCOLOR="#FFDD77" VALIGN="TOP">
		[&nbsp;list of <a href="/topics/Imported/?PHPSESSID=e75c8d8f49bb84873e63b6b0a71954c5">topics</a>, <a href="/hubsnodes/Imported/?PHPSESSID=e75c8d8f49bb84873e63b6b0a71954c5">hubs&nbsp;&amp;&nbsp;nodes</a>, or <a href="/changes/Imported/?PHPSESSID=e75c8d8f49bb84873e63b6b0a71954c5">recent&nbsp;changes</a>&nbsp;]	</TD>
	</TR>
</TABLE>

<!-- From CommonHeader !-->
</TR></TD>
</TABLE>
</FORM>

<!-- start BODY page !-->
<P>
Gilbert asked a question in <a href="/view.php?topic=JustJOS&PHPSESSID=e75c8d8f49bb84873e63b6b0a71954c5">JustJOS</a><wikitopic JustJOS /wikitopic> that I end up answering a lot.  The question is:
<center> <STRONG>Why does <a href="/view.php?topic=JOS&web=Imported&PHPSESSID=e75c8d8f49bb84873e63b6b0a71954c5">JOS</a> <wikitopic JOS /wikitopic>need a Multi-Process JVM?</STRONG> </center>
</P><P>
I will be adding to this list over time as I remember all of the reasons:
</P><P>
<UL> <LI> A good reason why you want <a href="/view.php?topic=ONE&web=Imported&PHPSESSID=e75c8d8f49bb84873e63b6b0a71954c5">ONE</a> <wikitopic ONE /wikitopic>Multi-Process <a href="/view.php?topic=JVM&web=Imported&PHPSESSID=e75c8d8f49bb84873e63b6b0a71954c5">JVM</a> <wikitopic JVM /wikitopic>as apposed to many JVMs is <a href="/view.php?topic=MemoryConsumption&PHPSESSID=e75c8d8f49bb84873e63b6b0a71954c5">MemoryConsumption</a><wikitopic MemoryConsumption /wikitopic>.  If you have multiple JVMs, then every time you create a new <a href="/view.php?topic=JVM&web=Imported&PHPSESSID=e75c8d8f49bb84873e63b6b0a71954c5">JVM</a> <wikitopic JVM /wikitopic>process, the base classes are copied into memory again.  This is completely unnecessary with a single <a href="/view.php?topic=JVM&web=Imported&PHPSESSID=e75c8d8f49bb84873e63b6b0a71954c5">JVM</a> <wikitopic JVM /wikitopic>smart enough to keep seperate processes seperate within itself.  With this type of VM, you can load a single version of a class's bytecodes into memory once and share the bytecodes amongst all of the processes.  Each process will need its own stack and static variables (otherwise they would conflict with each other) but bytecodes can be shared.  If one process needs one version of a class and another process needs an old version of a class, then both classes will need to have their bytecodes loaded seperately into memory.  Thus, the <a href="/view.php?topic=JOS&web=Imported&PHPSESSID=e75c8d8f49bb84873e63b6b0a71954c5">JOS</a> <wikitopic JOS /wikitopic>runtime system can save gobs of memory over another OS with multiple JVM's running the same processes.  This is an inherent benefit of having a Java Operating System rather than just the Java Platform.
<LI> Against popular opinion, multiple processes cannot be adequately or safely implemented inside a single normal <a href="/view.php?topic=JVM&web=Imported&PHPSESSID=e75c8d8f49bb84873e63b6b0a71954c5">JVM</a> <wikitopic JVM /wikitopic>with simple <a href="/view.php?topic=ClassLoader&PHPSESSID=e75c8d8f49bb84873e63b6b0a71954c5">ClassLoader</a><wikitopic ClassLoader /wikitopic> tricks.  Many have tried, and many have failed.  To a certain extent, this can work for most applications that do not create their own <a href="/view.php?topic=ClassLoaders&PHPSESSID=e75c8d8f49bb84873e63b6b0a71954c5">ClassLoaders</a><wikitopic ClassLoaders /wikitopic> or <a href="/view.php?topic=SecurityManagers&PHPSESSID=e75c8d8f49bb84873e63b6b0a71954c5">SecurityManagers</a><wikitopic SecurityManagers /wikitopic>.  However, using this approach would limit JOS's ability to support the entire Java Platform.  We would only be able to support a subset due to the technical limitations of this approach.  I have been lurking for quite a while on the <a href="/view.php?topic=JavaDesktop&PHPSESSID=e75c8d8f49bb84873e63b6b0a71954c5">JavaDesktop</a><wikitopic JavaDesktop /wikitopic> mailing list where many of those who have tried this technique discussed the problems with this approach.  Among these are <a href="/view.php?topic=LukeGorrie&PHPSESSID=e75c8d8f49bb84873e63b6b0a71954c5">LukeGorrie</a><wikitopic LukeGorrie /wikitopic> of the Echidna project.  Not all Java applications work under Echidna, and if <a href="/view.php?topic=JOS&web=Imported&PHPSESSID=e75c8d8f49bb84873e63b6b0a71954c5">JOS</a> <wikitopic JOS /wikitopic>were to use this approach, we would be restricted in the same manner.
</UL> 
* So if neither of these approaches is best, what can we do?*
</P><P>
We can build multi-process support into the base <a href="/view.php?topic=JVM&web=Imported&PHPSESSID=e75c8d8f49bb84873e63b6b0a71954c5">JVM</a> <wikitopic JVM /wikitopic>such that processes think they are still in their own JVM, but yet when classes are loaded, bytecodes of common classes can be shared accross processes.  No <a href="/view.php?topic=ClassLoader&PHPSESSID=e75c8d8f49bb84873e63b6b0a71954c5">ClassLoader</a><wikitopic ClassLoader /wikitopic> tricks are required at the bytecode level.
(One way of implementing this inside the <a href="/view.php?topic=JVM&web=Imported&PHPSESSID=e75c8d8f49bb84873e63b6b0a71954c5">JVM</a> <wikitopic JVM /wikitopic>is to use some <a href="/view.php?topic=PrimordialClassLoader&PHPSESSID=e75c8d8f49bb84873e63b6b0a71954c5">PrimordialClassLoader</a><wikitopic PrimordialClassLoader /wikitopic> tricks, but these do not keep us from being able to be 100% Java compatible.)
</P><P>
- <a href="/view.php?topic=AveryRegier&PHPSESSID=e75c8d8f49bb84873e63b6b0a71954c5">AveryRegier</a><wikitopic AveryRegier /wikitopic> (9 April 1999)
</P><P>
See Also: [ <a href="/view.php?topic=PrimordialClassLoader&PHPSESSID=e75c8d8f49bb84873e63b6b0a71954c5">PrimordialClassLoader</a><wikitopic PrimordialClassLoader /wikitopic> ] [ <a href="/view.php?topic=MemoryConsumption&PHPSESSID=e75c8d8f49bb84873e63b6b0a71954c5">MemoryConsumption</a><wikitopic MemoryConsumption /wikitopic> ]<BR><BR></P><!--

<TABLE width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="737b9c">
<TR><TD ALIGN="CENTER">
<a href="/user.php?op=login&redirect=%2Fview%2F%2FWhyMultiProcessJVM&PHPSESSID=e75c8d8f49bb84873e63b6b0a71954c5">login</a> or <a href="/user.php?op=newacct&redirect=%2Fview%2F%2FWhyMultiProcessJVM&PHPSESSID=e75c8d8f49bb84873e63b6b0a71954c5">new&nbsp;user</a><TR><TD>
</TABLE>

!-->
<!-- end BODY page !-->

<HR>

<DIV ALIGN="CENTER">
<TABLE BORDER="0" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR>
	<TD ALIGN="CENTER" COLSPAN="2">
		Content of these pages are owned and copyrighted by the poster.
	</TD>
</TR>
<TR>
	<TD ALIGN="RIGHT" WIDTH="50%">
		Hosted by:
	</TD>
	<TD ALIGN="LEFT">
		<A HREF="http://sourceforge.net/"><IMG 
			SRC="http://sourceforge.net/sflogo.php?group_id=2376&type=1"
			BORDER=0 HSPACE=0 VSPACE=0></A>
	</TD>
</TR>
</TABLE>
</DIV>
</BODY>
</HTML>
