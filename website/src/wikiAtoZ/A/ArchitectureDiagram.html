<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 FINAL//EN">
<HTML>
  <HEAD>
    <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=ISO-8859-1">
    <TITLE>ArchitectureDiagram.Imported @ jos.sf.net</TITLE>
  </HEAD>

<BODY BGCOLOR="#FFFFFF">

<!-- The FORM encloses the entire header, because it renders better that way. !-->
<FORM ACTION="/jump.php"><input type="hidden" name="PHPSESSID" value="2008b5e96cadeec7d0fbf6b62d28b038" />

<!-- The JOS logo. !-->
<TABLE BORDER="0" CELLSPACING="0" CELLPADDING="3" WIDTH="100%">
<TR VALIGN="TOP" ALIGN="LEFT">
	<TD><A HREF="http://cjos.sourceforge.net/archive/"><IMG 
		VSPACE="0" HSPACE="0" ALIGN="MIDDLE" BORDER="0"
		SRC="http://cjos.sourceforge.net/archive/media/jos_logo_mini.gif"></A></TD>
	<!-- The tab table. !-->
	<TD WIDTH="100%" ALIGN="RIGHT" BGCOLOR="#FFFFFF" VALIGN="BOTTOM"> 
		<TABLE BORDER="0" CELLSPACING="0" CELLPADDING="3" WIDTH="100%" ALIGN="RIGHT">
			<TR VALIGN="MIDDLE" ALIGN="LEFT">

<TD BGCOLOR="White" WIDTH="60%">&nbsp;</TD>
<TD BGCOLOR="#FFFFCC"><A HREF="http://cjos.sourceforge.net/archive/">Home</A></TD>
<TD BGCOLOR="White">&nbsp;</TD>
<TD WIDTH="10%" BGCOLOR="#FFFFCC" ALIGN="CENTER"><A HREF="http://cjos.sourceforge.net/archive/info/">Info</A></TD>
<TD BGCOLOR="White">&nbsp;</TD>
<TD WIDTH="10%" BGCOLOR="#FFFFCC" ALIGN="CENTER"><A HREF="http://cjos.sourceforge.net/archive/dev/">DevZone</A></TD>
<TD BGCOLOR="White">&nbsp;</TD>
<TD WIDTH="10%" BGCOLOR="#FFCC66" ALIGN="CENTER"><A
HREF="http://jos.sourceforge.net/">Wiki</A></TD>
<TD BGCOLOR="White">&nbsp;</TD>
			</TR>
			<TR>
				<TD BGCOLOR="#FFCC66" ALIGN="RIGHT" COLSPAN="9">
					<A HREF="/view/Users/?PHPSESSID=2008b5e96cadeec7d0fbf6b62d28b038">UsersWeb</A>
					&nbsp;|&nbsp;
					<A HREF="/view/Main/?PHPSESSID=2008b5e96cadeec7d0fbf6b62d28b038">MainWeb</A>
					&nbsp;|&nbsp;
					<A HREF="/view/Info/?PHPSESSID=2008b5e96cadeec7d0fbf6b62d28b038">InfoWeb</A>
					&nbsp;|&nbsp;
					<A HREF="/view/DevZone/?PHPSESSID=2008b5e96cadeec7d0fbf6b62d28b038">DevZoneWeb</A>
					&nbsp;|&nbsp;
					<A HREF="/view/Support/?PHPSESSID=2008b5e96cadeec7d0fbf6b62d28b038">SupportWeb</A>
				</TD>
			</TR>
		</TABLE>
	</TD>		
</TR>
<!-- The WikiHeader. !-->
<TR><TD COLSPAN="2">
<TABLE BORDER="0" CELLSPACING="0" CELLPADDING="3" WIDTH="100%">
<TR>
	<TD WIDTH="25%" ALIGN="CENTER" BGCOLOR="#FFFFCC" VALIGN="CENTER">
		<B>[&nbsp;<a href="/info//ArchitectureDiagram?PHPSESSID=2008b5e96cadeec7d0fbf6b62d28b038">ArchitectureDiagram</a>&nbsp;]</B>
	</TD>
	<TD WIDTH="25%" ALIGN="CENTER" BGCOLOR="#FFEE88" VALIGN="CENTER">
		<B>[ not logged in ]</B>	</TD>
	<TD WIDTH="25%" ALIGN="CENTER" BGCOLOR="#FFDD77" VALIGN="CENTER">
		<B>[ Web: <a href="/view/Imported/?PHPSESSID=2008b5e96cadeec7d0fbf6b62d28b038">Imported</a> ]</B>	</TD>
	<TD WIDTH="25%" ALIGN="CENTER" BGCOLOR="#FFCC66" VALIGN="CENTER">
		goto:&nbsp;<INPUT TYPE="TEXT" SIZE="10" NAME="topic"><!--<INPUT TYPE="IMAGE" SRC="/media/go.gif?PHPSESSID=2008b5e96cadeec7d0fbf6b62d28b038" BORDER="0" VALUE="topic" ALT="goto">!-->&nbsp;<a href="/search.php?PHPSESSID=2008b5e96cadeec7d0fbf6b62d28b038"><FONT SIZE="-1">options</FONT></a>
	</TD>
</TR>
</TABLE>

<TABLE BORDER="0" CELLSPACING="0" CELLPADDING="3" WIDTH="100%">
	<TR>
	<TD ALIGN="CENTER" BGCOLOR="#FFFFCC" VALIGN="TOP">
		[&nbsp;get <a href="/info/Imported/ArchitectureDiagram?PHPSESSID=2008b5e96cadeec7d0fbf6b62d28b038">info</a> on or <a href="/edit/Imported/ArchitectureDiagram?PHPSESSID=2008b5e96cadeec7d0fbf6b62d28b038">edit</a>&nbsp;]	</TD>
	<TD ALIGN="CENTER" BGCOLOR="#FFEE88" VALIGN="TOP">
		[&nbsp;<a href="/user.php?op=login&redirect=%2Fview%2F%2FArchitectureDiagram&PHPSESSID=2008b5e96cadeec7d0fbf6b62d28b038">login</a> or <a href="/user.php?op=newacct&redirect=%2Fview%2F%2FArchitectureDiagram&PHPSESSID=2008b5e96cadeec7d0fbf6b62d28b038">new&nbsp;user</a>&nbsp;]	</TD>
	<TD ALIGN="CENTER" BGCOLOR="#FFDD77" VALIGN="TOP">
		[&nbsp;list of <a href="/topics/Imported/?PHPSESSID=2008b5e96cadeec7d0fbf6b62d28b038">topics</a>, <a href="/hubsnodes/Imported/?PHPSESSID=2008b5e96cadeec7d0fbf6b62d28b038">hubs&nbsp;&amp;&nbsp;nodes</a>, or <a href="/changes/Imported/?PHPSESSID=2008b5e96cadeec7d0fbf6b62d28b038">recent&nbsp;changes</a>&nbsp;]	</TD>
	</TR>
</TABLE>

<!-- From CommonHeader !-->
</TR></TD>
</TABLE>
</FORM>

<!-- start BODY page !-->
<P>
<FONT SIZE="-1"><a href="/view.php?topic=DiagramPages&PHPSESSID=2008b5e96cadeec7d0fbf6b62d28b038">DiagramPages</a><wikitopic DiagramPages /wikitopic></FONT>
<HR SIZE="1" NOSHADOW>
<P><EM>Article contributed by <a href="/view.php?topic=GilbertHerschberger&PHPSESSID=2008b5e96cadeec7d0fbf6b62d28b038">GilbertHerschberger</a><wikitopic GilbertHerschberger /wikitopic> (31 March 2000)</EM></P>
<H4>Diagram 1</H4>
<P>The following diagram illustrates the general architecture of a Java-based operating system.</P>
<TABLE BORDER="2" BORDERCOLOR="black" CELLPADDING="6" BGCOLOR="lightblue">
<TR BGCOLOR="lightblue">
<TD WIDTH="100%" HEIGHT="50" ALIGN="CENTER">
  <FONT FACE="Arial" SIZE="+1">Machine Code</CODE></FONT>
</TD>
</TR>
<TR BGCOLOR="lightblue">
<TD ALIGN="CENTER">
  <FONT FACE="Arial">Native Interface</FONT>
</TD>
</TR>
<TR BGCOLOR="lightblue">
<TD HEIGHT="50" ALIGN="CENTER">
  <FONT FACE="Arial" SIZE="+1">Bytecode</CODE></FONT>
</TD>
</TR>
</TABLE>
<H4>Spectrum</H4>
<P>Machine code, bytecode and source code are all part of one spectrum. Machine code is at one end; source code is at the other; bytecode is somewhere in the middle. Machine code is nearest to the machine, or hardware. Source code is nearest to the human being, or programmer. Source code is translated to machine code.</P>
<P>Bytecode is somewhere between machine code and source code. It is not quite machine code. It pretty far removed from source code. As source code is translated into bytecode, it is reorganized as a class file, not just tokenized. Source code is translated to machine code, using bytecode as an intermediate form.</P>
<P>Machine code and bytecode are very similar. Machine code is translated by a machine. Bytecode is translated by a virtual machine. Opcodes are understood and invoked by both a machine code and bytecode processor.</P>
<H4>Machine Code</H4>
<P>Machine code is foreign to a bytecode translator. Machine code is generally interpreted by a machine code processor. A machine code processor is generally implemented in hardware. A hardware interpreter is generally more efficient than a software interpreter. Therefore, machine code is generally more efficient than bytecode.</P>
<H4>Native interface</H4>
<P>A native interface is required to map the functions of machine code to functions of bytecode. A native interface must define both the mapping primative data types and executive of multiple, concurrent threads.</P>
<H4>Bytecode</H4>
<P>Bytecode is generally interpreted by a bytecode processor. A bytecode processor is generally implemented in software. Bytecode is not machine code.</P>
<P>Bytecode can be <EM>translated</EM> into machine code; and machine code can be interpreted by hardware. These are general techniques to tranlate bytecode into machine code:</P>
<UL>
<LI><P><STRONG>Ahead-Of-Time Translation</STRONG></P>
<P>This kind of tranlation occurs ahead of the time to run. Translation is performed by an ahead-of-time (<a href="/view.php?topic=AOT&PHPSESSID=2008b5e96cadeec7d0fbf6b62d28b038">AOT</a><wikitopic AOT /wikitopic>) compiler.It is fully performed before the first machine code instruction of the target program is invoked.</P>
<P>Both .java and .class files can be translated into machine code. When .java files are translated, an ahead-of-time compiler replaces the <CODE>javac</CODE> tool. When .class files are translated, an ahead-of-time compiler replaces the <CODE>jar</CODE> tool.</P>
<LI><P><STRONG>Just-In-Time Translation</STRONG></P>
<P>This kind of translation occurs as needed, while a target program is running. Translation is performed by a just-in-time (JIT) compiler. An efficient translation creates machine code just in time to invoke it.</P>
<P>A <a href="/view.php?topic=JIT&web=Imported&PHPSESSID=2008b5e96cadeec7d0fbf6b62d28b038">JIT</a> <wikitopic JIT /wikitopic>translation uses class files because .java files are not available at runtime. Class files can be translated incrementally, one method at a time, one class at a time, or one package at a time. A <a href="/view.php?topic=JIT&web=Imported&PHPSESSID=2008b5e96cadeec7d0fbf6b62d28b038">JIT</a> <wikitopic JIT /wikitopic>translation might discard the resulting machine code.</P>
<LI><P><STRONG>Opcode method invocation</STRONG></P>
<P>Bytecode can be translated into machine code by invoking pre-compiled opcode methods. An opcode method is called at the machine code level. This is the classic bytecode interpreter. Bytecode can be optimized by futher resolving a codepool at the machine code level. An opcode interpreter finds classes, fields and methods by performing a lookup once and only once. Such optimization may be performed one field/method at a time, one class at a time, or one package at a time.</P>
<LI><P><STRONG>P-code method invocation</STRONG></P>
<P>Bytecode can be translated in to machine code by pre-calculating the address of each opcode method. Each opcode method has a machine address. A bytecode method can be translated into an array of opcode method addresses. The array is indexed by the program counter. Method invocation proceeds as each opcode method is invoked by its machine-level address.</P>
<P>For expression optimization, a block of statements is invoked. The machine code stack is altered so that the return from an opcode method actually returns to the beginning of the next method. The address of the sequencer is pushed first. The address of the last opcode in a block is pushed second. The address of the first opcode is pushed last. To invoke the block, the sequencer returns.</P>
</UL>
<P>Ahead-Of-Time and Just-In-Time are part of the same spectrum. <nolink>AOT is at one end; <a href="/view.php?topic=JIT&web=Imported&PHPSESSID=2008b5e96cadeec7d0fbf6b62d28b038">JIT</a> <wikitopic JIT /wikitopic>is at the other. Efficient systems provide a balance between <nolink>AOT and <a href="/view.php?topic=JIT&web=Imported&PHPSESSID=2008b5e96cadeec7d0fbf6b62d28b038">JIT</a> <wikitopic JIT /wikitopic>translation.</P>
<H4>Links</H4>
<P>The following diagram illustrates the general architecture of JOS. Click on a link to read more.</P>
<TABLE BORDER="2" BORDERCOLOR="black" BGCOLOR="lightblue">
<TR BGCOLOR="lightblue">
<TD COLSPAN="2" ALIGN="CENTER">
  <FONT FACE="Arial" SIZE="+1">Machine Code</CODE></FONT>
</TD>
</TR>
<TR>
<TD COLSPAN="2" ALIGN="CENTER">
  <TABLE COLS="2" BORDERCOLOR="black" BORDER="2">
  <TR>
  <TD ALIGN="CENTER">
  <FONT FACE="Arial" SIZE="+1" COLOR="darkpurple">%JOSBox</link</FONT>
	 <TABLE BGCOLOR="khaki" BORDER="1">
	 <TR>
	 <TD VALIGN="TOP"><a href="/view.php?topic=JosKernel&PHPSESSID=2008b5e96cadeec7d0fbf6b62d28b038">JosKernel</a><wikitopic JosKernel /wikitopic></TD>
	 <TD><A HREF="JOSKernelModule?PHPSESSID=2008b5e96cadeec7d0fbf6b62d28b038">JOSKernelModule</A>...
	 <UL>
	 <LI><A HREF="VirtualMachine?PHPSESSID=2008b5e96cadeec7d0fbf6b62d28b038">VirtualMachine</A><SUP>2</SUP>...
	 <LI>ATAPI
	 <LI>SCSI
	 <LI>network
	 </UL>
	 </TD>
	 </TR>
	 <TR>
	 <TD><A HREF="VirtualMachine?PHPSESSID=2008b5e96cadeec7d0fbf6b62d28b038">VirtualMachine</A><SUP>1</SUP></TD>
	 </TR>
	 </TABLE>
	 </TD>
  </TR>
  </TABLE>
</TD>
</TR>
<TR BGCOLOR="lightblue">
<TD COLSPAN="2" ALIGN="CENTER">
  <FONT FACE="Arial">Native Interface</FONT>
</TD>
</TR>
<TR BGCOLOR="lightblue">
<TD COLSPAN="2" ALIGN="CENTER">
  <TABLE BORDER="1" BORDERCOLOR="black" BGCOLOR="khaki">
  <TR>
  <TD>decaf Native Interface</TD>
  </TR>
  <TR>
  <TD><A HREF="JavaNativeInterface?PHPSESSID=2008b5e96cadeec7d0fbf6b62d28b038">JavaNativeInterface</A></TD>
  </TR>
  </TABLE>
</TD>
</TR>
<TR BGCOLOR="lightblue">
<TD COLSPAN="2" ALIGN="CENTER">
  <FONT FACE="Arial" SIZE="+1">Bytecode</CODE></FONT>
</TD>
</TR>
<TR>
<TD ALIGN="CENTER" VALIGN="TOP">
  <FONT FACE="Arial" SIZE="+1" COLOR="darkpurple"><A HREF="JOSystem?PHPSESSID=2008b5e96cadeec7d0fbf6b62d28b038">JOSystem</A></FONT>
	 <TABLE BORDER="1" BGCOLOR="khaki" BORDERCOLOR="black">
	 <TR>
	 <TD><A HREF="BytecodeNativeInterface?PHPSESSID=2008b5e96cadeec7d0fbf6b62d28b038">BytecodeNativeInterface</A></TD>
	 </TR>
	 <TR>
	 <TD><A HREF="JVMSpecificClasses?PHPSESSID=2008b5e96cadeec7d0fbf6b62d28b038">JVMSpecificClasses</A></TD>
	 </TR>
	 </TABLE>
</TD>
<TD>
  <TABLE BORDER="1">
  <TR BGCOLOR="yellow">
  <TD COLSPAN="4" ALIGN="CENTER">
  <FONT FACE="Arial" SIZE="+1">Java Class Libraries <CODE>java.<STRONG></CODE>, <CODE>javax.</STRONG></CODE></FONT>
  </TD>
  </TR>
  <TR BGCOLOR="lightblue">
  <TD VALIGN="TOP">
  Java 0 Platform
	 <TABLE BORDER="1" BORDERCOLOR="black" BGCOLOR="khaki">
	 <TR>
	 <TD>Applets</TD>
	 </TR>
	 <TR>
	 <TD>Applications</TD>
	 </TR>
	 <TR>
	 <TD>AWT</TD>
	 </TR>
	 </TABLE>
  </TD>
  <TD VALIGN="TOP">
  Java 1 Platform
	 <TABLE BORDER="1" BORDERCOLOR="black" BGCOLOR="khaki">
	 <TR>
	 <TD>Applets</TD>
	 </TR>
	 <TR>
	 <TD>Applications</TD>
	 </TR>
	 <TR>
	 <TD>AWT</TD>
	 </TR>
	 <TR>
	 <TD>Servlets</TD>
	 </TR>
	 <TR>
	 <TD>Swing</TD>
	 </TR>
	 </TABLE>
  </TD>
  <TD VALIGN="TOP">
  Java 2 Platform
	 <TABLE BORDER="1" BORDERCOLOR="black" BGCOLOR="khaki">
	 <TR>
	 <TD>Applets</TD>
	 </TR>
	 <TR>
	 <TD>Applications</TD>
	 </TR>
	 <TR>
	 <TD>AWT</TD>
	 </TR>
	 <TR>
	 <TD>Servlets</TD>
	 </TR>
	 <TR>
	 <TD>Swing</TD>
	 </TR>
	 </TABLE>
  </TD>
  <TD VALIGN="TOP">
  Java 3 Platform
	 <TABLE BORDER="1" BORDERCOLOR="black" BGCOLOR="khaki">
	 <TR>
	 <TD>Applets</TD>
	 </TR>
	 <TR>
	 <TD>Applications</TD>
	 </TR>
	 <TR>
	 <TD>AWT</TD>
	 </TR>
	 <TR>
	 <TD>Servlets</TD>
	 </TR>
	 <TR>
	 <TD>Swing</TD>
	 </TR>
	 </TABLE>
  </TD>
  </TR>
  <TR BGCOLOR="yellow">
  <TD COLSPAN="4" ALIGN="CENTER">
  <FONT FACE="Arial" SIZE="+1">Custom Class Libraries</FONT>
  </TD>
  </TR>
  <TR>
  <TD COLSPAN="4" ALIGN="CENTER">
	 <TABLE BORDER="1" BORDERCOLOR="black" BGCOLOR="khaki">
	 <TR>
	 <TD>
	 <UL>
	 <LI>drivers...
	 <LI>file subsystems...
	 <LI>services...
	 <LI>tools...
	 <LI><A href="http://www.metamech.com/wiki/view/Main/JADE">JADE</A>
	 <LI><A href="http://www.metamech.com/wiki/view/Main/Registry">Registry</A>
	 <LI><A href="http://www.metamech.com/wiki/view/Main/SmartAPI">SmartAPI</A>
	 <LI><A href="http://www.metamech.com/wiki/view/Main/TCPIPStack">TCPIPStack</A>
	 </UL>
	 </TD>
	 </TR>
	 </TABLE>
  </TD>
  </TR>
  <TR BGCOLOR="yellow">
  <TD COLSPAN="4" ALIGN="CENTER">
  <FONT FACE="Arial" SIZE="+1">User Applications</FONT>
  </TD>
  </TR>
  <TR>
  <TD COLSPAN="4" ALIGN="CENTER">
	 <TABLE BORDER="1" BORDERCOLOR="black" BGCOLOR="khaki">
	 <TR>
	 <TD>
	 <UL>
	 <LI><A href="http://www.metamech.com/wiki/view/Main/Jext">Jext</A>
	 </UL>
	 </TD>
	 </TR>
	 </TABLE>
  </TD>
  </TR>
  </TABLE>
</TD>
</TR>
</TABLE><BR><BR></P><!--

<TABLE width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="737b9c">
<TR><TD ALIGN="CENTER">
<a href="/user.php?op=login&redirect=%2Fview%2F%2FArchitectureDiagram&PHPSESSID=2008b5e96cadeec7d0fbf6b62d28b038">login</a> or <a href="/user.php?op=newacct&redirect=%2Fview%2F%2FArchitectureDiagram&PHPSESSID=2008b5e96cadeec7d0fbf6b62d28b038">new&nbsp;user</a><TR><TD>
</TABLE>

!-->
<!-- end BODY page !-->

<HR>

<DIV ALIGN="CENTER">
<TABLE BORDER="0" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR>
	<TD ALIGN="CENTER" COLSPAN="2">
		Content of these pages are owned and copyrighted by the poster.
	</TD>
</TR>
<TR>
	<TD ALIGN="RIGHT" WIDTH="50%">
		Hosted by:
	</TD>
	<TD ALIGN="LEFT">
		<A HREF="http://sourceforge.net/"><IMG 
			SRC="http://sourceforge.net/sflogo.php?group_id=2376&type=1"
			BORDER=0 HSPACE=0 VSPACE=0></A>
	</TD>
</TR>
</TABLE>
</DIV>
</BODY>
</HTML>
