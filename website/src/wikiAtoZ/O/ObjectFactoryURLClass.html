<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 FINAL//EN">
<HTML>
  <HEAD>
    <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=ISO-8859-1">
    <TITLE>ObjectFactoryURLClass.Imported @ jos.sf.net</TITLE>
  </HEAD>

<BODY BGCOLOR="#FFFFFF">

<!-- The FORM encloses the entire header, because it renders better that way. !-->
<FORM ACTION="/jump.php"><input type="hidden" name="PHPSESSID" value="4c12e103c7fc600b6055f0db244c1c7b" />

<!-- The JOS logo. !-->
<TABLE BORDER="0" CELLSPACING="0" CELLPADDING="3" WIDTH="100%">
<TR VALIGN="TOP" ALIGN="LEFT">
	<TD><A HREF="http://cjos.sourceforge.net/archive/"><IMG 
		VSPACE="0" HSPACE="0" ALIGN="MIDDLE" BORDER="0"
		SRC="http://cjos.sourceforge.net/archive/media/jos_logo_mini.gif"></A></TD>
	<!-- The tab table. !-->
	<TD WIDTH="100%" ALIGN="RIGHT" BGCOLOR="#FFFFFF" VALIGN="BOTTOM"> 
		<TABLE BORDER="0" CELLSPACING="0" CELLPADDING="3" WIDTH="100%" ALIGN="RIGHT">
			<TR VALIGN="MIDDLE" ALIGN="LEFT">

<TD BGCOLOR="White" WIDTH="60%">&nbsp;</TD>
<TD BGCOLOR="#FFFFCC"><A HREF="http://cjos.sourceforge.net/archive/">Home</A></TD>
<TD BGCOLOR="White">&nbsp;</TD>
<TD WIDTH="10%" BGCOLOR="#FFFFCC" ALIGN="CENTER"><A HREF="http://cjos.sourceforge.net/archive/info/">Info</A></TD>
<TD BGCOLOR="White">&nbsp;</TD>
<TD WIDTH="10%" BGCOLOR="#FFFFCC" ALIGN="CENTER"><A HREF="http://cjos.sourceforge.net/archive/dev/">DevZone</A></TD>
<TD BGCOLOR="White">&nbsp;</TD>
<TD WIDTH="10%" BGCOLOR="#FFCC66" ALIGN="CENTER"><A
HREF="http://jos.sourceforge.net/">Wiki</A></TD>
<TD BGCOLOR="White">&nbsp;</TD>
			</TR>
			<TR>
				<TD BGCOLOR="#FFCC66" ALIGN="RIGHT" COLSPAN="9">
					<A HREF="/view/Users/?PHPSESSID=4c12e103c7fc600b6055f0db244c1c7b">UsersWeb</A>
					&nbsp;|&nbsp;
					<A HREF="/view/Main/?PHPSESSID=4c12e103c7fc600b6055f0db244c1c7b">MainWeb</A>
					&nbsp;|&nbsp;
					<A HREF="/view/Info/?PHPSESSID=4c12e103c7fc600b6055f0db244c1c7b">InfoWeb</A>
					&nbsp;|&nbsp;
					<A HREF="/view/DevZone/?PHPSESSID=4c12e103c7fc600b6055f0db244c1c7b">DevZoneWeb</A>
					&nbsp;|&nbsp;
					<A HREF="/view/Support/?PHPSESSID=4c12e103c7fc600b6055f0db244c1c7b">SupportWeb</A>
				</TD>
			</TR>
		</TABLE>
	</TD>		
</TR>
<!-- The WikiHeader. !-->
<TR><TD COLSPAN="2">
<TABLE BORDER="0" CELLSPACING="0" CELLPADDING="3" WIDTH="100%">
<TR>
	<TD WIDTH="25%" ALIGN="CENTER" BGCOLOR="#FFFFCC" VALIGN="CENTER">
		<B>[&nbsp;<a href="/info//ObjectFactoryURLClass?PHPSESSID=4c12e103c7fc600b6055f0db244c1c7b">ObjectFactoryURLClass</a>&nbsp;]</B>
	</TD>
	<TD WIDTH="25%" ALIGN="CENTER" BGCOLOR="#FFEE88" VALIGN="CENTER">
		<B>[ not logged in ]</B>	</TD>
	<TD WIDTH="25%" ALIGN="CENTER" BGCOLOR="#FFDD77" VALIGN="CENTER">
		<B>[ Web: <a href="/view/Imported/?PHPSESSID=4c12e103c7fc600b6055f0db244c1c7b">Imported</a> ]</B>	</TD>
	<TD WIDTH="25%" ALIGN="CENTER" BGCOLOR="#FFCC66" VALIGN="CENTER">
		goto:&nbsp;<INPUT TYPE="TEXT" SIZE="10" NAME="topic"><!--<INPUT TYPE="IMAGE" SRC="/media/go.gif?PHPSESSID=4c12e103c7fc600b6055f0db244c1c7b" BORDER="0" VALUE="topic" ALT="goto">!-->&nbsp;<a href="/search.php?PHPSESSID=4c12e103c7fc600b6055f0db244c1c7b"><FONT SIZE="-1">options</FONT></a>
	</TD>
</TR>
</TABLE>

<TABLE BORDER="0" CELLSPACING="0" CELLPADDING="3" WIDTH="100%">
	<TR>
	<TD ALIGN="CENTER" BGCOLOR="#FFFFCC" VALIGN="TOP">
		[&nbsp;get <a href="/info/Imported/ObjectFactoryURLClass?PHPSESSID=4c12e103c7fc600b6055f0db244c1c7b">info</a> on or <a href="/edit/Imported/ObjectFactoryURLClass?PHPSESSID=4c12e103c7fc600b6055f0db244c1c7b">edit</a>&nbsp;]	</TD>
	<TD ALIGN="CENTER" BGCOLOR="#FFEE88" VALIGN="TOP">
		[&nbsp;<a href="/user.php?op=login&redirect=%2Fview%2F%2FObjectFactoryURLClass&PHPSESSID=4c12e103c7fc600b6055f0db244c1c7b">login</a> or <a href="/user.php?op=newacct&redirect=%2Fview%2F%2FObjectFactoryURLClass&PHPSESSID=4c12e103c7fc600b6055f0db244c1c7b">new&nbsp;user</a>&nbsp;]	</TD>
	<TD ALIGN="CENTER" BGCOLOR="#FFDD77" VALIGN="TOP">
		[&nbsp;list of <a href="/topics/Imported/?PHPSESSID=4c12e103c7fc600b6055f0db244c1c7b">topics</a>, <a href="/hubsnodes/Imported/?PHPSESSID=4c12e103c7fc600b6055f0db244c1c7b">hubs&nbsp;&amp;&nbsp;nodes</a>, or <a href="/changes/Imported/?PHPSESSID=4c12e103c7fc600b6055f0db244c1c7b">recent&nbsp;changes</a>&nbsp;]	</TD>
	</TR>
</TABLE>

<!-- From CommonHeader !-->
</TR></TD>
</TABLE>
</FORM>

<!-- start BODY page !-->
<P>
<FONT SIZE=-1><a href="/view.php?topic=SmartAPIPages&PHPSESSID=4c12e103c7fc600b6055f0db244c1c7b">SmartAPIPages</a><wikitopic SmartAPIPages /wikitopic></FONT>
<HR SIZE="1" NOSHADOW>
<EM>Article contributed by <a href="/view.php?topic=GilbertHerschberger&PHPSESSID=4c12e103c7fc600b6055f0db244c1c7b">GilbertHerschberger</a><wikitopic GilbertHerschberger /wikitopic> (20 July 1999).</EM>
<H4>Introduction</H4>
<P>Eventually, we are going to encapsulate all these JOS-related <nolink>URLs into a <a href="/view.php?topic=URL&web=Imported&PHPSESSID=4c12e103c7fc600b6055f0db244c1c7b">URL</a> <wikitopic URL /wikitopic>class. This is not going to be the <nolink>URL class called <CODE>java.net.URL</CODE>. It must be another class that is eventually part of the jos (or org.jos) package.</P>
<P>And, yes, we are going to call it <CODE>URL</CODE>. It isn't going to be in the same package with <CODE>java.net.URL</CODE>, so there's no problem.</P>
<H4>What does it do?</H4>
<P>For the most part, the <CODE>URL</CODE> class is custom made for all those programmers who want to design a smart <nolink>API. This class doesn't have to be exposed to application programmers. It is important for the controller and factory to use <CODE>java.lang.String</CODE> for their URL-like parameters. A string can contain a malformed uniform resource locator, and that's just fine. On the other hand, the <CODE>URL</CODE> class can't contain a malformed <nolink>URL.</P>
<P>The use of the <CODE>URL</CODE> class is recommended, but not required. Programmers who want to write their own smart <nolink>API might want to write their own code to pick apart the JOS-compatible <nolink>URL, and that's just fine, too.</P>
<H4>Front end</H4>
<P>On the other hand, the <CODE>URL</CODE> class should serve as an easy front end to the full object factory. In other words, the <CODE>URL</CODE> class might have a <CODE>getObject()</CODE> method.
<PRE>
public class URL {
  public URL( String v ) {
	 url = v;
  }
  public String getProtocol() {
  :
  }
  public Enumeration getSubProtocols() {
  :
  }
  public String getHost() {
  :
  }
  public String getPort() {
  :
  }
  public String getPath() {
  :
  }
  public String getDocument() {
  :
  }
  public String getFragment() {
  :
  }
  public Object getObject() {
	 ObjectFactory factory = ObjectFactory.getFactory();
	 return factory.getObject( url );
  }
  private String url;
}
</PRE>
<H4>Tree</H4>
<P>When one protocol uses another, there should be an easy way to extract the child protocol from a <CODE>URL</CODE>. How 'bout this:
<PRE>
  public URL getNext() {
  :
  }
</PRE>
<P>I'm beginning to get the picture. This method would strip away the protocol from one <CODE>URL</CODE> to create another. <CODE>x-registry:file:/usr/local/example</CODE> would become <CODE>file:/usr/local/example</CODE>. If there is no protocol for a <CODE>URL</CODE>, this method might return <CODE>null</CODE> or throw some kind of exception.</P>
<H4>Matching</H4>
<P>While writing the code required by a controller, the need to match on protocol and subprotocol comes up frequently. It should be good enough to match a <CODE>URL</CODE> to a protocol or subprotocol, like this:
<PRE>
  public void example( URL url ) {
	 if ( url.isProtocol( "x-registry:" ) ) {
		if ( url.isSubprotocol( "ini:" ) ) {
		  // do something.
		}
	 }
  }
</PRE>
<H4>Standard behavior</H4>
<P>A standard smart factory must pass the full uniform resource locator to each controller. The <nolink>URL does not get shorter and shorter as it's passed from factory to controller. The controller is the only part of the model that can decode a <nolink>URL string.</P>
<P>This is important for chaining smart factories together. The <CODE>acceptsURL()</CODE> method needs the full uniform resource locator in order to decode it and match properly.</P>
<P>This is important in the operation of an object factory, which uses lots of other smart factories to do its work.</P>
<H4>Compatible with <CODE>java.net.URL</CODE></H4>
<P>When a JOS-compatible <nolink>URL is also a Java-compatible <nolink>URL, it is possible to get a <CODE>java.net.URL</CODE> from our <CODE>smartapi.URL</CODE> class.
<PRE>
public class URL { (cont.)
  public java.net.URL toSystemURL() {
	 try {
		return new URL( url );
	 }
	 catch( MalformedURLException e ) {
		return null;
	 }		
  }
</PRE>
<P>For example, the ini: subprotocol should expect a http: subprotocol. Everything in the <nolink>URL string should be handled by the Java-compatible <CODE>URL</CODE> class.</P>
<PRE>
  public Object getObject( String url ) {
	 URL u1 = new URL( url );
	 if ( u1.isProtocol( "x-registry:" ) ) {
		u1 = u1.getNext();
		if ( u1.isProtocol( "ini:" ) ) {
		  u1 = u1.getNext();
		  java.net.URL u2 = u1.toSystemURL();
		  if ( u2 != null ) {
			 // import .ini file from u2 to a registry
		  }
		}
	 }
	 return null;
  }
</PRE>
<HR>
<P><A HREF="http://www.sun.com/">Sun Microsystems</A> has recently announced their intention to create a replacement for <CODE>java.net.URL</CODE> that is completely compatible with the Internet standard (RFC-?). This class is planned for the <a href="/view.php?topic=JDK&web=Imported&PHPSESSID=4c12e103c7fc600b6055f0db244c1c7b">JDK</a> <wikitopic JDK /wikitopic>1.3.</P>
<P><EM>Why should I upgrade when I don't have to?</EM></P>
<P>Unfortunately, Sun is going to call the new class <CODE>java.net.URL</CODE>. What Sun Microsystems should do is this: They should do what everybody else does. They should distribute a <CODE>com.sun.net.URL</CODE> class that works on existing Java platforms. You should not have to change your operating system to add one Java package. The Java Virtual Machine technology does not require it. -- Gilbert Herschberger (2 September 1999).</P><BR><BR></P><!--

<TABLE width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="737b9c">
<TR><TD ALIGN="CENTER">
<a href="/user.php?op=login&redirect=%2Fview%2F%2FObjectFactoryURLClass&PHPSESSID=4c12e103c7fc600b6055f0db244c1c7b">login</a> or <a href="/user.php?op=newacct&redirect=%2Fview%2F%2FObjectFactoryURLClass&PHPSESSID=4c12e103c7fc600b6055f0db244c1c7b">new&nbsp;user</a><TR><TD>
</TABLE>

!-->
<!-- end BODY page !-->

<HR>

<DIV ALIGN="CENTER">
<TABLE BORDER="0" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR>
	<TD ALIGN="CENTER" COLSPAN="2">
		Content of these pages are owned and copyrighted by the poster.
	</TD>
</TR>
<TR>
	<TD ALIGN="RIGHT" WIDTH="50%">
		Hosted by:
	</TD>
	<TD ALIGN="LEFT">
		<A HREF="http://sourceforge.net/"><IMG 
			SRC="http://sourceforge.net/sflogo.php?group_id=2376&type=1"
			BORDER=0 HSPACE=0 VSPACE=0></A>
	</TD>
</TR>
</TABLE>
</DIV>
</BODY>
</HTML>
